<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 18 Text Analysis | PLSC 31101: Computational Tools for Social Science</title>
  <meta name="description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 18 Text Analysis | PLSC 31101: Computational Tools for Social Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://rochelleterman.github.io/plsc-31101/" />
  
  <meta property="og:description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="github-repo" content="rochelleterman/plsc-31101" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Text Analysis | PLSC 31101: Computational Tools for Social Science" />
  
  <meta name="twitter:description" content="This book contains course notes and other materials for PLSC 31101." />
  

<meta name="author" content="Rochelle Terman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="collecting-data-from-the-web.html"/>
<link rel="next" href="git-and-github.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PLSC 31101</a></li>

<li class="divider"></li>
<li class="part"><span><b>I Before Class</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.1</b> Course Description</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#who-should-take-this-course"><i class="fa fa-check"></i><b>1.2</b> Who should take this course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#requirements-and-evaluation"><i class="fa fa-check"></i><b>1.3</b> Requirements and Evaluation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#activities-and-materials"><i class="fa fa-check"></i><b>1.4</b> Activities and Materials</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#curriculum-outline-schedule"><i class="fa fa-check"></i><b>1.5</b> Curriculum Outline / Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#r-studio"><i class="fa fa-check"></i><b>2.2</b> R Studio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a></li>
<li class="chapter" data-level="2.4" data-path="installation.html"><a href="installation.html#latex"><i class="fa fa-check"></i><b>2.4</b> LaTex</a></li>
<li class="chapter" data-level="2.5" data-path="installation.html"><a href="installation.html#the-bash-shell"><i class="fa fa-check"></i><b>2.5</b> The Bash Shell</a></li>
<li class="chapter" data-level="2.6" data-path="installation.html"><a href="installation.html#git"><i class="fa fa-check"></i><b>2.6</b> Git</a></li>
<li class="chapter" data-level="2.7" data-path="installation.html"><a href="installation.html#other-helpful-tools"><i class="fa fa-check"></i><b>2.7</b> Other helpful tools</a></li>
<li class="chapter" data-level="2.8" data-path="installation.html"><a href="installation.html#testing-your-installation"><i class="fa fa-check"></i><b>2.8</b> Testing your installation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="homework-rubric.html"><a href="homework-rubric.html"><i class="fa fa-check"></i><b>3</b> Homework Rubric</a></li>
<li class="part"><span><b>II Course Notes</b></span></li>
<li class="chapter" data-level="4" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>4</b> Introduction</a><ul>
<li class="chapter" data-level="4.1" data-path="introduction.html"><a href="introduction.html#the-motivation"><i class="fa fa-check"></i><b>4.1</b> The Motivation</a></li>
<li class="chapter" data-level="4.2" data-path="introduction.html"><a href="introduction.html#about-this-class"><i class="fa fa-check"></i><b>4.2</b> About This Class</a></li>
<li class="chapter" data-level="4.3" data-path="introduction.html"><a href="introduction.html#learning-how-to-program"><i class="fa fa-check"></i><b>4.3</b> Learning How to Program</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>5</b> R Basics</a><ul>
<li class="chapter" data-level="5.1" data-path="r-basics.html"><a href="r-basics.html#what-is-r"><i class="fa fa-check"></i><b>5.1</b> What is R?</a></li>
<li class="chapter" data-level="5.2" data-path="r-basics.html"><a href="r-basics.html#rstudio"><i class="fa fa-check"></i><b>5.2</b> RStudio</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-basics.html"><a href="r-basics.html#console"><i class="fa fa-check"></i><b>5.2.1</b> Console</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-basics.html"><a href="r-basics.html#scripts"><i class="fa fa-check"></i><b>5.2.2</b> Scripts</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-basics.html"><a href="r-basics.html#running-code"><i class="fa fa-check"></i><b>5.2.3</b> Running Code</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-basics.html"><a href="r-basics.html#comments"><i class="fa fa-check"></i><b>5.2.4</b> Comments</a></li>
<li class="chapter" data-level="5.2.5" data-path="r-basics.html"><a href="r-basics.html#diagnostics-and-errors"><i class="fa fa-check"></i><b>5.2.5</b> Diagnostics and errors</a></li>
<li class="chapter" data-level="5.2.6" data-path="r-basics.html"><a href="r-basics.html#errors-messages-and-warnings"><i class="fa fa-check"></i><b>5.2.6</b> Errors, Messages, and Warnings</a></li>
<li class="chapter" data-level="5.2.7" data-path="r-basics.html"><a href="r-basics.html#r-environment"><i class="fa fa-check"></i><b>5.2.7</b> R Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-basics.html"><a href="r-basics.html#r-packages-1"><i class="fa fa-check"></i><b>5.3</b> R Packages</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-basics.html"><a href="r-basics.html#installing-packages"><i class="fa fa-check"></i><b>5.3.1</b> Installing Packages</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>5.3.2</b> Loading Packages</a></li>
<li class="chapter" data-level="5.3.3" data-path="r-basics.html"><a href="r-basics.html#challenge"><i class="fa fa-check"></i><b>5.3.3</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="r-basics.html"><a href="r-basics.html#r-markdown"><i class="fa fa-check"></i><b>5.4</b> R Markdown</a><ul>
<li class="chapter" data-level="5.4.1" data-path="r-basics.html"><a href="r-basics.html#yaml-header"><i class="fa fa-check"></i><b>5.4.1</b> YAML Header</a></li>
<li class="chapter" data-level="5.4.2" data-path="r-basics.html"><a href="r-basics.html#markdown"><i class="fa fa-check"></i><b>5.4.2</b> Markdown</a></li>
<li class="chapter" data-level="5.4.3" data-path="r-basics.html"><a href="r-basics.html#code-chunks"><i class="fa fa-check"></i><b>5.4.3</b> Code Chunks</a></li>
<li class="chapter" data-level="5.4.4" data-path="r-basics.html"><a href="r-basics.html#knitting"><i class="fa fa-check"></i><b>5.4.4</b> Knitting</a></li>
<li class="chapter" data-level="5.4.5" data-path="r-basics.html"><a href="r-basics.html#r-chunk-options-for-knitting"><i class="fa fa-check"></i><b>5.4.5</b> R Chunk Options for Knitting</a></li>
<li class="chapter" data-level="5.4.6" data-path="r-basics.html"><a href="r-basics.html#cheatsheets-and-other-resources"><i class="fa fa-check"></i><b>5.4.6</b> Cheatsheets and Other Resources</a></li>
<li class="chapter" data-level="5.4.7" data-path="r-basics.html"><a href="r-basics.html#challenges"><i class="fa fa-check"></i><b>5.4.7</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-syntax.html"><a href="r-syntax.html"><i class="fa fa-check"></i><b>6</b> R Syntax</a><ul>
<li class="chapter" data-level="6.1" data-path="r-syntax.html"><a href="r-syntax.html#variables"><i class="fa fa-check"></i><b>6.1</b> Variables</a><ul>
<li class="chapter" data-level="6.1.1" data-path="r-syntax.html"><a href="r-syntax.html#arithmetic"><i class="fa fa-check"></i><b>6.1.1</b> Arithmetic</a></li>
<li class="chapter" data-level="6.1.2" data-path="r-syntax.html"><a href="r-syntax.html#assigning-variables"><i class="fa fa-check"></i><b>6.1.2</b> Assigning Variables</a></li>
<li class="chapter" data-level="6.1.3" data-path="r-syntax.html"><a href="r-syntax.html#variable-names"><i class="fa fa-check"></i><b>6.1.3</b> Variable Names</a></li>
<li class="chapter" data-level="6.1.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-1"><i class="fa fa-check"></i><b>6.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="r-syntax.html"><a href="r-syntax.html#functions"><i class="fa fa-check"></i><b>6.2</b> Functions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-syntax.html"><a href="r-syntax.html#arguments"><i class="fa fa-check"></i><b>6.2.1</b> Arguments</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-syntax.html"><a href="r-syntax.html#store-function-output"><i class="fa fa-check"></i><b>6.2.2</b> Store Function Output</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-syntax.html"><a href="r-syntax.html#argument-restrictions-and-defaults"><i class="fa fa-check"></i><b>6.2.3</b> Argument Restrictions and Defaults</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-syntax.html"><a href="r-syntax.html#documentation-and-help-files"><i class="fa fa-check"></i><b>6.2.4</b> Documentation and Help Files</a></li>
<li class="chapter" data-level="6.2.5" data-path="r-syntax.html"><a href="r-syntax.html#challenges-2"><i class="fa fa-check"></i><b>6.2.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-syntax.html"><a href="r-syntax.html#data-types"><i class="fa fa-check"></i><b>6.3</b> Data Types</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-syntax.html"><a href="r-syntax.html#what-is-that-type"><i class="fa fa-check"></i><b>6.3.1</b> What Is that Type?</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-syntax.html"><a href="r-syntax.html#coercion"><i class="fa fa-check"></i><b>6.3.2</b> Coercion</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-syntax.html"><a href="r-syntax.html#other-objects"><i class="fa fa-check"></i><b>6.3.3</b> Other Objects</a></li>
<li class="chapter" data-level="6.3.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-3"><i class="fa fa-check"></i><b>6.3.4</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html"><i class="fa fa-check"></i><b>7</b> Data Classes and Structures</a><ul>
<li class="chapter" data-level="7.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#vectors"><i class="fa fa-check"></i><b>7.1</b> Vectors</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-vectors"><i class="fa fa-check"></i><b>7.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-a-vector"><i class="fa fa-check"></i><b>7.1.2</b> Naming a Vector</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#calculations-on-vectors"><i class="fa fa-check"></i><b>7.1.3</b> Calculations on Vectors</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#types-of-vectors"><i class="fa fa-check"></i><b>7.1.4</b> Types of Vectors</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercion-1"><i class="fa fa-check"></i><b>7.1.5</b> Coercion</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-4"><i class="fa fa-check"></i><b>7.1.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#lists"><i class="fa fa-check"></i><b>7.2</b> Lists</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-lists"><i class="fa fa-check"></i><b>7.2.1</b> Creating Lists</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-lists"><i class="fa fa-check"></i><b>7.2.2</b> Naming Lists</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#list-structure"><i class="fa fa-check"></i><b>7.2.3</b> List Structure</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-5"><i class="fa fa-check"></i><b>7.2.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a><ul>
<li class="chapter" data-level="7.3.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-factors"><i class="fa fa-check"></i><b>7.3.1</b> Creating Factors</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#summarizing-a-factor"><i class="fa fa-check"></i><b>7.3.2</b> Summarizing a Factor</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#changing-factor-levels"><i class="fa fa-check"></i><b>7.3.3</b> Changing Factor Levels</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors-are-integers"><i class="fa fa-check"></i><b>7.3.4</b> Factors are Integers</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-6"><i class="fa fa-check"></i><b>7.3.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrices"><i class="fa fa-check"></i><b>7.4</b> Matrices</a><ul>
<li class="chapter" data-level="7.4.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-matrices"><i class="fa fa-check"></i><b>7.4.1</b> Creating Matrices</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-dimensions"><i class="fa fa-check"></i><b>7.4.2</b> Matrix Dimensions</a></li>
<li class="chapter" data-level="7.4.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-names"><i class="fa fa-check"></i><b>7.4.3</b> Matrix Names</a></li>
<li class="chapter" data-level="7.4.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenge-1"><i class="fa fa-check"></i><b>7.4.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#dataframes"><i class="fa fa-check"></i><b>7.5</b> Dataframes</a><ul>
<li class="chapter" data-level="7.5.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-dataframes"><i class="fa fa-check"></i><b>7.5.1</b> Creating Dataframes</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#the-structure-of-dataframes"><i class="fa fa-check"></i><b>7.5.2</b> The Structure of Dataframes</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-dataframes"><i class="fa fa-check"></i><b>7.5.3</b> Naming Dataframes</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercing-dataframes"><i class="fa fa-check"></i><b>7.5.4</b> Coercing Dataframes</a></li>
<li class="chapter" data-level="7.5.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-7"><i class="fa fa-check"></i><b>7.5.5</b> Challenges</a></li>
<li class="chapter" data-level="7.5.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#quiz"><i class="fa fa-check"></i><b>7.5.6</b> Quiz</a></li>
<li class="chapter" data-level="7.5.7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#data-structure-answers"><i class="fa fa-check"></i><b>7.5.7</b> Answers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>8</b> Subsetting</a><ul>
<li class="chapter" data-level="8.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-vectors"><i class="fa fa-check"></i><b>8.1</b> Subsetting Vectors</a><ul>
<li class="chapter" data-level="8.1.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-types"><i class="fa fa-check"></i><b>8.1.1</b> Subsetting Types</a></li>
<li class="chapter" data-level="8.1.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting"><i class="fa fa-check"></i><b>8.1.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.1.3" data-path="subsetting.html"><a href="subsetting.html#challenge-2"><i class="fa fa-check"></i><b>8.1.3</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="subsetting.html"><a href="subsetting.html#subsetting-lists"><i class="fa fa-check"></i><b>8.2</b> Subsetting Lists</a><ul>
<li class="chapter" data-level="8.2.1" data-path="subsetting.html"><a href="subsetting.html#with"><i class="fa fa-check"></i><b>8.2.1</b> With <code>[</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="subsetting.html"><a href="subsetting.html#with-1"><i class="fa fa-check"></i><b>8.2.2</b> With <code>[[</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="subsetting.html"><a href="subsetting.html#with-2"><i class="fa fa-check"></i><b>8.2.3</b> with <code>$</code></a></li>
<li class="chapter" data-level="8.2.4" data-path="subsetting.html"><a href="subsetting.html#challenge-3"><i class="fa fa-check"></i><b>8.2.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="subsetting.html"><a href="subsetting.html#subsetting-matrices"><i class="fa fa-check"></i><b>8.3</b> Subsetting Matrices</a></li>
<li class="chapter" data-level="8.4" data-path="subsetting.html"><a href="subsetting.html#subsetting-dataframes"><i class="fa fa-check"></i><b>8.4</b> Subsetting Dataframes</a><ul>
<li class="chapter" data-level="8.4.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-names-and"><i class="fa fa-check"></i><b>8.4.1</b> Subsetting Names and <code>$</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting-1"><i class="fa fa-check"></i><b>8.4.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.4.3" data-path="subsetting.html"><a href="subsetting.html#list-like-and-matrix-like-subsetting"><i class="fa fa-check"></i><b>8.4.3</b> List-Like and Matrix-Like Subsetting</a></li>
<li class="chapter" data-level="8.4.4" data-path="subsetting.html"><a href="subsetting.html#challenges-8"><i class="fa fa-check"></i><b>8.4.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="subsetting.html"><a href="subsetting.html#sub-assignment"><i class="fa fa-check"></i><b>8.5</b> Sub-assignment</a><ul>
<li class="chapter" data-level="8.5.1" data-path="subsetting.html"><a href="subsetting.html#basics-of-sub-assignment"><i class="fa fa-check"></i><b>8.5.1</b> Basics of Sub-assignment</a></li>
<li class="chapter" data-level="8.5.2" data-path="subsetting.html"><a href="subsetting.html#recycling"><i class="fa fa-check"></i><b>8.5.2</b> Recycling</a></li>
<li class="chapter" data-level="8.5.3" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>8.5.3</b> Applications</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="project-workflow.html"><a href="project-workflow.html"><i class="fa fa-check"></i><b>9</b> Project Workflow</a><ul>
<li class="chapter" data-level="9.1" data-path="project-workflow.html"><a href="project-workflow.html#organizing-code"><i class="fa fa-check"></i><b>9.1</b> Organizing Code</a><ul>
<li class="chapter" data-level="9.1.1" data-path="project-workflow.html"><a href="project-workflow.html#store-analyses-in-scripts-not-workspaces."><i class="fa fa-check"></i><b>9.1.1</b> Store Analyses in Scripts, Not Workspaces.</a></li>
<li class="chapter" data-level="9.1.2" data-path="project-workflow.html"><a href="project-workflow.html#working-directories-and-paths"><i class="fa fa-check"></i><b>9.1.2</b> Working Directories and Paths</a></li>
<li class="chapter" data-level="9.1.3" data-path="project-workflow.html"><a href="project-workflow.html#r-projects"><i class="fa fa-check"></i><b>9.1.3</b> R Projects</a></li>
<li class="chapter" data-level="9.1.4" data-path="project-workflow.html"><a href="project-workflow.html#file-organization"><i class="fa fa-check"></i><b>9.1.4</b> File Organization</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="project-workflow.html"><a href="project-workflow.html#importing-and-exporting"><i class="fa fa-check"></i><b>9.2</b> Importing and Exporting</a><ul>
<li class="chapter" data-level="9.2.1" data-path="project-workflow.html"><a href="project-workflow.html#wheres-my-data"><i class="fa fa-check"></i><b>9.2.1</b> Where's my data?</a></li>
<li class="chapter" data-level="9.2.2" data-path="project-workflow.html"><a href="project-workflow.html#data-storage"><i class="fa fa-check"></i><b>9.2.2</b> Data Storage</a></li>
<li class="chapter" data-level="9.2.3" data-path="project-workflow.html"><a href="project-workflow.html#importing-data"><i class="fa fa-check"></i><b>9.2.3</b> Importing Data</a></li>
<li class="chapter" data-level="9.2.4" data-path="project-workflow.html"><a href="project-workflow.html#exporting-data"><i class="fa fa-check"></i><b>9.2.4</b> Exporting Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>10</b> Data Transformation</a><ul>
<li class="chapter" data-level="10.1" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-data"><i class="fa fa-check"></i><b>10.1</b> Introduction to Data</a><ul>
<li class="chapter" data-level="10.1.1" data-path="data-transformation.html"><a href="data-transformation.html#the-gapminder-dataset"><i class="fa fa-check"></i><b>10.1.1</b> The Gapminder Dataset</a></li>
<li class="chapter" data-level="10.1.2" data-path="data-transformation.html"><a href="data-transformation.html#structure-and-dimensions"><i class="fa fa-check"></i><b>10.1.2</b> Structure and Dimensions</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-transformation.html"><a href="data-transformation.html#summary-statistics"><i class="fa fa-check"></i><b>10.1.3</b> Summary statistics</a></li>
<li class="chapter" data-level="10.1.4" data-path="data-transformation.html"><a href="data-transformation.html#challenges-9"><i class="fa fa-check"></i><b>10.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-transformation.html"><a href="data-transformation.html#introduction-to-tidyverse"><i class="fa fa-check"></i><b>10.2</b> Introduction to Tidyverse</a><ul>
<li class="chapter" data-level="10.2.1" data-path="data-transformation.html"><a href="data-transformation.html#tidyverse"><i class="fa fa-check"></i><b>10.2.1</b> <code>tidyverse</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="data-transformation.html"><a href="data-transformation.html#gapminder"><i class="fa fa-check"></i><b>10.2.2</b> Gapminder</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-transformation.html"><a href="data-transformation.html#why-dplyr"><i class="fa fa-check"></i><b>10.2.3</b> Why <code>dplyr</code>?</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-transformation.html"><a href="data-transformation.html#dplyr-functions"><i class="fa fa-check"></i><b>10.3</b> <code>dplyr</code> Functions</a><ul>
<li class="chapter" data-level="10.3.1" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>10.3.1</b> Select Columns with <code>select</code></a></li>
<li class="chapter" data-level="10.3.2" data-path="data-transformation.html"><a href="data-transformation.html#the-pipe"><i class="fa fa-check"></i><b>10.3.2</b> The Pipe</a></li>
<li class="chapter" data-level="10.3.3" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>10.3.3</b> Filter Rows with <code>filter</code></a></li>
<li class="chapter" data-level="10.3.4" data-path="data-transformation.html"><a href="data-transformation.html#calculate-across-groups-with-group_by"><i class="fa fa-check"></i><b>10.3.4</b> Calculate Across Groups with <code>group_by</code></a></li>
<li class="chapter" data-level="10.3.5" data-path="data-transformation.html"><a href="data-transformation.html#summarize-across-groups-with-summarize"><i class="fa fa-check"></i><b>10.3.5</b> Summarize Across Groups with <code>summarize</code></a></li>
<li class="chapter" data-level="10.3.6" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>10.3.6</b> Add New Variables with <code>mutate</code></a></li>
<li class="chapter" data-level="10.3.7" data-path="data-transformation.html"><a href="data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>10.3.7</b> Arrange Rows with <code>arrange</code></a></li>
<li class="chapter" data-level="10.3.8" data-path="data-transformation.html"><a href="data-transformation.html#count-variable-quantities-with-count"><i class="fa fa-check"></i><b>10.3.8</b> Count Variable Quantities with <code>count()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="data-transformation.html"><a href="data-transformation.html#challenges-10"><i class="fa fa-check"></i><b>10.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>11</b> Tidying Data</a><ul>
<li class="chapter" data-level="11.1" data-path="tidying-data.html"><a href="tidying-data.html#wide-vs.-long-formats"><i class="fa fa-check"></i><b>11.1</b> Wide vs. Long Formats</a></li>
<li class="chapter" data-level="11.2" data-path="tidying-data.html"><a href="tidying-data.html#tidying-the-gapminder-data"><i class="fa fa-check"></i><b>11.2</b> Tidying the Gapminder Data</a></li>
<li class="chapter" data-level="11.3" data-path="tidying-data.html"><a href="tidying-data.html#tidyr-functions"><i class="fa fa-check"></i><b>11.3</b> <code>tidyr</code> Functions</a><ul>
<li class="chapter" data-level="11.3.1" data-path="tidying-data.html"><a href="tidying-data.html#gather"><i class="fa fa-check"></i><b>11.3.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="11.3.2" data-path="tidying-data.html"><a href="tidying-data.html#separate"><i class="fa fa-check"></i><b>11.3.2</b> <code>separate</code></a></li>
<li class="chapter" data-level="11.3.3" data-path="tidying-data.html"><a href="tidying-data.html#spread"><i class="fa fa-check"></i><b>11.3.3</b> <code>spread</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="tidying-data.html"><a href="tidying-data.html#more-tidyverse"><i class="fa fa-check"></i><b>11.4</b> More <code>tidyverse</code></a></li>
<li class="chapter" data-level="11.5" data-path="tidying-data.html"><a href="tidying-data.html#challenges-11"><i class="fa fa-check"></i><b>11.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>12</b> Relational Data</a><ul>
<li class="chapter" data-level="12.1" data-path="relational-data.html"><a href="relational-data.html#why-relational-data"><i class="fa fa-check"></i><b>12.1</b> Why Relational Data</a></li>
<li class="chapter" data-level="12.2" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>12.2</b> Keys</a></li>
<li class="chapter" data-level="12.3" data-path="relational-data.html"><a href="relational-data.html#joins"><i class="fa fa-check"></i><b>12.3</b> Joins</a></li>
<li class="chapter" data-level="12.4" data-path="relational-data.html"><a href="relational-data.html#defining-keys"><i class="fa fa-check"></i><b>12.4</b> Defining Keys</a></li>
<li class="chapter" data-level="12.5" data-path="relational-data.html"><a href="relational-data.html#duplicate-keys"><i class="fa fa-check"></i><b>12.5</b> Duplicate Keys</a></li>
<li class="chapter" data-level="12.6" data-path="relational-data.html"><a href="relational-data.html#challenges-12"><i class="fa fa-check"></i><b>12.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>13</b> Plotting</a><ul>
<li class="chapter" data-level="13.1" data-path="plotting.html"><a href="plotting.html#the-dataset"><i class="fa fa-check"></i><b>13.1</b> The Dataset</a></li>
<li class="chapter" data-level="13.2" data-path="plotting.html"><a href="plotting.html#r-base-graphics"><i class="fa fa-check"></i><b>13.2</b> R Base Graphics</a><ul>
<li class="chapter" data-level="13.2.1" data-path="plotting.html"><a href="plotting.html#scatter-and-line-plots"><i class="fa fa-check"></i><b>13.2.1</b> Scatter and Line Plots</a></li>
<li class="chapter" data-level="13.2.2" data-path="plotting.html"><a href="plotting.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>13.2.2</b> Histograms and Density Plots</a></li>
<li class="chapter" data-level="13.2.3" data-path="plotting.html"><a href="plotting.html#labels"><i class="fa fa-check"></i><b>13.2.3</b> Labels</a></li>
<li class="chapter" data-level="13.2.4" data-path="plotting.html"><a href="plotting.html#axis-and-size-scaling"><i class="fa fa-check"></i><b>13.2.4</b> Axis and Size Scaling</a></li>
<li class="chapter" data-level="13.2.5" data-path="plotting.html"><a href="plotting.html#graphical-parameters"><i class="fa fa-check"></i><b>13.2.5</b> Graphical Parameters</a></li>
<li class="chapter" data-level="13.2.6" data-path="plotting.html"><a href="plotting.html#annotations-reference-lines-and-legends"><i class="fa fa-check"></i><b>13.2.6</b> Annotations, Reference Lines, and Legends</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="plotting.html"><a href="plotting.html#ggplot2"><i class="fa fa-check"></i><b>13.3</b> ggplot2</a><ul>
<li class="chapter" data-level="13.3.1" data-path="plotting.html"><a href="plotting.html#grammar"><i class="fa fa-check"></i><b>13.3.1</b> Grammar</a></li>
<li class="chapter" data-level="13.3.2" data-path="plotting.html"><a href="plotting.html#anatomy-of-aes"><i class="fa fa-check"></i><b>13.3.2</b> Anatomy of <code>aes</code></a></li>
<li class="chapter" data-level="13.3.3" data-path="plotting.html"><a href="plotting.html#layers"><i class="fa fa-check"></i><b>13.3.3</b> Layers</a></li>
<li class="chapter" data-level="13.3.4" data-path="plotting.html"><a href="plotting.html#labels-1"><i class="fa fa-check"></i><b>13.3.4</b> Labels</a></li>
<li class="chapter" data-level="13.3.5" data-path="plotting.html"><a href="plotting.html#transformations-and-stats"><i class="fa fa-check"></i><b>13.3.5</b> Transformations and Stats</a></li>
<li class="chapter" data-level="13.3.6" data-path="plotting.html"><a href="plotting.html#facets"><i class="fa fa-check"></i><b>13.3.6</b> Facets</a></li>
<li class="chapter" data-level="13.3.7" data-path="plotting.html"><a href="plotting.html#putting-everything-together"><i class="fa fa-check"></i><b>13.3.7</b> Putting Everything Together</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="plotting.html"><a href="plotting.html#saving-plots"><i class="fa fa-check"></i><b>13.4</b> Saving plots</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-inferences.html"><a href="statistical-inferences.html"><i class="fa fa-check"></i><b>14</b> Statistical Inferences</a><ul>
<li class="chapter" data-level="14.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-distributions"><i class="fa fa-check"></i><b>14.1</b> Statistical Distributions</a><ul>
<li class="chapter" data-level="14.1.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#sampling-and-simulation"><i class="fa fa-check"></i><b>14.1.1</b> Sampling and Simulation</a></li>
<li class="chapter" data-level="14.1.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#random-seeds"><i class="fa fa-check"></i><b>14.1.2</b> Random Seeds</a></li>
<li class="chapter" data-level="14.1.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-13"><i class="fa fa-check"></i><b>14.1.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#inferences-and-regressions"><i class="fa fa-check"></i><b>14.2</b> Inferences and Regressions</a><ul>
<li class="chapter" data-level="14.2.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-tests"><i class="fa fa-check"></i><b>14.2.1</b> Statistical Tests</a></li>
<li class="chapter" data-level="14.2.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regressions-and-linear-models"><i class="fa fa-check"></i><b>14.2.2</b> Regressions and Linear Models</a></li>
<li class="chapter" data-level="14.2.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regression-output"><i class="fa fa-check"></i><b>14.2.3</b> Regression Output</a></li>
<li class="chapter" data-level="14.2.4" data-path="statistical-inferences.html"><a href="statistical-inferences.html#interactions"><i class="fa fa-check"></i><b>14.2.4</b> Interactions</a></li>
<li class="chapter" data-level="14.2.5" data-path="statistical-inferences.html"><a href="statistical-inferences.html#formatting-regression-tables"><i class="fa fa-check"></i><b>14.2.5</b> Formatting Regression Tables</a></li>
<li class="chapter" data-level="14.2.6" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-14"><i class="fa fa-check"></i><b>14.2.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>15</b> Strings and Regular Expressions</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-basics"><i class="fa fa-check"></i><b>15.1</b> String Basics</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#creating-strings"><i class="fa fa-check"></i><b>15.1.1</b> Creating Strings</a></li>
<li class="chapter" data-level="15.1.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-and-special-characters"><i class="fa fa-check"></i><b>15.1.2</b> Escape and Special Characters</a></li>
<li class="chapter" data-level="15.1.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-length"><i class="fa fa-check"></i><b>15.1.3</b> String length</a></li>
<li class="chapter" data-level="15.1.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#combining-strings"><i class="fa fa-check"></i><b>15.1.4</b> Combining strings</a></li>
<li class="chapter" data-level="15.1.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#subsetting-strings"><i class="fa fa-check"></i><b>15.1.5</b> Subsetting strings</a></li>
<li class="chapter" data-level="15.1.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#locales"><i class="fa fa-check"></i><b>15.1.6</b> Locales</a></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-15"><i class="fa fa-check"></i>Challenges</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>15.2</b> Regular expressions</a><ul>
<li class="chapter" data-level="15.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#basic-matches"><i class="fa fa-check"></i><b>15.2.1</b> Basic matches</a></li>
<li class="chapter" data-level="15.2.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-characters"><i class="fa fa-check"></i><b>15.2.2</b> Escape Characters</a></li>
<li class="chapter" data-level="15.2.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>15.2.3</b> Anchors</a></li>
<li class="chapter" data-level="15.2.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>15.2.4</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="15.2.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#repetition"><i class="fa fa-check"></i><b>15.2.5</b> Repetition</a></li>
<li class="chapter" data-level="15.2.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regex-resources"><i class="fa fa-check"></i><b>15.2.6</b> Regex Resources</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#common-tools"><i class="fa fa-check"></i><b>15.3</b> Common Tools</a><ul>
<li class="chapter" data-level="15.3.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#detect-matches"><i class="fa fa-check"></i><b>15.3.1</b> Detect matches</a></li>
<li class="chapter" data-level="15.3.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extract-matches"><i class="fa fa-check"></i><b>15.3.2</b> Extract matches</a></li>
<li class="chapter" data-level="15.3.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-matches"><i class="fa fa-check"></i><b>15.3.3</b> Replacing matches</a></li>
<li class="chapter" data-level="15.3.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting"><i class="fa fa-check"></i><b>15.3.4</b> Splitting</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#other-types-of-patterns"><i class="fa fa-check"></i><b>15.4</b> Other types of patterns</a><ul>
<li class="chapter" data-level="15.4.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#stringi"><i class="fa fa-check"></i><b>15.4.1</b> stringi</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#acknowledgments-3"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>16</b> Programming in R</a><ul>
<li class="chapter" data-level="16.1" data-path="programming-in-r.html"><a href="programming-in-r.html#conditional-flow"><i class="fa fa-check"></i><b>16.1</b> Conditional Flow</a><ul>
<li class="chapter" data-level="16.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#multiple-conditions"><i class="fa fa-check"></i><b>16.1.1</b> Multiple Conditions</a></li>
<li class="chapter" data-level="16.1.2" data-path="programming-in-r.html"><a href="programming-in-r.html#complex-statements"><i class="fa fa-check"></i><b>16.1.2</b> Complex Statements</a></li>
<li class="chapter" data-level="16.1.3" data-path="programming-in-r.html"><a href="programming-in-r.html#code-style"><i class="fa fa-check"></i><b>16.1.3</b> Code Style</a></li>
<li class="chapter" data-level="16.1.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-vs.-if_else"><i class="fa fa-check"></i><b>16.1.4</b> <code>if</code> vs. <code>if_else</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="programming-in-r.html"><a href="programming-in-r.html#functions-1"><i class="fa fa-check"></i><b>16.2</b> Functions</a><ul>
<li class="chapter" data-level="16.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#why-write-functions"><i class="fa fa-check"></i><b>16.2.1</b> Why Write Functions?</a></li>
<li class="chapter" data-level="16.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>16.2.2</b> Anatomy of a Function</a></li>
<li class="chapter" data-level="16.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-a-function"><i class="fa fa-check"></i><b>16.2.3</b> Writing a Function</a></li>
<li class="chapter" data-level="16.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#using-a-function"><i class="fa fa-check"></i><b>16.2.4</b> Using a Function</a></li>
<li class="chapter" data-level="16.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#variable-scope"><i class="fa fa-check"></i><b>16.2.5</b> Variable Scope</a></li>
<li class="chapter" data-level="16.2.6" data-path="programming-in-r.html"><a href="programming-in-r.html#arguments-1"><i class="fa fa-check"></i><b>16.2.6</b> Arguments</a></li>
<li class="chapter" data-level="16.2.7" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-21"><i class="fa fa-check"></i><b>16.2.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="programming-in-r.html"><a href="programming-in-r.html#iteration"><i class="fa fa-check"></i><b>16.3</b> Iteration</a><ul>
<li class="chapter" data-level="16.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#vectorized-functions"><i class="fa fa-check"></i><b>16.3.1</b> Vectorized Functions</a></li>
<li class="chapter" data-level="16.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loops"><i class="fa fa-check"></i><b>16.3.2</b> For-loops</a></li>
<li class="chapter" data-level="16.3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-22"><i class="fa fa-check"></i><b>16.3.3</b> Challenges</a></li>
<li class="chapter" data-level="16.3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#functional-programming-and-map"><i class="fa fa-check"></i><b>16.3.4</b> Functional Programming and <code>map</code></a></li>
<li class="chapter" data-level="16.3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-23"><i class="fa fa-check"></i><b>16.3.5</b> Challenges</a></li>
<li class="chapter" data-level="16.3.6" data-path="programming-in-r.html"><a href="programming-in-r.html#scoped-verbs"><i class="fa fa-check"></i><b>16.3.6</b> Scoped Verbs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html"><i class="fa fa-check"></i><b>17</b> Collecting Data from the Web</a><ul>
<li class="chapter" data-level="17.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#introduction-1"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#web-apis"><i class="fa fa-check"></i><b>17.2</b> Web APIs</a><ul>
<li class="chapter" data-level="17.2.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#some-basic-terminology"><i class="fa fa-check"></i><b>17.2.1</b> Some Basic Terminology</a></li>
<li class="chapter" data-level="17.2.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#how-do-get-requests-work"><i class="fa fa-check"></i><b>17.2.2</b> How Do GET Requests Work?</a></li>
<li class="chapter" data-level="17.2.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-apis"><i class="fa fa-check"></i><b>17.2.3</b> Finding APIs</a></li>
<li class="chapter" data-level="17.2.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#getting-api-access"><i class="fa fa-check"></i><b>17.2.4</b> Getting API Access</a></li>
<li class="chapter" data-level="17.2.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-apis-in-r"><i class="fa fa-check"></i><b>17.2.5</b> Using APIs in R</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#collecting-twitter-data-with-rtweet"><i class="fa fa-check"></i><b>17.3</b> Collecting Twitter Data with RTweet</a><ul>
<li class="chapter" data-level="17.3.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#setting-up-rtweet"><i class="fa fa-check"></i><b>17.3.1</b> Setting up <code>RTweet</code></a></li>
<li class="chapter" data-level="17.3.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#uchicago-political-science-prof-tweets"><i class="fa fa-check"></i><b>17.3.2</b> UChicago Political Science Prof Tweets</a></li>
<li class="chapter" data-level="17.3.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#hashtags-and-text-strings"><i class="fa fa-check"></i><b>17.3.3</b> Hashtags and Text Strings</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#writing-api-queries"><i class="fa fa-check"></i><b>17.4</b> Writing API Queries</a><ul>
<li class="chapter" data-level="17.4.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#constructing-the-api-get-request"><i class="fa fa-check"></i><b>17.4.1</b> Constructing the API GET Request</a></li>
<li class="chapter" data-level="17.4.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#parsing-the-response"><i class="fa fa-check"></i><b>17.4.2</b> Parsing the response</a></li>
<li class="chapter" data-level="17.4.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#iteration-through-results-pager"><i class="fa fa-check"></i><b>17.4.3</b> Iteration through results pager</a></li>
<li class="chapter" data-level="17.4.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#visualizing-results"><i class="fa fa-check"></i><b>17.4.4</b> Visualizing Results</a></li>
<li class="chapter" data-level="17.4.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#more-resources-1"><i class="fa fa-check"></i><b>17.4.5</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#webscraping"><i class="fa fa-check"></i><b>17.5</b> Webscraping</a><ul>
<li class="chapter" data-level="17.5.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#whats-a-website"><i class="fa fa-check"></i><b>17.5.1</b> What's a website?</a></li>
<li class="chapter" data-level="17.5.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#html"><i class="fa fa-check"></i><b>17.5.2</b> HTML</a></li>
<li class="chapter" data-level="17.5.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#css"><i class="fa fa-check"></i><b>17.5.3</b> CSS</a></li>
<li class="chapter" data-level="17.5.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-elements-with-selector-gadget"><i class="fa fa-check"></i><b>17.5.4</b> Finding Elements with Selector Gadget</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#scraping-presidential-statements"><i class="fa fa-check"></i><b>17.6</b> Scraping Presidential Statements</a><ul>
<li class="chapter" data-level="17.6.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-rvest-to-read-html"><i class="fa fa-check"></i><b>17.6.1</b> Using <code>RVest</code> to Read HTML</a></li>
<li class="chapter" data-level="17.6.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#find-page-elements"><i class="fa fa-check"></i><b>17.6.2</b> Find Page Elements</a></li>
<li class="chapter" data-level="17.6.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#get-attributes-and-text-of-elements"><i class="fa fa-check"></i><b>17.6.3</b> Get Attributes and Text of Elements</a></li>
<li class="chapter" data-level="17.6.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#lets-do-this."><i class="fa fa-check"></i><b>17.6.4</b> Let's DO this.</a></li>
<li class="chapter" data-level="17.6.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#challenge-1-make-a-function"><i class="fa fa-check"></i><b>17.6.5</b> Challenge 1: Make a function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>18</b> Text Analysis</a><ul>
<li class="chapter" data-level="18.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing"><i class="fa fa-check"></i><b>18.1</b> Preprocessing</a><ul>
<li class="chapter" data-level="18.1.1" data-path="text-analysis.html"><a href="text-analysis.html#from-words-to-numbers"><i class="fa fa-check"></i><b>18.1.1</b> From Words to Numbers</a></li>
<li class="chapter" data-level="18.1.2" data-path="text-analysis.html"><a href="text-analysis.html#exploring-the-dtm"><i class="fa fa-check"></i><b>18.1.2</b> Exploring the DTM</a></li>
<li class="chapter" data-level="18.1.3" data-path="text-analysis.html"><a href="text-analysis.html#exporting-the-dtm"><i class="fa fa-check"></i><b>18.1.3</b> Exporting the DTM</a></li>
<li class="chapter" data-level="18.1.4" data-path="text-analysis.html"><a href="text-analysis.html#challenges-24"><i class="fa fa-check"></i><b>18.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis-and-dictionary-methods"><i class="fa fa-check"></i><b>18.2</b> Sentiment Analysis and Dictionary Methods</a><ul>
<li class="chapter" data-level="18.2.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-and-setup"><i class="fa fa-check"></i><b>18.2.1</b> Preprocessing and Setup</a></li>
<li class="chapter" data-level="18.2.2" data-path="text-analysis.html"><a href="text-analysis.html#scoring-the-songs"><i class="fa fa-check"></i><b>18.2.2</b> Scoring the songs</a></li>
<li class="chapter" data-level="18.2.3" data-path="text-analysis.html"><a href="text-analysis.html#challenges-25"><i class="fa fa-check"></i><b>18.2.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="text-analysis.html"><a href="text-analysis.html#distinctive-words"><i class="fa fa-check"></i><b>18.3</b> Distinctive Words</a><ul>
<li class="chapter" data-level="18.3.1" data-path="text-analysis.html"><a href="text-analysis.html#unique-usage"><i class="fa fa-check"></i><b>18.3.1</b> Unique usage</a></li>
<li class="chapter" data-level="18.3.2" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-frequences"><i class="fa fa-check"></i><b>18.3.2</b> Differences in frequences</a></li>
<li class="chapter" data-level="18.3.3" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-averages"><i class="fa fa-check"></i><b>18.3.3</b> Differences in averages</a></li>
<li class="chapter" data-level="18.3.4" data-path="text-analysis.html"><a href="text-analysis.html#difference-in-averages-adjustment"><i class="fa fa-check"></i><b>18.3.4</b> Difference in averages, adjustment</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="text-analysis.html"><a href="text-analysis.html#structural-topic-models"><i class="fa fa-check"></i><b>18.4</b> Structural Topic Models</a><ul>
<li class="chapter" data-level="18.4.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-1"><i class="fa fa-check"></i><b>18.4.1</b> Preprocessing</a></li>
<li class="chapter" data-level="18.4.2" data-path="text-analysis.html"><a href="text-analysis.html#estimate-model"><i class="fa fa-check"></i><b>18.4.2</b> Estimate Model</a></li>
<li class="chapter" data-level="18.4.3" data-path="text-analysis.html"><a href="text-analysis.html#interprete-model"><i class="fa fa-check"></i><b>18.4.3</b> Interprete Model</a></li>
<li class="chapter" data-level="18.4.4" data-path="text-analysis.html"><a href="text-analysis.html#analyze-topics"><i class="fa fa-check"></i><b>18.4.4</b> Analyze topics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>19</b> Git and Github</a><ul>
<li class="chapter" data-level="19.1" data-path="git-and-github.html"><a href="git-and-github.html#starting-with-git"><i class="fa fa-check"></i><b>19.1</b> Starting with Git</a><ul>
<li class="chapter" data-level="19.1.1" data-path="git-and-github.html"><a href="git-and-github.html#creating-a-repository"><i class="fa fa-check"></i><b>19.1.1</b> Creating a repository</a></li>
<li class="chapter" data-level="19.1.2" data-path="git-and-github.html"><a href="git-and-github.html#git-add-tracks-files"><i class="fa fa-check"></i><b>19.1.2</b> <code>git add</code>: tracks files</a></li>
<li class="chapter" data-level="19.1.3" data-path="git-and-github.html"><a href="git-and-github.html#git-commit-saves-files"><i class="fa fa-check"></i><b>19.1.3</b> <code>git commit</code>: saves files</a></li>
<li class="chapter" data-level="19.1.4" data-path="git-and-github.html"><a href="git-and-github.html#git-push-moves-changes-from-one-branch-to-another."><i class="fa fa-check"></i><b>19.1.4</b> <code>git push</code>: moves changes from one branch to another.</a></li>
<li class="chapter" data-level="19.1.5" data-path="git-and-github.html"><a href="git-and-github.html#challenge-1-5"><i class="fa fa-check"></i><b>19.1.5</b> Challenge 1</a></li>
<li class="chapter" data-level="19.1.6" data-path="git-and-github.html"><a href="git-and-github.html#ignoring-things"><i class="fa fa-check"></i><b>19.1.6</b> Ignoring Things</a></li>
<li class="chapter" data-level="19.1.7" data-path="git-and-github.html"><a href="git-and-github.html#challenge-2-5"><i class="fa fa-check"></i><b>19.1.7</b> Challenge 2</a></li>
<li class="chapter" data-level="19.1.8" data-path="git-and-github.html"><a href="git-and-github.html#pulling-syncing"><i class="fa fa-check"></i><b>19.1.8</b> Pulling / Syncing</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="git-and-github.html"><a href="git-and-github.html#collaborating"><i class="fa fa-check"></i><b>19.2</b> Collaborating</a><ul>
<li class="chapter" data-level="19.2.1" data-path="git-and-github.html"><a href="git-and-github.html#fork-pull-model"><i class="fa fa-check"></i><b>19.2.1</b> Fork &amp; Pull Model</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PLSC 31101: Computational Tools for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="text-analysis" class="section level1">
<h1><span class="header-section-number">Chapter 18</span> Text Analysis</h1>
<p>This unit focuses on computational text analysis (or &quot;text-as-data&quot;). We'll explore:</p>
<ol style="list-style-type: decimal">
<li><strong><a href="text-analysis.html#preprocessing-1">Preprocessing</a></strong> a corpus for common text analysis.</li>
<li><strong><a href="text-analysis.html#sentiment-analysis-and-dictionary-methods">Sentiment Analysis and Dictionary Methods</a></strong>, a simple, supervised method for classification.</li>
<li><strong><a href="text-analysis.html#distinctive-words">Distinctive Words</a></strong>, or word-separating techniques to compare corpora.</li>
<li><strong><a href="text-analysis.html#structural-topic-models">Structural Topic Models</a></strong>, a popular unsupervised method for text exploration and analysis.</li>
</ol>
<p>These materials are based off a longer, week-long intensive workshop on computational text analysis. If you're interested in text-as-data, I would encourage you to work through these materials on your own: <a href="https://github.com/rochelleterman/FSUtext" class="uri">https://github.com/rochelleterman/FSUtext</a></p>
<div id="preprocessing" class="section level2">
<h2><span class="header-section-number">18.1</span> Preprocessing</h2>
<p>First let's load our required packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tm) <span class="co"># Framework for text mining</span>
<span class="kw">library</span>(tidyverse) <span class="co"># Data preparation and pipes $&gt;$</span>
<span class="kw">library</span>(ggplot2) <span class="co"># for plotting word frequencies</span>
<span class="kw">library</span>(wordcloud) <span class="co"># wordclouds!</span></code></pre></div>
<p>A <strong>corpus</strong> is a collection of texts, usually stored electronically, and from which we perform our analysis. A corpus might be a collection of news articles from Reuters or the published works of Shakespeare.</p>
<p>Within each corpus we will have separate articles, stories, volumes, each treated as a separate entity or record. Each unit is called a <strong>document.</strong></p>
<p>For this unit, we will be using a section of Machiavelli's Prince as our corpus. Since The Prince is a monograph, we have already &quot;chunked&quot; the text, so that each short paragraph or &quot;chunk&quot; is considered a &quot;document.&quot;</p>
<div id="from-words-to-numbers" class="section level3">
<h3><span class="header-section-number">18.1.1</span> From Words to Numbers</h3>
<div id="corpus-readers" class="section level4 unnumbered">
<h4>Corpus Readers</h4>
<p>The <code>tm</code> package supports a variety of sources and formats. Run the code below to see what it includes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getSources</span>()
<span class="co">#&gt; [1] &quot;DataframeSource&quot; &quot;DirSource&quot;       &quot;URISource&quot;       &quot;VectorSource&quot;   </span>
<span class="co">#&gt; [5] &quot;XMLSource&quot;       &quot;ZipSource&quot;</span>
<span class="kw">getReaders</span>()
<span class="co">#&gt;  [1] &quot;readDataframe&quot;           &quot;readDOC&quot;                </span>
<span class="co">#&gt;  [3] &quot;readPDF&quot;                 &quot;readPlain&quot;              </span>
<span class="co">#&gt;  [5] &quot;readRCV1&quot;                &quot;readRCV1asPlain&quot;        </span>
<span class="co">#&gt;  [7] &quot;readReut21578XML&quot;        &quot;readReut21578XMLasPlain&quot;</span>
<span class="co">#&gt;  [9] &quot;readTagged&quot;              &quot;readXML&quot;</span></code></pre></div>
<p>Here we'll be reading documents from a csv file. Each row being a document, and columns for text and metadata (information about each document). This is the easiest option if you have metadata.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">docs.df &lt;-<span class="kw">read.csv</span>(<span class="st">&quot;data/mach.csv&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>) <span class="co">#read in CSV file</span>
<span class="co"># docs.df$text &lt;- Encoding(&quot;UTF-8&quot;)</span>
docs &lt;-<span class="st"> </span><span class="kw">Corpus</span>(<span class="kw">VectorSource</span>(docs.df<span class="op">$</span>text))
docs
<span class="co">#&gt; &lt;&lt;SimpleCorpus&gt;&gt;</span>
<span class="co">#&gt; Metadata:  corpus specific: 1, document level (indexed): 0</span>
<span class="co">#&gt; Content:  documents: 188</span></code></pre></div>
<p>Once we have the corpus, we can inspect the documents using inspect()</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># see the 16th document</span>
<span class="kw">inspect</span>(docs[<span class="dv">16</span>])
<span class="co">#&gt; &lt;&lt;SimpleCorpus&gt;&gt;</span>
<span class="co">#&gt; Metadata:  corpus specific: 1, document level (indexed): 0</span>
<span class="co">#&gt; Content:  documents: 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [1]  Therefore, since a ruler cannot both practise this virtue of generosity and be known to do so without harming himself, he would do well not to worry about being called miserly. For eventually he will come to be considered more generous, when it is realised that, because of his parsimony, his revenues are sufficient to defend himself against any enemies that attack him, and to undertake campaigns without imposing special taxes on the people. Thus he will be acting generously towards the vast majority, whose property he does not touch, and will be acting meanly towards the few to whom he gives nothing.  Those rulers who have achieved great things in our own times have all been considered mean; all the others have failed. Although Pope Julius II cultivated a reputation for generosity in order to become pope, he did not seek to maintain it afterwards, because he wanted to be</span></code></pre></div>
</div>
<div id="preprocessing-functions" class="section level4 unnumbered">
<h4>Preprocessing functions</h4>
<p>Many text analysis applications follow a similar 'recipe' for preprecessing, involving (the order of these steps might differ as per application):</p>
<ol style="list-style-type: decimal">
<li>Tokenizing the text to unigrams (or bigrams, or trigrams)</li>
<li>Converting all characters to lowercase</li>
<li>Removing punctuation</li>
<li>Removing numbers</li>
<li>Removing Stop Words, inclugind custom stop words</li>
<li>&quot;Stemming&quot; words, or lemmitization. There are several stemming alogrithms. Porter is the most popular.</li>
<li>Creating a Document-Term Matrix</li>
</ol>
<p><code>tm</code> lets us convert a corpus to a DTM while completing the pre-processing steps in one step.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dtm &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(docs,
           <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">stopwords =</span> <span class="ot">TRUE</span>,
                          <span class="dt">tolower =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removeNumbers =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removePunctuation =</span> <span class="ot">TRUE</span>,
                          <span class="dt">stemming=</span><span class="ot">TRUE</span>))</code></pre></div>
</div>
<div id="weighting" class="section level4 unnumbered">
<h4>Weighting</h4>
<p>One common pre-processing step that some applicaitons may call for is applying tf-idf weights. The <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">tf-idf</a>, or term frequency-inverse document frequency, is a weight that ranks the importance of a term in its contextual document corpus. The tf-idf value increases proportionally to the number of times a word appears in the document, but is offset by the frequency of the word in the corpus, which helps to adjust for the fact that some words appear more frequently in general. In other words, it places importance on terms frequent in the document but rare in the corpus.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dtm.weighted &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(docs,
           <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">weighting =</span><span class="cf">function</span>(x) <span class="kw">weightTfIdf</span>(x, <span class="dt">normalize =</span> <span class="ot">TRUE</span>),
                          <span class="dt">stopwords =</span> <span class="ot">TRUE</span>,
                          <span class="dt">tolower =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removeNumbers =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removePunctuation =</span> <span class="ot">TRUE</span>,
                          <span class="dt">stemming=</span><span class="ot">TRUE</span>))</code></pre></div>
<p>Compare first 5 rows and 5 columns of the <code>dtm</code> and <code>dtm.weighted</code>. What do you notice?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">inspect</span>(dtm[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 5, terms: 5)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 3/22</span>
<span class="co">#&gt; Sparsity           : 88%</span>
<span class="co">#&gt; Maximal term length: 7</span>
<span class="co">#&gt; Weighting          : term frequency (tf)</span>
<span class="co">#&gt; Sample             :</span>
<span class="co">#&gt;     Terms</span>
<span class="co">#&gt; Docs abandon abil abject abl ablest</span>
<span class="co">#&gt;    1       0    0      0   0      0</span>
<span class="co">#&gt;    2       0    1      0   0      0</span>
<span class="co">#&gt;    3       0    0      0   0      0</span>
<span class="co">#&gt;    4       0    1      0   1      0</span>
<span class="co">#&gt;    5       0    0      0   0      0</span>
<span class="kw">inspect</span>(dtm.weighted[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 5, terms: 5)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 3/22</span>
<span class="co">#&gt; Sparsity           : 88%</span>
<span class="co">#&gt; Maximal term length: 7</span>
<span class="co">#&gt; Weighting          : term frequency - inverse document frequency (normalized) (tf-idf)</span>
<span class="co">#&gt; Sample             :</span>
<span class="co">#&gt;     Terms</span>
<span class="co">#&gt; Docs abandon   abil abject    abl ablest</span>
<span class="co">#&gt;    1       0 0.0000      0 0.0000      0</span>
<span class="co">#&gt;    2       0 0.0402      0 0.0000      0</span>
<span class="co">#&gt;    3       0 0.0000      0 0.0000      0</span>
<span class="co">#&gt;    4       0 0.0310      0 0.0228      0</span>
<span class="co">#&gt;    5       0 0.0000      0 0.0000      0</span></code></pre></div>
</div>
</div>
<div id="exploring-the-dtm" class="section level3">
<h3><span class="header-section-number">18.1.2</span> Exploring the DTM</h3>
<div id="dimensions" class="section level4 unnumbered">
<h4>Dimensions</h4>
<p>Let's look at the structure of our DTM. Print the dimensions of the DTM. How many documents do we have? How many terms?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># how many documents? how many terms?</span>
<span class="kw">dim</span>(dtm)
<span class="co">#&gt; [1]  188 2368</span></code></pre></div>
</div>
<div id="frequencies" class="section level4 unnumbered">
<h4>Frequencies</h4>
<p>We can obtain the term frequencies as a vector by converting the document term matrix into a matrix and using <code>colSums</code> to sum the column counts:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="co"># how many terms?</span>
freq &lt;-<span class="st"> </span><span class="kw">colSums</span>(<span class="kw">as.matrix</span>(dtm))
freq[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt; abandon    abil  abject     abl  ablest </span>
<span class="co">#&gt;       4      35       1      61       1</span>
<span class="kw">length</span>(freq)
<span class="co">#&gt; [1] 2368</span></code></pre></div>
<p>By ordering the frequencies we can list the most frequent terms and the least frequent terms.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># order</span>
sorted &lt;-<span class="st"> </span><span class="kw">sort</span>(freq, <span class="dt">decreasing =</span> T)

<span class="co"># Least frequent terms</span>
<span class="kw">head</span>(sorted)
<span class="co">#&gt; ruler  will power   one peopl alway </span>
<span class="co">#&gt;   280   251   169   168    98    95</span>

<span class="co"># most frequent</span>
<span class="kw">tail</span>(sorted)
<span class="co">#&gt;  xxiv   xxv  xxvi yield  yoke youth </span>
<span class="co">#&gt;     1     1     1     1     1     1</span></code></pre></div>
</div>
<div id="plotting-frequencies" class="section level4 unnumbered">
<h4>Plotting frequencies</h4>
<p>Let's make a plot that shows the frequency of frequencies for the terms. (For example, how many words are used only once? 5 times? 10 times?)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># frequency of frenquencies</span>
<span class="kw">head</span>(<span class="kw">table</span>(freq),<span class="dv">15</span>)
<span class="co">#&gt; freq</span>
<span class="co">#&gt;   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15 </span>
<span class="co">#&gt; 988 363 202 140 103  73  55  39  33  29  24  22  20  20  19</span>
<span class="kw">tail</span>(<span class="kw">table</span>(freq),<span class="dv">15</span>)
<span class="co">#&gt; freq</span>
<span class="co">#&gt;  65  68  70  71  73  74  75  76  77  95  98 168 169 251 280 </span>
<span class="co">#&gt;   1   1   1   1   2   1   1   1   1   2   1   1   1   1   1</span>

<span class="co"># plot</span>
<span class="kw">plot</span>(<span class="kw">table</span>(freq))</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-500-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>What does this tell us about the nature of language?</p>
<p>We can reorder columns of DTM to show most frequent terms first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dtm.ordered &lt;-<span class="st"> </span>dtm[,<span class="kw">order</span>(freq, <span class="dt">decreasing =</span> T)]
<span class="kw">inspect</span>(dtm.ordered[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 5, terms: 5)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 10/15</span>
<span class="co">#&gt; Sparsity           : 60%</span>
<span class="co">#&gt; Maximal term length: 5</span>
<span class="co">#&gt; Weighting          : term frequency (tf)</span>
<span class="co">#&gt; Sample             :</span>
<span class="co">#&gt;     Terms</span>
<span class="co">#&gt; Docs one peopl power ruler will</span>
<span class="co">#&gt;    1   0     0     0     1    1</span>
<span class="co">#&gt;    2   3     0     0     1    3</span>
<span class="co">#&gt;    3   0     0     0     0    0</span>
<span class="co">#&gt;    4   0     0     0     1    1</span>
<span class="co">#&gt;    5   3     0     0     1    1</span></code></pre></div>
</div>
<div id="exploring-common-words" class="section level4 unnumbered">
<h4>Exploring common words</h4>
<p>The TM package has lots of useful functions to help you explore common words and associations:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Have a look at common words</span>
<span class="kw">findFreqTerms</span>(dtm, <span class="dt">lowfreq=</span><span class="dv">50</span>) <span class="co"># words that appear at least 100 times</span>
<span class="co">#&gt;  [1] &quot;abl&quot;      &quot;act&quot;      &quot;alway&quot;    &quot;armi&quot;     &quot;becom&quot;    &quot;can&quot;     </span>
<span class="co">#&gt;  [7] &quot;consid&quot;   &quot;either&quot;   &quot;forc&quot;     &quot;great&quot;    &quot;king&quot;     &quot;maintain&quot;</span>
<span class="co">#&gt; [13] &quot;make&quot;     &quot;man&quot;      &quot;mani&quot;     &quot;men&quot;      &quot;much&quot;     &quot;must&quot;    </span>
<span class="co">#&gt; [19] &quot;never&quot;    &quot;new&quot;      &quot;one&quot;      &quot;order&quot;    &quot;other&quot;    &quot;peopl&quot;   </span>
<span class="co">#&gt; [25] &quot;power&quot;    &quot;reason&quot;   &quot;ruler&quot;    &quot;sinc&quot;     &quot;state&quot;    &quot;subject&quot; </span>
<span class="co">#&gt; [31] &quot;time&quot;     &quot;troop&quot;    &quot;use&quot;      &quot;want&quot;     &quot;way&quot;      &quot;well&quot;    </span>
<span class="co">#&gt; [37] &quot;will&quot;</span>

<span class="co"># Which words correlate with &quot;war&quot;?</span>
<span class="kw">findAssocs</span>(dtm, <span class="st">&quot;war&quot;</span>, <span class="fl">0.3</span>)
<span class="co">#&gt; $war</span>
<span class="co">#&gt;     wage    fight  antioch     argu     brew    induc      lip    maxim </span>
<span class="co">#&gt;     0.73     0.52     0.45     0.45     0.45     0.45     0.45     0.45 </span>
<span class="co">#&gt;  relianc     sage    trifl  postpon     mere     evil    avoid     flee </span>
<span class="co">#&gt;     0.45     0.45     0.45     0.41     0.35     0.34     0.32     0.32 </span>
<span class="co">#&gt;   occupi     glad glorious    heard     hunt ineffect     knew   produc </span>
<span class="co">#&gt;     0.32     0.30     0.30     0.30     0.30     0.30     0.30     0.30 </span>
<span class="co">#&gt; temporis </span>
<span class="co">#&gt;     0.30</span></code></pre></div>
<p>We can even make wordclouds showing the most commons terms:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># wordcoulds!</span>
<span class="kw">set.seed</span>(<span class="dv">123</span>)
<span class="kw">wordcloud</span>(<span class="kw">names</span>(sorted), sorted, <span class="dt">max.words=</span><span class="dv">100</span>, <span class="dt">colors=</span><span class="kw">brewer.pal</span>(<span class="dv">6</span>,<span class="st">&quot;Dark2&quot;</span>))</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-503-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="remove-sparse-terms" class="section level4 unnumbered">
<h4>Remove sparse terms</h4>
<p>Somtimes we want to remove sparse terms and thus inrease efficency. Look up the help file for the function <code>removeSparseTerms</code>. Using this function, create an objected called <code>dtm.s</code> that contains only terms with &lt;.9 sparsity (meaning they appear in more than 10% of documents).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dtm.s &lt;-<span class="st"> </span><span class="kw">removeSparseTerms</span>(dtm,.<span class="dv">9</span>)
dtm <span class="co"># 2365 terms</span>
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 188, terms: 2368)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 11754/433430</span>
<span class="co">#&gt; Sparsity           : 97%</span>
<span class="co">#&gt; Maximal term length: 15</span>
<span class="co">#&gt; Weighting          : term frequency (tf)</span>
dtm.s <span class="co"># 135 terms</span>
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 188, terms: 136)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 4353/21215</span>
<span class="co">#&gt; Sparsity           : 83%</span>
<span class="co">#&gt; Maximal term length: 12</span>
<span class="co">#&gt; Weighting          : term frequency (tf)</span></code></pre></div>
</div>
</div>
<div id="exporting-the-dtm" class="section level3">
<h3><span class="header-section-number">18.1.3</span> Exporting the DTM</h3>
<p>We can convert a DTM to a matrix or data.frame in order to write to a csv, add meta data, etc.</p>
<p>First create an object that converts the <code>dtm</code> to a dataframe (we first have to convert to matrix, and then to dataframe)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># coerce into dataframe</span>
dtm &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">as.matrix</span>(dtm))
<span class="kw">names</span>(dtm)[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]  <span class="co"># names of documents</span>
<span class="co">#&gt;  [1] &quot;abandon&quot;   &quot;abil&quot;      &quot;abject&quot;    &quot;abl&quot;       &quot;ablest&quot;    &quot;abovement&quot;</span>
<span class="co">#&gt;  [7] &quot;abovenam&quot;  &quot;absolut&quot;   &quot;absorb&quot;    &quot;accept&quot;</span></code></pre></div>
<p>Now add a column called <code>doc_section</code>. For the first 100 rows, the value of this column should be &quot;Section 1&quot;. For documents 101-188, the section should be &quot;Section 2&quot;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add fake column for section</span>
dtm<span class="op">$</span>doc_section &lt;-<span class="st"> &quot;NA&quot;</span>
dtm<span class="op">$</span>doc_section[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>] &lt;-<span class="st"> &quot;Section 1&quot;</span>
dtm<span class="op">$</span>doc_section[<span class="dv">101</span><span class="op">:</span><span class="dv">188</span>] &lt;-<span class="st"> &quot;Section 2&quot;</span>
dtm<span class="op">$</span>doc_section &lt;-<span class="st"> </span><span class="kw">as.factor</span>(dtm<span class="op">$</span>doc_section)

<span class="co"># check to see if they&#39;re the same number of documents per author</span>
<span class="kw">summary</span>(dtm<span class="op">$</span>doc_section)
<span class="co">#&gt; Section 1 Section 2 </span>
<span class="co">#&gt;       100        88</span></code></pre></div>
<p>We can now export the dataframe as a csv.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(dtm, <span class="st">&quot;dtm.csv&quot;</span>, <span class="dt">row.names =</span> F)</code></pre></div>
</div>
<div id="challenges-24" class="section level3">
<h3><span class="header-section-number">18.1.4</span> Challenges</h3>
<p>Using the one of the datasetes in the <code>text-data</code> repo, create a document term matrix and create a wordcloud of the most common terms.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># download text-data</span>
<span class="kw">library</span>(<span class="st">&quot;usethis&quot;</span>)
<span class="kw">use_course</span>(<span class="st">&quot;plsc-31101/text-data&quot;</span>)

<span class="co"># check out what you just downloaded.</span>
<span class="co"># and unzip a dataset.</span>

<span class="co"># YOUR CODE HERE</span></code></pre></div>

</div>
</div>
<div id="sentiment-analysis-and-dictionary-methods" class="section level2">
<h2><span class="header-section-number">18.2</span> Sentiment Analysis and Dictionary Methods</h2>
<p>To demonstrate sentiment analysis, we're going to explore lyrics from Taylor Swift songs.</p>
<p>Road the code below to get started.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(tm)
<span class="kw">require</span>(tidytext)
<span class="kw">require</span>(tidyverse)
<span class="kw">require</span>(stringr)
<span class="kw">require</span>(textdata)

ts &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/taylor_swift.csv&quot;</span>)
<span class="kw">getwd</span>()
<span class="co">#&gt; [1] &quot;/Users/rochelleterman/Desktop/course-site&quot;</span></code></pre></div>
<div id="preprocessing-and-setup" class="section level3">
<h3><span class="header-section-number">18.2.1</span> Preprocessing and Setup</h3>
<p>First we must preprocess the corpus. Create a document-term matrix from the <code>lyrics</code> column of the <code>ts</code> data frame. Complete the following preprocessing steps: - convert to lower - remove stop words - remove numbers - remove punctuation.</p>
<p><strong>Think</strong>: Why is stemming inappropriate for this application?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># preprocess and create DTM</span>
docs &lt;-<span class="st"> </span><span class="kw">Corpus</span>(<span class="kw">VectorSource</span>(ts<span class="op">$</span>lyrics))

dtm &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(docs,
           <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">tolower =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removeNumbers =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removePunctuation =</span> <span class="ot">TRUE</span>,
                          <span class="dt">stopwords =</span> <span class="ot">TRUE</span>
                         ))

dtm &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">as.matrix</span>(dtm))</code></pre></div>
<div id="sentiment-dictionaries" class="section level4 unnumbered">
<h4>Sentiment dictionaries</h4>
<p>We're going to use sentiment dictionaries from the <code>tidytext</code> package. Using the <code>get_sentiments</code> function, load the &quot;bing&quot; dictionary and store it in an object called <code>sent</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sent &lt;-<span class="st"> </span><span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)
<span class="kw">head</span>(sent)
<span class="co">#&gt; # A tibble: 6 x 2</span>
<span class="co">#&gt;   word       sentiment</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;    </span>
<span class="co">#&gt; 1 2-faces    negative </span>
<span class="co">#&gt; 2 abnormal   negative </span>
<span class="co">#&gt; 3 abolish    negative </span>
<span class="co">#&gt; 4 abominable negative </span>
<span class="co">#&gt; 5 abominably negative </span>
<span class="co">#&gt; 6 abominate  negative</span></code></pre></div>
<p>We'll now add a column to <code>sent</code> called <code>score</code>. This column should hold a &quot;1&quot; for positive words and &quot;-1&quot; for negative words.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sent<span class="op">$</span>score &lt;-<span class="st"> </span><span class="kw">ifelse</span>(sent<span class="op">$</span>sentiment<span class="op">==</span><span class="st">&quot;positive&quot;</span>, <span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>)</code></pre></div>
</div>
</div>
<div id="scoring-the-songs" class="section level3">
<h3><span class="header-section-number">18.2.2</span> Scoring the songs</h3>
<p>We're now ready to score each song.</p>
<p>(<strong>NB</strong>: There are probably many ways to program a script that performs this task. If you can think of a more elegant way, go for it!)</p>
<p>First, we'll create a dataframe that holds all the words in our dtm along with their sentiment score.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get all the words in our dtm and put it in a dataframe</span>
words =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">word =</span> <span class="kw">colnames</span>(dtm))
<span class="kw">head</span>(words)
<span class="co">#&gt;        word</span>
<span class="co">#&gt; 1      back</span>
<span class="co">#&gt; 2 backroads</span>
<span class="co">#&gt; 3       bed</span>
<span class="co">#&gt; 4   believe</span>
<span class="co">#&gt; 5   beneath</span>
<span class="co">#&gt; 6    beside</span>

<span class="co"># get their sentiment scores</span>
words &lt;-<span class="st"> </span><span class="kw">merge</span>(words, sent, <span class="dt">all.x =</span> T)
<span class="kw">head</span>(words)
<span class="co">#&gt;       word sentiment score</span>
<span class="co">#&gt; 1  abigail      &lt;NA&gt;    NA</span>
<span class="co">#&gt; 2   absent      &lt;NA&gt;    NA</span>
<span class="co">#&gt; 3   absurd  negative    -1</span>
<span class="co">#&gt; 4  accused      &lt;NA&gt;    NA</span>
<span class="co">#&gt; 5      ace      &lt;NA&gt;    NA</span>
<span class="co">#&gt; 6 achilles      &lt;NA&gt;    NA</span>

<span class="co"># replace NAs with 0s</span>
words<span class="op">$</span>score[<span class="kw">is.na</span>(words<span class="op">$</span>score)] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="kw">head</span>(words)
<span class="co">#&gt;       word sentiment score</span>
<span class="co">#&gt; 1  abigail      &lt;NA&gt;     0</span>
<span class="co">#&gt; 2   absent      &lt;NA&gt;     0</span>
<span class="co">#&gt; 3   absurd  negative    -1</span>
<span class="co">#&gt; 4  accused      &lt;NA&gt;     0</span>
<span class="co">#&gt; 5      ace      &lt;NA&gt;     0</span>
<span class="co">#&gt; 6 achilles      &lt;NA&gt;     0</span></code></pre></div>
<p>We can now use matrix algebra (!!) to multiply our dtm by the scoring vector. This will return to us a score for each document (i.e., song).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate documents scores with matrix algebra! </span>
scores &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dtm) <span class="op">%*%</span><span class="st"> </span>words<span class="op">$</span>score

<span class="co"># put it in the original documents data frame</span>
ts<span class="op">$</span>sentiment &lt;-<span class="st"> </span>scores</code></pre></div>
<p>Which song is happiest? Go listen to the song and see if you agree.</p>
</div>
<div id="challenges-25" class="section level3">
<h3><span class="header-section-number">18.2.3</span> Challenges</h3>
<div id="challenge-1-3" class="section level4 unnumbered">
<h4>Challenge 1</h4>
<p>Using the code we wrote above, make a function that accepts 1) a vector of texts, and 2) a sentiment dictionary (i.e. a data frame with words and scores), and returns a vector of sentiment scores for each text.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sentiment_score &lt;-<span class="st"> </span><span class="cf">function</span>(texts, sent_dict){
  
  <span class="co"># YOUR CODE HERE</span>
  
  <span class="kw">return</span>(scores)
}
  
<span class="co"># uncomment to test it out!</span>
<span class="co"># sentiment_score(ts$lyrics, sent)</span></code></pre></div>
</div>
<div id="challenge-2-3" class="section level4 unnumbered">
<h4>Challenge 2</h4>
<p>Using the function you wrote above, find out what the most and least positive Taylor Swift album is.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># concatenate to make albums</span>
albums &lt;-<span class="st"> </span>ts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(album) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">lyrics =</span> <span class="kw">str_c</span>(lyrics, <span class="dt">collapse =</span> <span class="st">&quot;;&quot;</span>))

<span class="co"># first load the dictionary</span>
afinn &lt;-<span class="st"> </span><span class="kw">get_sentiments</span>(<span class="st">&quot;afinn&quot;</span>)

<span class="co"># then run the function</span>
<span class="kw">sentiment_score</span>(albums<span class="op">$</span>lyrics, afinn)

<span class="co"># add to original df</span>
albums<span class="op">$</span>sent &lt;-<span class="st"> </span><span class="kw">sentiment_score</span>(albums<span class="op">$</span>lyrics, afinn)</code></pre></div>

</div>
</div>
</div>
<div id="distinctive-words" class="section level2">
<h2><span class="header-section-number">18.3</span> Distinctive Words</h2>
<p>This lesson finds distinctive words in the speeches of Obama and Trump.</p>
<p>Run the following code to:</p>
<ol style="list-style-type: decimal">
<li>Import the corpus</li>
<li>Create a DTM</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(tm)
<span class="kw">require</span>(matrixStats) <span class="co"># for statistics</span>

<span class="co"># import corpus</span>
docs &lt;-<span class="st"> </span><span class="kw">Corpus</span>(<span class="kw">DirSource</span>(<span class="st">&quot;Data/trump_obama&quot;</span>))

<span class="co"># preprocess and create DTM</span>
dtm &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(docs,
           <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">tolower =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removePunctuation =</span> <span class="ot">TRUE</span>,
                          <span class="dt">removeNumbers =</span> <span class="ot">TRUE</span>,
                          <span class="dt">stopwords =</span> <span class="ot">TRUE</span>,
                          <span class="dt">stemming=</span><span class="ot">TRUE</span>))

<span class="co"># print the dimensions of the DTM</span>
<span class="kw">dim</span>(dtm)
<span class="co">#&gt; [1]   11 4094</span>

<span class="co"># take a quick look</span>
<span class="kw">inspect</span>(dtm[,<span class="dv">100</span><span class="op">:</span><span class="dv">104</span>])
<span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 11, terms: 5)&gt;&gt;</span>
<span class="co">#&gt; Non-/sparse entries: 14/41</span>
<span class="co">#&gt; Sparsity           : 75%</span>
<span class="co">#&gt; Maximal term length: 11</span>
<span class="co">#&gt; Weighting          : term frequency (tf)</span>
<span class="co">#&gt; Sample             :</span>
<span class="co">#&gt;                 Terms</span>
<span class="co">#&gt; Docs             alien align alik aliv allamerican</span>
<span class="co">#&gt;   Obama_2009.txt     0     0    1    0           0</span>
<span class="co">#&gt;   Obama_2010.txt     0     0    1    1           0</span>
<span class="co">#&gt;   Obama_2011.txt     0     1    0    0           0</span>
<span class="co">#&gt;   Obama_2012.txt     0     0    0    1           0</span>
<span class="co">#&gt;   Obama_2013.txt     0     0    0    0           0</span>
<span class="co">#&gt;   Obama_2014.txt     0     0    0    1           0</span>
<span class="co">#&gt;   Obama_2015.txt     1     0    1    0           0</span>
<span class="co">#&gt;   Trump_2017.txt     0     1    0    0           0</span>
<span class="co">#&gt;   Trump_2018.txt     1     0    0    0           1</span>
<span class="co">#&gt;   Trump_2019.txt     3     0    1    1           0</span></code></pre></div>
<p>Oftentimes scholars will want to compare different corpora by finding the words (or features) distinctive to each corpora. But finding distinctive words requires a decision about what “distinctive” means. As we will see, there are a variety of definitions that we might use.</p>
<div id="unique-usage" class="section level3">
<h3><span class="header-section-number">18.3.1</span> Unique usage</h3>
<p>The most obvious definition of distinctive is &quot;exclusive&quot;. That is, distinctive words are those are found exclusively in texts associated with a single speaker (or group). For example, if Trump uses the word “access” and Obama never does, we should count “access” as distinctive.</p>
<p>Finding words that are exclusive to a group is a simple exercise. All we have to do is sum the usage of each word use across all texts for each speaker, and then look for cases where the sum is zero for one speaker.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># turn DTM into dataframe</span>
dtm.m &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">as.matrix</span>(dtm))
dtm.m<span class="op">$</span>that &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co"># fix weird error with stopwords.</span>

<span class="co"># Subset into 2 dtms for each speaker</span>
obama &lt;-<span class="st"> </span>dtm.m[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>,]
trump &lt;-<span class="st"> </span>dtm.m[<span class="dv">9</span><span class="op">:</span><span class="dv">11</span>,]

<span class="co"># Sum word usage counts across all texts</span>
obama &lt;-<span class="st"> </span><span class="kw">colSums</span>(obama)
trump &lt;-<span class="st"> </span><span class="kw">colSums</span>(trump)

<span class="co"># Put those sums back into a dataframe</span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">rbind</span>(obama, trump))
df[ ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt;       abandon abess abid abil abject</span>
<span class="co">#&gt; obama       2     1    1    7      0</span>
<span class="co">#&gt; trump       1     0    0    1      1</span>

<span class="co"># Get words where one speaker&#39;s usage is 0</span>
solelyobama &lt;-<span class="st"> </span><span class="kw">unlist</span>(df[<span class="dv">1</span>, trump<span class="op">==</span><span class="dv">0</span>]) 
solelyobama &lt;-<span class="st"> </span>solelyobama[<span class="kw">order</span>(solelyobama, <span class="dt">decreasing =</span> T)] <span class="co"># order them by frequency</span>
<span class="kw">head</span>(solelyobama, <span class="dv">10</span>) <span class="co"># get top 10 words for obama</span>
<span class="co">#&gt;      dont technolog      bank     innov    doesnt   teacher      loan      wont </span>
<span class="co">#&gt;        68        31        30        30        29        26        22        22 </span>
<span class="co">#&gt;     debat    climat </span>
<span class="co">#&gt;        21        19</span>

solelytrump &lt;-<span class="st"> </span><span class="kw">unlist</span>(df[<span class="dv">2</span>, obama<span class="op">==</span><span class="dv">0</span>])
solelytrump &lt;-<span class="st"> </span>solelytrump[<span class="kw">order</span>(solelytrump, <span class="dt">decreasing =</span> T)] <span class="co"># order them by frequency</span>
<span class="kw">head</span>(solelytrump, <span class="dv">10</span>) <span class="co"># get top 10 words for trump</span>
<span class="co">#&gt;      isi    agent america.  audienc    megan      it. obamacar     alic </span>
<span class="co">#&gt;        9        8        8        8        8        7        7        6 </span>
<span class="co">#&gt;   beauti    elvin </span>
<span class="co">#&gt;        6        6</span></code></pre></div>
<p>As we can see, these words tend not to be terribly interesting or informative. So we will remove them from our corpus in order to focus on identifying distinctive words that appear in texts associated with every speaker.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># subset df with non-zero entries</span>
df &lt;-<span class="st"> </span>df[,trump<span class="op">&gt;</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>obama<span class="op">&gt;</span><span class="dv">0</span>]

<span class="co"># how many words are we left with?</span>
<span class="kw">ncol</span>(df)
<span class="co">#&gt; [1] 1525</span>
df[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt;       abandon abil abl abort abraham</span>
<span class="co">#&gt; obama       2    7  15     1       1</span>
<span class="co">#&gt; trump       1    1   9     1       1</span></code></pre></div>
</div>
<div id="differences-in-frequences" class="section level3">
<h3><span class="header-section-number">18.3.2</span> Differences in frequences</h3>
<p>Another basic approach to identifying distinctive words is to compare the frequencies at which speakers use a word. If one speaker uses a word often across his or her oeuvre and another barely uses the word at all, the difference in their respective frequencies will be large. We can calculate this quantity the following way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># take the differences in frequences</span>
diffFreq &lt;-<span class="st"> </span>obama <span class="op">-</span><span class="st"> </span>trump

<span class="co"># sort the words</span>
diffFreq &lt;-<span class="st"> </span><span class="kw">sort</span>(diffFreq, <span class="dt">decreasing =</span> T)

<span class="co"># the top obama words</span>
<span class="kw">head</span>(diffFreq, <span class="dv">10</span>)
<span class="co">#&gt;     will     year      job     work     make      can american  america </span>
<span class="co">#&gt;      306      217      214      186      177      172      165      155 </span>
<span class="co">#&gt;      new    peopl </span>
<span class="co">#&gt;      150      147</span>

<span class="co"># the top trump words</span>
<span class="kw">tail</span>(diffFreq, <span class="dv">10</span>)
<span class="co">#&gt;  illeg immigr    isi    usa   hero   ryan border  great  thank   drug </span>
<span class="co">#&gt;     -9     -9     -9     -9    -11    -11    -13    -13    -19    -22</span></code></pre></div>
</div>
<div id="differences-in-averages" class="section level3">
<h3><span class="header-section-number">18.3.3</span> Differences in averages</h3>
<p>This is a good start. But what if one speaker uses more words <em>overall</em>? Instead of using raw frenquncies, a better approach would look at the average <em>rate</em> at which speakers use various words.</p>
<p>We can calculate this quantity the following way:</p>
<ol style="list-style-type: decimal">
<li>Normalize the DTM from counts to proportions</li>
<li>Take the difference between one speaker's proportion of a word and another's proportion of the same word.</li>
<li>Find the words with the highest absolute difference.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># normalize into proportions</span>
rowTotals &lt;-<span class="st"> </span><span class="kw">rowSums</span>(df) <span class="co">#create vector with row totals, i.e. total number of words per document</span>
<span class="kw">head</span>(rowTotals) <span class="co"># notice that one speaker uses more words than the other</span>
<span class="co">#&gt; obama trump </span>
<span class="co">#&gt; 23021  7432</span>

<span class="co"># change frequencies to proportions</span>
df &lt;-<span class="st"> </span>df<span class="op">/</span>rowTotals <span class="co">#change frequencies to proportions</span>
df[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt;        abandon     abil      abl    abort  abraham</span>
<span class="co">#&gt; obama 8.69e-05 0.000304 0.000652 4.34e-05 4.34e-05</span>
<span class="co">#&gt; trump 1.35e-04 0.000135 0.001211 1.35e-04 1.35e-04</span>

<span class="co"># get difference in proportions</span>
means.obama &lt;-<span class="st"> </span>df[<span class="dv">1</span>,]
means.trump &lt;-<span class="st"> </span>df[<span class="dv">2</span>,]
score &lt;-<span class="st"> </span><span class="kw">unlist</span>(means.obama <span class="op">-</span><span class="st"> </span>means.trump)

<span class="co"># find words with highest difference</span>
score &lt;-<span class="st"> </span><span class="kw">sort</span>(score, <span class="dt">decreasing =</span> T)
<span class="kw">head</span>(score,<span class="dv">10</span>) <span class="co"># top obama words</span>
<span class="co">#&gt;     job    make    busi     let    need    work    help economi  energi     can </span>
<span class="co">#&gt; 0.00620 0.00541 0.00473 0.00426 0.00419 0.00407 0.00388 0.00378 0.00363 0.00346</span>
<span class="kw">tail</span>(score,<span class="dv">10</span>) <span class="co"># top trump words</span>
<span class="co">#&gt;   border  tonight   immigr     unit    state     drug     must    great </span>
<span class="co">#&gt; -0.00284 -0.00293 -0.00322 -0.00322 -0.00322 -0.00342 -0.00354 -0.00476 </span>
<span class="co">#&gt;    thank american </span>
<span class="co">#&gt; -0.00483 -0.00650</span></code></pre></div>
<p>This is a start. The problem with this measure is that it tends to highlight differences in very frequent words. For example, this method gives greater attention to a word that occurs 30 times per 1,000 words in Obama and 25 times per 1,000 in Trump than it does to a word that occurs 5 times per 1,000 words in Obama and 0.1 times per 1,000 words in Trump This does not seem right. It seems important to recognize cases when one speaker uses a word frequently and another speaker barely uses it.</p>
<p>As this initial attempt suggests, identifying distinctive words will be a balancing act. When comparing two groups of texts, differences in the rates of frequent words will tend to be large relative to differences in the rates of rarer words. Human language is variable; some words occur more frequently than others regardless of who is writing. We need to find a way of adjusting our definition of distinctive in light of this.</p>
</div>
<div id="difference-in-averages-adjustment" class="section level3">
<h3><span class="header-section-number">18.3.4</span> Difference in averages, adjustment</h3>
<p>One adjustment that is easy to make is to divide the difference in speakers’ average rates by the average rate across all speakers. Since dividing a quantity by a large number will make that quantity smaller, our new distinctiveness score will tend to be lower for words that occur frequently. While this is merely a heuristic, it does move us in the right direction.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get the average rate of all words across all speakers</span>
means.all &lt;-<span class="st"> </span><span class="kw">colMeans</span>(df)

<span class="co"># now divide the difference in speakers&#39; rates by the average rate across all speakers</span>
score &lt;-<span class="st"> </span><span class="kw">unlist</span>((means.obama <span class="op">-</span><span class="st"> </span>means.trump) <span class="op">/</span><span class="st"> </span>means.all)
score &lt;-<span class="st"> </span><span class="kw">sort</span>(score, <span class="dt">decreasing =</span> T)
<span class="kw">head</span>(score,<span class="dv">10</span>) <span class="co"># top obama words</span>
<span class="co">#&gt;    student       cant       idea      money        oil     higher       earn </span>
<span class="co">#&gt;       1.78       1.77       1.70       1.67       1.67       1.66       1.60 </span>
<span class="co">#&gt; leadership   research    respons </span>
<span class="co">#&gt;       1.60       1.59       1.58</span>
<span class="kw">tail</span>(score,<span class="dv">10</span>) <span class="co"># top trump words</span>
<span class="co">#&gt;     drug    grace    death    heart   pillar southern  terribl   unfair </span>
<span class="co">#&gt;    -1.77    -1.80    -1.82    -1.82    -1.84    -1.84    -1.84    -1.84 </span>
<span class="co">#&gt;     gang     ryan </span>
<span class="co">#&gt;    -1.87    -1.90</span></code></pre></div>

</div>
</div>
<div id="structural-topic-models" class="section level2">
<h2><span class="header-section-number">18.4</span> Structural Topic Models</h2>
<p>This unit gives a brief overview of the <code>stm</code> (structural topic model) package. Please read the vignette for more detail.</p>
<p>Structural topic model is a way to estimate a topic model that includes document-level meta-data. One can then see how topical prevalence changes according to that meta-data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stm)</code></pre></div>
<p>The data we'll be using for this unit consists of all articles about women published in the New York Times and Washington Post, 1980-2014. You worked with a subset of this data in your last homework.</p>
<p>Load the dataset. Notice that we have the text of the articles, along with some metadata.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load Data</span>
women &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/women-full.csv&#39;</span>)
<span class="kw">names</span>(women)
<span class="co">#&gt;  [1] &quot;BYLINE&quot;              &quot;TEXT.NO.NOUN&quot;        &quot;PUBLICATION&quot;        </span>
<span class="co">#&gt;  [4] &quot;TITLE&quot;               &quot;COUNTRY&quot;             &quot;COUNTRY_FINAL&quot;      </span>
<span class="co">#&gt;  [7] &quot;YEAR&quot;                &quot;UID&quot;                 &quot;COUNTRY_NR&quot;         </span>
<span class="co">#&gt; [10] &quot;entities&quot;            &quot;LENGTH&quot;              &quot;COUNTRY_TOP_PERCENT&quot;</span>
<span class="co">#&gt; [13] &quot;COUNTRY_CODE&quot;        &quot;TEXT&quot;                &quot;DATE&quot;               </span>
<span class="co">#&gt; [16] &quot;COUNTRY_MAJOR&quot;       &quot;TYPE&quot;                &quot;REGION&quot;             </span>
<span class="co">#&gt; [19] &quot;SUBJECT&quot;</span></code></pre></div>
<div id="preprocessing-1" class="section level3">
<h3><span class="header-section-number">18.4.1</span> Preprocessing</h3>
<p>STM has its own unique preprocessing functions and procedure, which I've coded below. Notice that we're going to use the <code>TEXT.NO.NOUN</code> column, which contains all the text of the articles without proper nouns (which I removed earlier).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Pre-process</span>
temp&lt;-<span class="kw">textProcessor</span>(<span class="dt">documents =</span> women<span class="op">$</span>TEXT.NO.NOUN, <span class="dt">metadata =</span> women)
<span class="co">#&gt; Building corpus... </span>
<span class="co">#&gt; Converting to Lower Case... </span>
<span class="co">#&gt; Removing punctuation... </span>
<span class="co">#&gt; Removing stopwords... </span>
<span class="co">#&gt; Removing numbers... </span>
<span class="co">#&gt; Stemming... </span>
<span class="co">#&gt; Creating Output...</span>
meta&lt;-temp<span class="op">$</span>meta
vocab&lt;-temp<span class="op">$</span>vocab
docs&lt;-temp<span class="op">$</span>documents

<span class="co"># prep documents in correct format</span>
out &lt;-<span class="st"> </span><span class="kw">prepDocuments</span>(docs, vocab, meta)
<span class="co">#&gt; Removing 19460 of 39403 terms (19460 of 1087166 tokens) due to frequency </span>
<span class="co">#&gt; Your corpus now has 4531 documents, 19943 terms and 1067706 tokens.</span>
docs&lt;-out<span class="op">$</span>documents
vocab&lt;-out<span class="op">$</span>vocab
meta &lt;-out<span class="op">$</span>meta</code></pre></div>
<div id="challenge-1-4" class="section level4 unnumbered">
<h4>Challenge 1</h4>
<p>Read the help file for the <code>prepDocuments</code> function. Alter the code above (in 2.1) to keep only words that appear in at least 10 documents.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># YOUR CODE HERE</span></code></pre></div>
</div>
</div>
<div id="estimate-model" class="section level3">
<h3><span class="header-section-number">18.4.2</span> Estimate Model</h3>
<p>We're now going to estimate a topic model with 15 topics by regressing topical prevalence on region and year covariates.</p>
<p>Running full model takes a <strong>long</strong> time to finish. For that reason, we're going to add an argument <code>max.em.its</code> which sets the number of iterations. By keeping it low (15) we'll see a rough estimate of the topics. You can always go back and estimate the model to convergence.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model &lt;-<span class="st"> </span><span class="kw">stm</span>(docs, vocab, <span class="dv">15</span>, <span class="dt">prevalence =</span> <span class="op">~</span><span class="st"> </span>REGION <span class="op">+</span><span class="st"> </span><span class="kw">s</span>(YEAR), <span class="dt">data =</span> meta, <span class="dt">seed =</span> <span class="dv">15</span>, <span class="dt">max.em.its =</span> <span class="dv">15</span>)
<span class="co">#&gt; Beginning Spectral Initialization </span>
<span class="co">#&gt;   Calculating the gram matrix...</span>
<span class="co">#&gt;   Using only 10000 most frequent terms during initialization...</span>
<span class="co">#&gt;   Finding anchor words...</span>
<span class="co">#&gt;      ...............</span>
<span class="co">#&gt;   Recovering initialization...</span>
<span class="co">#&gt;      ....................................................................................................</span>
<span class="co">#&gt; Initialization complete.</span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 1 (approx. per word bound = -7.882) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 2 (approx. per word bound = -7.605, relative change = 3.519e-02) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 3 (approx. per word bound = -7.573, relative change = 4.218e-03) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 4 (approx. per word bound = -7.559, relative change = 1.843e-03) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 5 (approx. per word bound = -7.550, relative change = 1.162e-03) </span>
<span class="co">#&gt; Topic 1: women, show, one, like, design </span>
<span class="co">#&gt;  Topic 2: said, women, polic, report, year </span>
<span class="co">#&gt;  Topic 3: women, team, said, game, world </span>
<span class="co">#&gt;  Topic 4: year, book, first, one, mrs </span>
<span class="co">#&gt;  Topic 5: women, said, percent, femal, will </span>
<span class="co">#&gt;  Topic 6: said, women, one, peopl, woman </span>
<span class="co">#&gt;  Topic 7: women, work, said, year, men </span>
<span class="co">#&gt;  Topic 8: women, sexual, sex, rape, men </span>
<span class="co">#&gt;  Topic 9: women, said, right, law, govern </span>
<span class="co">#&gt;  Topic 10: said, one, famili, women, peopl </span>
<span class="co">#&gt;  Topic 11: women, film, one, said, woman </span>
<span class="co">#&gt;  Topic 12: said, polit, elect, parti, govern </span>
<span class="co">#&gt;  Topic 13: women, said, cancer, studi, health </span>
<span class="co">#&gt;  Topic 14: women, confer, said, deleg, will </span>
<span class="co">#&gt;  Topic 15: said, women, girl, rape, practic </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 6 (approx. per word bound = -7.544, relative change = 8.200e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 7 (approx. per word bound = -7.539, relative change = 5.961e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 8 (approx. per word bound = -7.536, relative change = 4.491e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 9 (approx. per word bound = -7.533, relative change = 3.481e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 10 (approx. per word bound = -7.531, relative change = 2.759e-04) </span>
<span class="co">#&gt; Topic 1: show, design, women, fashion, art </span>
<span class="co">#&gt;  Topic 2: said, women, polic, report, offici </span>
<span class="co">#&gt;  Topic 3: women, team, said, game, world </span>
<span class="co">#&gt;  Topic 4: book, year, life, first, work </span>
<span class="co">#&gt;  Topic 5: women, said, femal, percent, will </span>
<span class="co">#&gt;  Topic 6: said, one, protest, peopl, site </span>
<span class="co">#&gt;  Topic 7: women, work, said, year, percent </span>
<span class="co">#&gt;  Topic 8: women, sexual, rape, sex, men </span>
<span class="co">#&gt;  Topic 9: women, said, right, law, govern </span>
<span class="co">#&gt;  Topic 10: said, one, famili, peopl, day </span>
<span class="co">#&gt;  Topic 11: women, film, one, like, woman </span>
<span class="co">#&gt;  Topic 12: polit, said, elect, parti, govern </span>
<span class="co">#&gt;  Topic 13: women, said, abort, cancer, health </span>
<span class="co">#&gt;  Topic 14: women, confer, said, will, world </span>
<span class="co">#&gt;  Topic 15: said, women, girl, rape, case </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 11 (approx. per word bound = -7.530, relative change = 2.214e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 12 (approx. per word bound = -7.528, relative change = 1.804e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 13 (approx. per word bound = -7.527, relative change = 1.496e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Completing Iteration 14 (approx. per word bound = -7.526, relative change = 1.265e-04) </span>
<span class="co">#&gt; ....................................................................................................</span>
<span class="co">#&gt; Completed E-Step (2 seconds). </span>
<span class="co">#&gt; Completed M-Step. </span>
<span class="co">#&gt; Model Terminated Before Convergence Reached</span></code></pre></div>
<p>Let's see what our model came up with! The following tools can be used to evaluate the model.</p>
<ul>
<li><code>labelTopics</code> gives the top words for each topic.</li>
<li><code>findThoughts</code> gives the top documents for each topic (the documents with the highest proportion of each topic)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Top Words</span>
<span class="kw">labelTopics</span>(model)
<span class="co">#&gt; Topic 1 Top Words:</span>
<span class="co">#&gt;       Highest Prob: show, design, fashion, women, art, one, like </span>
<span class="co">#&gt;       FREX: coutur, fashion, museum, sculptur, ready--wear, jacket, galleri </span>
<span class="co">#&gt;       Lift: ---inch, -ankl, alexandr, armatur, armhol, art-fair, avant </span>
<span class="co">#&gt;       Score: coutur, art, artist, fashion, museum, exhibit, cloth </span>
<span class="co">#&gt; Topic 2 Top Words:</span>
<span class="co">#&gt;       Highest Prob: said, polic, women, kill, report, offici, govern </span>
<span class="co">#&gt;       FREX: polic, suicid, kill, attack, investig, suspect, arrest </span>
<span class="co">#&gt;       Lift: abducte, charanjit, humanity-soak, male-control, sunil, kalpana, ciudad </span>
<span class="co">#&gt;       Score: polic, rape, kill, said, arrest, attack, investig </span>
<span class="co">#&gt; Topic 3 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, team, game, said, world, play, olymp </span>
<span class="co">#&gt;       FREX: tournament, championship, olymp, soccer, player, game, medal </span>
<span class="co">#&gt;       Lift: -america, -foot--inch, -hole, -kilomet, -rank, -round, -trump </span>
<span class="co">#&gt;       Score: olymp, championship, tournament, team, player, game, medal </span>
<span class="co">#&gt; Topic 4 Top Words:</span>
<span class="co">#&gt;       Highest Prob: book, year, life, first, write, novel, work </span>
<span class="co">#&gt;       FREX: novel, literari, fiction, book, memoir, novelist, poet </span>
<span class="co">#&gt;       Lift: buster, calla, goncourt, identical-twin, italian-american, kilcher, klone </span>
<span class="co">#&gt;       Score: novel, book, fiction, literari, poet, writer, write </span>
<span class="co">#&gt; Topic 5 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, said, femal, percent, militari, will, compani </span>
<span class="co">#&gt;       FREX: combat, board, quota, militari, bank, corpor, infantri </span>
<span class="co">#&gt;       Lift: -combat, cpr, gender-divers, nonexecut, outfitt, r-calif, r-ni </span>
<span class="co">#&gt;       Score: women, militari, infantri, combat, percent, quota, femal </span>
<span class="co">#&gt; Topic 6 Top Words:</span>
<span class="co">#&gt;       Highest Prob: protest, said, one, site, peopl, young, video </span>
<span class="co">#&gt;       FREX: orthodox, internet, web, video, rabbi, prayer, site </span>
<span class="co">#&gt;       Lift: balaclava, grrrl, tehrik-, braveheart, drawbridg, gravesit, guerrilla-styl </span>
<span class="co">#&gt;       Score: protest, site, orthodox, video, jewish, rabbi, xxxfx </span>
<span class="co">#&gt; Topic 7 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, work, said, year, percent, men, ese </span>
<span class="co">#&gt;       FREX: ese, factori, employ, incom, worker, job, market </span>
<span class="co">#&gt;       Lift: flextim, management-track, nec, nontransfer, rabenmutt, chiho, fumiko </span>
<span class="co">#&gt;       Score: ese, percent, compani, work, job, women, factori </span>
<span class="co">#&gt; Topic 8 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, sexual, sex, rape, men, violenc, said </span>
<span class="co">#&gt;       FREX: harass, sexual, sex, assault, brothel, violenc, behavior </span>
<span class="co">#&gt;       Lift: offenc, tarun, chaud, much-lov, newt, tiresom, sex-rel </span>
<span class="co">#&gt;       Score: rape, sexual, harass, violenc, sex, assault, brothel </span>
<span class="co">#&gt; Topic 9 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, said, right, law, islam, govern, religi </span>
<span class="co">#&gt;       FREX: islam, religi, veil, constitut, saudi, secular, cleric </span>
<span class="co">#&gt;       Lift: afghan-styl, anglo-, archdeacon, bien-aim, episcopaci, fez, government-encourag </span>
<span class="co">#&gt;       Score: islam, law, women, right, religi, ordin, saudi </span>
<span class="co">#&gt; Topic 10 Top Words:</span>
<span class="co">#&gt;       Highest Prob: said, one, famili, peopl, day, like, home </span>
<span class="co">#&gt;       FREX: villag, room, smile, son, couldnt, recal, sit </span>
<span class="co">#&gt;       Lift: charpoy, jet-black, mitra, schermerhorn, single-famili, tyson, uja-feder </span>
<span class="co">#&gt;       Score: villag, husband, fistula, famili, school, girl, said </span>
<span class="co">#&gt; Topic 11 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, film, one, like, woman, say, play </span>
<span class="co">#&gt;       FREX: film, theater, movi, charact, actress, documentari, audienc </span>
<span class="co">#&gt;       Lift: clive, fine-tun, kaffir, nushus, shrew, nushu, cadel </span>
<span class="co">#&gt;       Score: film, theater, movi, nushu, play, orchestra, femin </span>
<span class="co">#&gt; Topic 12 Top Words:</span>
<span class="co">#&gt;       Highest Prob: polit, elect, parti, minist, presid, govern, said </span>
<span class="co">#&gt;       FREX: voter, elect, parti, prime, candid, vote, cabinet </span>
<span class="co">#&gt;       Lift: ernesto, pinbal, influence-peddl, information-servic, kakuei, left--cent, marxist-leninist </span>
<span class="co">#&gt;       Score: elect, parti, vote, minist, voter, polit, candid </span>
<span class="co">#&gt; Topic 13 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, said, abort, cancer, health, studi, breast </span>
<span class="co">#&gt;       FREX: implant, cancer, breast, pill, virus, patient, estrogen </span>
<span class="co">#&gt;       Lift: acet, adren, ambulatori, analges, anastrozol, antioxid, ashkenazi </span>
<span class="co">#&gt;       Score: cancer, abort, breast, pill, implant, health, virus </span>
<span class="co">#&gt; Topic 14 Top Words:</span>
<span class="co">#&gt;       Highest Prob: women, said, confer, will, world, organ, right </span>
<span class="co">#&gt;       FREX: deleg, confer, forum, page, peac, nongovernment, ambassador </span>
<span class="co">#&gt;       Lift: -glass, barack, brooklyn-born, expansion, foreclosur, guarantor, holden </span>
<span class="co">#&gt;       Score: deleg, confer, forum, page, palestinian, peac, mrs </span>
<span class="co">#&gt; Topic 15 Top Words:</span>
<span class="co">#&gt;       Highest Prob: said, women, rape, court, case, girl, practic </span>
<span class="co">#&gt;       FREX: mutil, genit, circumcis, asylum, sentenc, judg, tribun </span>
<span class="co">#&gt;       Lift: labia, layli, minora, multifaith, paraleg, salim, strip-search </span>
<span class="co">#&gt;       Score: rape, genit, circumcis, mutil, court, sentenc, prosecutor</span>

<span class="co"># Example Docs</span>
<span class="kw">findThoughts</span>(model, <span class="dt">texts =</span> meta<span class="op">$</span>TITLE, <span class="dt">n=</span><span class="dv">2</span>,<span class="dt">topics =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">15</span>)
<span class="co">#&gt; Warning in findThoughts(model, texts = meta$TITLE, n = 2, topics = 1:15): texts</span>
<span class="co">#&gt; are of type &#39;factor.&#39; Converting to character vectors. Use &#39;as.character&#39; to</span>
<span class="co">#&gt; avoid this warning in the future.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Topic 1: </span>
<span class="co">#&gt;       KENZO&#39;S CAREFREE STYLES AT AN OFFBEAT SHOWING</span>
<span class="co">#&gt;      A MODERN LOOK, A CLASSIC TOUCH FROM SAINT LAURENT </span>
<span class="co">#&gt;  Topic 2: </span>
<span class="co">#&gt;       Assailants Kill 4 Iraqi Women Working for U.S.; Gunmen Follow Van Carrying Laundry Employees</span>
<span class="co">#&gt;      WORLD IN BRIEF </span>
<span class="co">#&gt;  Topic 3: </span>
<span class="co">#&gt;       AMERICANS LEAD EAST GERMANS IN TRACK</span>
<span class="co">#&gt;      Russians Chart a New Path </span>
<span class="co">#&gt;  Topic 4: </span>
<span class="co">#&gt;       BEST SELLERS: September 6, 1998</span>
<span class="co">#&gt;      BEST SELLERS: September 13, 1998 </span>
<span class="co">#&gt;  Topic 5: </span>
<span class="co">#&gt;       In Britain, a Big Push for More Women to Serve on Corporate Boards</span>
<span class="co">#&gt;      Poll: Allow women in combat units </span>
<span class="co">#&gt;  Topic 6: </span>
<span class="co">#&gt;       Neda&#39;s Legacy; A woman&#39;s death moves Iranian protesters.</span>
<span class="co">#&gt;      Jewish Feminists Prompt Protests at Wailing Wall </span>
<span class="co">#&gt;  Topic 7: </span>
<span class="co">#&gt;       China Scrambles for Stability as Its Workers Age</span>
<span class="co">#&gt;      A high price for a paycheck; Caught between the demands of the corporate workplace and of their traditional roles in society, more South Korean women are putting off marriage and parenthood </span>
<span class="co">#&gt;  Topic 8: </span>
<span class="co">#&gt;       Confronting Rape in India, and Around the World</span>
<span class="co">#&gt;      Sexual Harassment Prosecutions Get Short Shrift in India, Lawyer Says </span>
<span class="co">#&gt;  Topic 9: </span>
<span class="co">#&gt;       English Church Advances Bid For Women As Bishops</span>
<span class="co">#&gt;      Egypt Passes Law On Women&#39;s Rights; Polygamy Still Allowed for Men </span>
<span class="co">#&gt;  Topic 10: </span>
<span class="co">#&gt;       An Old Cinema in Pakistan Has New Life After Quake</span>
<span class="co">#&gt;      Maria Duran&#39;s Endless Wait </span>
<span class="co">#&gt;  Topic 11: </span>
<span class="co">#&gt;       For France, An All-Purpose Heartthrob</span>
<span class="co">#&gt;      Film: Brazilian &#39;Vera&#39; </span>
<span class="co">#&gt;  Topic 12: </span>
<span class="co">#&gt;       The Widow Of Ex-Leader Wins Race In Panama</span>
<span class="co">#&gt;      Cabinet Defeated in Iceland as Feminists Gain </span>
<span class="co">#&gt;  Topic 13: </span>
<span class="co">#&gt;       SECTION: HEALTH; Pg. T18</span>
<span class="co">#&gt;      Dense Breasts May Need Sonograms to Detect Cancer </span>
<span class="co">#&gt;  Topic 14: </span>
<span class="co">#&gt;       DISPUTES ON KEY ISSUES STALL KENYA PARLEY</span>
<span class="co">#&gt;      &#39;CHAOTIC&#39; CONDITIONS FEARED AT U.N.&#39;S PARLEY ON WOMEN </span>
<span class="co">#&gt;  Topic 15: </span>
<span class="co">#&gt;       Woman Fleeing Tribal Rite Gains Asylum; Genital Mutilation Is Ruled Persecution</span>
<span class="co">#&gt;      Refugee From Mutilation</span></code></pre></div>
<div id="challenge-2-4" class="section level4">
<h4><span class="header-section-number">18.4.2.1</span> Challenge 2</h4>
<p>Estimate other models using 5 and 40 topics, respectively. Look at the top words for each topic. How do the topics vary when you change the number of topics?</p>
<p>Now look at your neighbor's model. Did you get the same results? Why or why not?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># YOUR CODE HERE</span></code></pre></div>
</div>
</div>
<div id="interprete-model" class="section level3">
<h3><span class="header-section-number">18.4.3</span> Interprete Model</h3>
<p>Let's all load a fully-estimated model that I ran before class.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load the already-estimated model.</span>
<span class="kw">load</span>(<span class="st">&quot;data/stm.RData&quot;</span>)</code></pre></div>
<div id="challenge-3-2" class="section level4 unnumbered">
<h4>Challenge 3</h4>
<p>Using the functions <code>labelTopics</code> and <code>findThoughts</code>, hand label the 15 topics. Hold these labels as a character vector called <code>labels</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Store your hand labels below.</span>
labels =<span class="st"> </span><span class="kw">c</span>()</code></pre></div>
<p>Now look at your neighbor's labels. Did you get the same results? Why or why not?</p>
</div>
</div>
<div id="analyze-topics" class="section level3">
<h3><span class="header-section-number">18.4.4</span> Analyze topics</h3>
<p>We're now going to see how the topics compare in terms of their prevalence across region. What do you notice about the distribution of topic 9?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Corpus Summary</span>
<span class="kw">plot.STM</span>(model, <span class="dt">type=</span><span class="st">&quot;summary&quot;</span>, <span class="dt">custom.labels =</span> labels, <span class="dt">main=</span><span class="st">&quot;&quot;</span>)

<span class="co"># Estimate Covariate Effects</span>
prep &lt;-<span class="st"> </span><span class="kw">estimateEffect</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">15</span> <span class="op">~</span><span class="st"> </span>REGION <span class="op">+</span><span class="st"> </span><span class="kw">s</span>(YEAR), model, <span class="dt">meta =</span> meta, <span class="dt">uncertainty =</span> <span class="st">&quot;Global&quot;</span>, <span class="dt">documents=</span>docs)

<span class="co"># plot topic 9 over region</span>
regions =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;EECA&quot;</span>, <span class="st">&quot;MENA&quot;</span>, <span class="st">&quot;Africa&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;LA&quot;</span>)
<span class="kw">plot.estimateEffect</span>(prep, <span class="st">&quot;REGION&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;pointestimate&quot;</span>, <span class="dt">topics =</span> <span class="dv">9</span>, <span class="dt">printlegend =</span> <span class="ot">TRUE</span>, <span class="dt">labeltype =</span> <span class="st">&quot;custom&quot;</span>, <span class="dt">custom.labels =</span> regions, <span class="dt">main =</span> <span class="st">&quot;Women&#39;s Rights&quot;</span>, <span class="dt">ci.level =</span> .<span class="dv">95</span>, <span class="dt">nsims=</span><span class="dv">100</span>)</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-535-1.png" width="70%" style="display: block; margin: auto;" /><img src="site1_files/figure-html/unnamed-chunk-535-2.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="collecting-data-from-the-web.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="git-and-github.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rochelleterman/plsc-31101/edit/master/15-Text/15-1_Preprocessing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["https://github.com/rochelleterman/plsc-31101/raw/master/15-Text/15-1_Preprocessing.Rmd"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
