<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 20 Assignments | PLSC 31101: Computational Tools for Social Science</title>
  <meta name="description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 20 Assignments | PLSC 31101: Computational Tools for Social Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://rochelleterman.github.io/plsc-31101/" />
  
  <meta property="og:description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="github-repo" content="rochelleterman/plsc-31101" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 20 Assignments | PLSC 31101: Computational Tools for Social Science" />
  
  <meta name="twitter:description" content="This book contains course notes and other materials for PLSC 31101." />
  

<meta name="author" content="Rochelle Terman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="git-and-github.html"/>
<link rel="next" href="final-projects.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PLSC 31101</a></li>

<li class="divider"></li>
<li class="part"><span><b>I Before Class</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.1</b> Course Description</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#who-should-take-this-course"><i class="fa fa-check"></i><b>1.2</b> Who should take this course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#requirements-and-evaluation"><i class="fa fa-check"></i><b>1.3</b> Requirements and Evaluation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#activities-and-materials"><i class="fa fa-check"></i><b>1.4</b> Activities and Materials</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#curriculum-outline-schedule"><i class="fa fa-check"></i><b>1.5</b> Curriculum Outline / Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#r-studio"><i class="fa fa-check"></i><b>2.2</b> R Studio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a></li>
<li class="chapter" data-level="2.4" data-path="installation.html"><a href="installation.html#latex"><i class="fa fa-check"></i><b>2.4</b> LaTex</a></li>
<li class="chapter" data-level="2.5" data-path="installation.html"><a href="installation.html#the-bash-shell"><i class="fa fa-check"></i><b>2.5</b> The Bash Shell</a></li>
<li class="chapter" data-level="2.6" data-path="installation.html"><a href="installation.html#git"><i class="fa fa-check"></i><b>2.6</b> Git</a></li>
<li class="chapter" data-level="2.7" data-path="installation.html"><a href="installation.html#other-helpful-tools"><i class="fa fa-check"></i><b>2.7</b> Other helpful tools</a></li>
<li class="chapter" data-level="2.8" data-path="installation.html"><a href="installation.html#testing-your-installation"><i class="fa fa-check"></i><b>2.8</b> Testing your installation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="homework-rubric.html"><a href="homework-rubric.html"><i class="fa fa-check"></i><b>3</b> Homework Rubric</a></li>
<li class="part"><span><b>II Course Notes</b></span></li>
<li class="chapter" data-level="4" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>4</b> Introduction</a><ul>
<li class="chapter" data-level="4.1" data-path="introduction.html"><a href="introduction.html#the-motivation"><i class="fa fa-check"></i><b>4.1</b> The Motivation</a></li>
<li class="chapter" data-level="4.2" data-path="introduction.html"><a href="introduction.html#about-this-class"><i class="fa fa-check"></i><b>4.2</b> About This Class</a></li>
<li class="chapter" data-level="4.3" data-path="introduction.html"><a href="introduction.html#learning-how-to-program"><i class="fa fa-check"></i><b>4.3</b> Learning How to Program</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>5</b> R Basics</a><ul>
<li class="chapter" data-level="5.1" data-path="r-basics.html"><a href="r-basics.html#what-is-r"><i class="fa fa-check"></i><b>5.1</b> What is R?</a></li>
<li class="chapter" data-level="5.2" data-path="r-basics.html"><a href="r-basics.html#r-studio-1"><i class="fa fa-check"></i><b>5.2</b> R Studio</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-basics.html"><a href="r-basics.html#console"><i class="fa fa-check"></i><b>5.2.1</b> Console</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-basics.html"><a href="r-basics.html#scripts"><i class="fa fa-check"></i><b>5.2.2</b> Scripts</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-basics.html"><a href="r-basics.html#running-code"><i class="fa fa-check"></i><b>5.2.3</b> Running code</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-basics.html"><a href="r-basics.html#comments"><i class="fa fa-check"></i><b>5.2.4</b> Comments</a></li>
<li class="chapter" data-level="5.2.5" data-path="r-basics.html"><a href="r-basics.html#diagnostics-and-errors"><i class="fa fa-check"></i><b>5.2.5</b> Diagnostics and errors</a></li>
<li class="chapter" data-level="5.2.6" data-path="r-basics.html"><a href="r-basics.html#errors-messages-and-warnings"><i class="fa fa-check"></i><b>5.2.6</b> Errors, Messages, and Warnings</a></li>
<li class="chapter" data-level="5.2.7" data-path="r-basics.html"><a href="r-basics.html#r-environment"><i class="fa fa-check"></i><b>5.2.7</b> R Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-basics.html"><a href="r-basics.html#r-packages-1"><i class="fa fa-check"></i><b>5.3</b> R Packages</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-basics.html"><a href="r-basics.html#installing-packages"><i class="fa fa-check"></i><b>5.3.1</b> Installing Packages</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>5.3.2</b> Loading Packages</a></li>
<li class="chapter" data-level="5.3.3" data-path="r-basics.html"><a href="r-basics.html#challenges"><i class="fa fa-check"></i><b>5.3.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="r-basics.html"><a href="r-basics.html#r-markdown"><i class="fa fa-check"></i><b>5.4</b> R Markdown</a><ul>
<li class="chapter" data-level="5.4.1" data-path="r-basics.html"><a href="r-basics.html#yaml-header"><i class="fa fa-check"></i><b>5.4.1</b> YAML header</a></li>
<li class="chapter" data-level="5.4.2" data-path="r-basics.html"><a href="r-basics.html#markdown"><i class="fa fa-check"></i><b>5.4.2</b> Markdown</a></li>
<li class="chapter" data-level="5.4.3" data-path="r-basics.html"><a href="r-basics.html#code-chunks"><i class="fa fa-check"></i><b>5.4.3</b> Code Chunks</a></li>
<li class="chapter" data-level="5.4.4" data-path="r-basics.html"><a href="r-basics.html#knitting"><i class="fa fa-check"></i><b>5.4.4</b> Knitting</a></li>
<li class="chapter" data-level="5.4.5" data-path="r-basics.html"><a href="r-basics.html#cheatsheets-and-other-resources"><i class="fa fa-check"></i><b>5.4.5</b> Cheatsheets and Other Resources</a></li>
<li class="chapter" data-level="5.4.6" data-path="r-basics.html"><a href="r-basics.html#challenges-1"><i class="fa fa-check"></i><b>5.4.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-syntax.html"><a href="r-syntax.html"><i class="fa fa-check"></i><b>6</b> R Syntax</a><ul>
<li class="chapter" data-level="6.1" data-path="r-syntax.html"><a href="r-syntax.html#variables"><i class="fa fa-check"></i><b>6.1</b> Variables</a><ul>
<li class="chapter" data-level="6.1.1" data-path="r-syntax.html"><a href="r-syntax.html#arithmetic"><i class="fa fa-check"></i><b>6.1.1</b> Arithmetic</a></li>
<li class="chapter" data-level="6.1.2" data-path="r-syntax.html"><a href="r-syntax.html#assigning-variables"><i class="fa fa-check"></i><b>6.1.2</b> Assigning Variables</a></li>
<li class="chapter" data-level="6.1.3" data-path="r-syntax.html"><a href="r-syntax.html#variable-names"><i class="fa fa-check"></i><b>6.1.3</b> Variable Names</a></li>
<li class="chapter" data-level="6.1.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-2"><i class="fa fa-check"></i><b>6.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="r-syntax.html"><a href="r-syntax.html#functions"><i class="fa fa-check"></i><b>6.2</b> Functions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-syntax.html"><a href="r-syntax.html#arguments"><i class="fa fa-check"></i><b>6.2.1</b> Arguments</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-syntax.html"><a href="r-syntax.html#store-function-output"><i class="fa fa-check"></i><b>6.2.2</b> Store Function Output</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-syntax.html"><a href="r-syntax.html#argument-restrictions-and-defaults"><i class="fa fa-check"></i><b>6.2.3</b> Argument Restrictions and Defaults</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-syntax.html"><a href="r-syntax.html#documentation-and-help-files"><i class="fa fa-check"></i><b>6.2.4</b> Documentation and Help Files</a></li>
<li class="chapter" data-level="6.2.5" data-path="r-syntax.html"><a href="r-syntax.html#challenges-3"><i class="fa fa-check"></i><b>6.2.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-syntax.html"><a href="r-syntax.html#data-types"><i class="fa fa-check"></i><b>6.3</b> Data Types</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-syntax.html"><a href="r-syntax.html#whats-that-type"><i class="fa fa-check"></i><b>6.3.1</b> What’s that Type?</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-syntax.html"><a href="r-syntax.html#coercion"><i class="fa fa-check"></i><b>6.3.2</b> Coercion</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-syntax.html"><a href="r-syntax.html#other-objects"><i class="fa fa-check"></i><b>6.3.3</b> Other Objects</a></li>
<li class="chapter" data-level="6.3.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-4"><i class="fa fa-check"></i><b>6.3.4</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html"><i class="fa fa-check"></i><b>7</b> Data Classes and Structures</a><ul>
<li class="chapter" data-level="7.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#vectors"><i class="fa fa-check"></i><b>7.1</b> Vectors</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-vectors"><i class="fa fa-check"></i><b>7.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-a-vector"><i class="fa fa-check"></i><b>7.1.2</b> Naming a Vector</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#calculations-on-vectors"><i class="fa fa-check"></i><b>7.1.3</b> Calculations on Vectors</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#types-of-vectors"><i class="fa fa-check"></i><b>7.1.4</b> Types of Vectors</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercion-1"><i class="fa fa-check"></i><b>7.1.5</b> Coercion</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-5"><i class="fa fa-check"></i><b>7.1.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#lists"><i class="fa fa-check"></i><b>7.2</b> Lists</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-lists"><i class="fa fa-check"></i><b>7.2.1</b> Creating Lists</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-lists"><i class="fa fa-check"></i><b>7.2.2</b> Naming Lists</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#list-structure"><i class="fa fa-check"></i><b>7.2.3</b> List Structure</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-6"><i class="fa fa-check"></i><b>7.2.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a><ul>
<li class="chapter" data-level="7.3.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-factors"><i class="fa fa-check"></i><b>7.3.1</b> Creating Factors</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#summarizing-a-factor"><i class="fa fa-check"></i><b>7.3.2</b> Summarizing a Factor</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#changing-factor-levels"><i class="fa fa-check"></i><b>7.3.3</b> Changing Factor Levels</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors-are-integers"><i class="fa fa-check"></i><b>7.3.4</b> Factors are Integers</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-7"><i class="fa fa-check"></i><b>7.3.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrices"><i class="fa fa-check"></i><b>7.4</b> Matrices</a><ul>
<li class="chapter" data-level="7.4.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-matrices"><i class="fa fa-check"></i><b>7.4.1</b> Creating Matrices</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-dimensions"><i class="fa fa-check"></i><b>7.4.2</b> Matrix Dimensions</a></li>
<li class="chapter" data-level="7.4.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-names"><i class="fa fa-check"></i><b>7.4.3</b> Matrix Names</a></li>
<li class="chapter" data-level="7.4.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenge"><i class="fa fa-check"></i><b>7.4.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#dataframes"><i class="fa fa-check"></i><b>7.5</b> Dataframes</a><ul>
<li class="chapter" data-level="7.5.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-dataframes"><i class="fa fa-check"></i><b>7.5.1</b> Creating Dataframes</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#the-structure-of-dataframes"><i class="fa fa-check"></i><b>7.5.2</b> The Structure of Dataframes</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-dataframes"><i class="fa fa-check"></i><b>7.5.3</b> Naming Dataframes</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercing-dataframes"><i class="fa fa-check"></i><b>7.5.4</b> Coercing Dataframes</a></li>
<li class="chapter" data-level="7.5.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-8"><i class="fa fa-check"></i><b>7.5.5</b> Challenges</a></li>
<li class="chapter" data-level="7.5.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#quiz"><i class="fa fa-check"></i><b>7.5.6</b> Quiz</a></li>
<li class="chapter" data-level="7.5.7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#data-structure-answers"><i class="fa fa-check"></i><b>7.5.7</b> Answers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>8</b> Subsetting</a><ul>
<li class="chapter" data-level="8.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-vectors"><i class="fa fa-check"></i><b>8.1</b> Subsetting Vectors</a><ul>
<li class="chapter" data-level="8.1.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-types"><i class="fa fa-check"></i><b>8.1.1</b> Subsetting Types</a></li>
<li class="chapter" data-level="8.1.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting"><i class="fa fa-check"></i><b>8.1.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.1.3" data-path="subsetting.html"><a href="subsetting.html#challenge-1"><i class="fa fa-check"></i><b>8.1.3</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="subsetting.html"><a href="subsetting.html#subsetting-lists"><i class="fa fa-check"></i><b>8.2</b> Subsetting Lists</a><ul>
<li class="chapter" data-level="8.2.1" data-path="subsetting.html"><a href="subsetting.html#with"><i class="fa fa-check"></i><b>8.2.1</b> With <code>[</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="subsetting.html"><a href="subsetting.html#with-1"><i class="fa fa-check"></i><b>8.2.2</b> With <code>[[</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="subsetting.html"><a href="subsetting.html#with-2"><i class="fa fa-check"></i><b>8.2.3</b> with <code>$</code></a></li>
<li class="chapter" data-level="8.2.4" data-path="subsetting.html"><a href="subsetting.html#challenge-2"><i class="fa fa-check"></i><b>8.2.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="subsetting.html"><a href="subsetting.html#subsetting-matrices"><i class="fa fa-check"></i><b>8.3</b> Subsetting Matrices</a></li>
<li class="chapter" data-level="8.4" data-path="subsetting.html"><a href="subsetting.html#subsetting-dataframes"><i class="fa fa-check"></i><b>8.4</b> Subsetting Dataframes</a><ul>
<li class="chapter" data-level="8.4.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-names-and"><i class="fa fa-check"></i><b>8.4.1</b> Subsetting Names and <code>$</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting-1"><i class="fa fa-check"></i><b>8.4.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.4.3" data-path="subsetting.html"><a href="subsetting.html#list-like-and-matrix-like-subsetting"><i class="fa fa-check"></i><b>8.4.3</b> List-Like and Matrix-Like Subsetting</a></li>
<li class="chapter" data-level="8.4.4" data-path="subsetting.html"><a href="subsetting.html#challenges-9"><i class="fa fa-check"></i><b>8.4.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="subsetting.html"><a href="subsetting.html#sub-assignment"><i class="fa fa-check"></i><b>8.5</b> Sub-assignment</a><ul>
<li class="chapter" data-level="8.5.1" data-path="subsetting.html"><a href="subsetting.html#basics-of-sub-assignment"><i class="fa fa-check"></i><b>8.5.1</b> Basics of Sub-assignment</a></li>
<li class="chapter" data-level="8.5.2" data-path="subsetting.html"><a href="subsetting.html#recycling"><i class="fa fa-check"></i><b>8.5.2</b> Recycling</a></li>
<li class="chapter" data-level="8.5.3" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>8.5.3</b> Applications</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>9</b> Working with Data</a><ul>
<li class="chapter" data-level="9.1" data-path="working-with-data.html"><a href="working-with-data.html#project-workflow"><i class="fa fa-check"></i><b>9.1</b> Project Workflow</a><ul>
<li class="chapter" data-level="9.1.1" data-path="working-with-data.html"><a href="working-with-data.html#store-analyses-in-scripts-not-workspaces."><i class="fa fa-check"></i><b>9.1.1</b> Store Analyses in Scripts, Not Workspaces.</a></li>
<li class="chapter" data-level="9.1.2" data-path="working-with-data.html"><a href="working-with-data.html#working-directories-and-paths"><i class="fa fa-check"></i><b>9.1.2</b> Working Directories and Paths</a></li>
<li class="chapter" data-level="9.1.3" data-path="working-with-data.html"><a href="working-with-data.html#r-projects"><i class="fa fa-check"></i><b>9.1.3</b> R Projects</a></li>
<li class="chapter" data-level="9.1.4" data-path="working-with-data.html"><a href="working-with-data.html#file-organization"><i class="fa fa-check"></i><b>9.1.4</b> File Organization</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="working-with-data.html"><a href="working-with-data.html#introduction-to-data"><i class="fa fa-check"></i><b>9.2</b> Introduction to Data</a><ul>
<li class="chapter" data-level="9.2.1" data-path="working-with-data.html"><a href="working-with-data.html#wheres-my-data"><i class="fa fa-check"></i><b>9.2.1</b> Where’s my data?</a></li>
<li class="chapter" data-level="9.2.2" data-path="working-with-data.html"><a href="working-with-data.html#data-storage"><i class="fa fa-check"></i><b>9.2.2</b> Data Storage</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="working-with-data.html"><a href="working-with-data.html#importing-and-exporting"><i class="fa fa-check"></i><b>9.3</b> Importing and Exporting</a><ul>
<li class="chapter" data-level="9.3.1" data-path="working-with-data.html"><a href="working-with-data.html#importing-data"><i class="fa fa-check"></i><b>9.3.1</b> Importing Data</a></li>
<li class="chapter" data-level="9.3.2" data-path="working-with-data.html"><a href="working-with-data.html#exporting-data"><i class="fa fa-check"></i><b>9.3.2</b> Exporting Data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="working-with-data.html"><a href="working-with-data.html#exploring-data"><i class="fa fa-check"></i><b>9.4</b> Exploring Data</a><ul>
<li class="chapter" data-level="9.4.1" data-path="working-with-data.html"><a href="working-with-data.html#the-gapminder-dataset"><i class="fa fa-check"></i><b>9.4.1</b> The Gapminder Dataset</a></li>
<li class="chapter" data-level="9.4.2" data-path="working-with-data.html"><a href="working-with-data.html#structure-and-dimensions"><i class="fa fa-check"></i><b>9.4.2</b> Structure and Dimensions</a></li>
<li class="chapter" data-level="9.4.3" data-path="working-with-data.html"><a href="working-with-data.html#common-alterations"><i class="fa fa-check"></i><b>9.4.3</b> Common Alterations</a></li>
<li class="chapter" data-level="9.4.4" data-path="working-with-data.html"><a href="working-with-data.html#summary-statistics"><i class="fa fa-check"></i><b>9.4.4</b> Summary statistics</a></li>
<li class="chapter" data-level="9.4.5" data-path="working-with-data.html"><a href="working-with-data.html#review-of-subsetting"><i class="fa fa-check"></i><b>9.4.5</b> Review of Subsetting</a></li>
<li class="chapter" data-level="9.4.6" data-path="working-with-data.html"><a href="working-with-data.html#basic-plotting"><i class="fa fa-check"></i><b>9.4.6</b> Basic Plotting</a></li>
<li class="chapter" data-level="9.4.7" data-path="working-with-data.html"><a href="working-with-data.html#challenges-10"><i class="fa fa-check"></i><b>9.4.7</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>10</b> Data Transformation</a><ul>
<li class="chapter" data-level="10.1" data-path="data-transformation.html"><a href="data-transformation.html#introduction-1"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="10.1.1" data-path="data-transformation.html"><a href="data-transformation.html#tidyverse"><i class="fa fa-check"></i><b>10.1.1</b> <code>tidyverse</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="data-transformation.html"><a href="data-transformation.html#gapminder"><i class="fa fa-check"></i><b>10.1.2</b> Gapminder</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-transformation.html"><a href="data-transformation.html#why-dplyr"><i class="fa fa-check"></i><b>10.1.3</b> Why <code>dplyr</code>?</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-transformation.html"><a href="data-transformation.html#dplyr-functions"><i class="fa fa-check"></i><b>10.2</b> <code>dplyr</code> Functions</a><ul>
<li class="chapter" data-level="10.2.1" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>10.2.1</b> Select Columns with <code>select</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="data-transformation.html"><a href="data-transformation.html#the-pipe"><i class="fa fa-check"></i><b>10.2.2</b> The Pipe</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>10.2.3</b> Filter Rows with <code>filter</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="data-transformation.html"><a href="data-transformation.html#calculate-across-groups-with-group_by"><i class="fa fa-check"></i><b>10.2.4</b> Calculate Across Groups with <code>group_by</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="data-transformation.html"><a href="data-transformation.html#summarize-across-groups-with-summarize"><i class="fa fa-check"></i><b>10.2.5</b> Summarize Across Groups with <code>summarize</code></a></li>
<li class="chapter" data-level="10.2.6" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>10.2.6</b> Add New Variables with <code>mutate</code></a></li>
<li class="chapter" data-level="10.2.7" data-path="data-transformation.html"><a href="data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>10.2.7</b> Arrange Rows with <code>arrange</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-transformation.html"><a href="data-transformation.html#dplyr-and-non-standard-evaluation"><i class="fa fa-check"></i><b>10.3</b> <code>dplyr</code> and “Non-Standard Evaluation”</a></li>
<li class="chapter" data-level="10.4" data-path="data-transformation.html"><a href="data-transformation.html#challenges-11"><i class="fa fa-check"></i><b>10.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>11</b> Tidying Data</a><ul>
<li class="chapter" data-level="11.1" data-path="tidying-data.html"><a href="tidying-data.html#wide-vs.long-formats"><i class="fa fa-check"></i><b>11.1</b> Wide vs. Long Formats</a></li>
<li class="chapter" data-level="11.2" data-path="tidying-data.html"><a href="tidying-data.html#tidying-the-gapminder-data"><i class="fa fa-check"></i><b>11.2</b> Tidying the Gapminder Data</a></li>
<li class="chapter" data-level="11.3" data-path="tidying-data.html"><a href="tidying-data.html#tidyr-functions"><i class="fa fa-check"></i><b>11.3</b> <code>tidyr</code> Functions</a><ul>
<li class="chapter" data-level="11.3.1" data-path="tidying-data.html"><a href="tidying-data.html#gather"><i class="fa fa-check"></i><b>11.3.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="11.3.2" data-path="tidying-data.html"><a href="tidying-data.html#separate"><i class="fa fa-check"></i><b>11.3.2</b> <code>separate</code></a></li>
<li class="chapter" data-level="11.3.3" data-path="tidying-data.html"><a href="tidying-data.html#spread"><i class="fa fa-check"></i><b>11.3.3</b> <code>spread</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="tidying-data.html"><a href="tidying-data.html#more-tidyverse"><i class="fa fa-check"></i><b>11.4</b> More <code>tidyverse</code></a></li>
<li class="chapter" data-level="11.5" data-path="tidying-data.html"><a href="tidying-data.html#challenges-12"><i class="fa fa-check"></i><b>11.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>12</b> Relational Data</a><ul>
<li class="chapter" data-level="12.1" data-path="relational-data.html"><a href="relational-data.html#why-relational-data"><i class="fa fa-check"></i><b>12.1</b> Why Relational Data</a></li>
<li class="chapter" data-level="12.2" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>12.2</b> Keys</a></li>
<li class="chapter" data-level="12.3" data-path="relational-data.html"><a href="relational-data.html#joins"><i class="fa fa-check"></i><b>12.3</b> Joins</a></li>
<li class="chapter" data-level="12.4" data-path="relational-data.html"><a href="relational-data.html#defining-keys"><i class="fa fa-check"></i><b>12.4</b> Defining Keys</a></li>
<li class="chapter" data-level="12.5" data-path="relational-data.html"><a href="relational-data.html#duplicate-keys"><i class="fa fa-check"></i><b>12.5</b> Duplicate Keys</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>13</b> Plotting</a><ul>
<li class="chapter" data-level="13.1" data-path="plotting.html"><a href="plotting.html#the-dataset"><i class="fa fa-check"></i><b>13.1</b> The Dataset</a></li>
<li class="chapter" data-level="13.2" data-path="plotting.html"><a href="plotting.html#r-base-graphics"><i class="fa fa-check"></i><b>13.2</b> R Base Graphics</a><ul>
<li class="chapter" data-level="13.2.1" data-path="plotting.html"><a href="plotting.html#scatter-and-line-plots"><i class="fa fa-check"></i><b>13.2.1</b> Scatter and Line Plots</a></li>
<li class="chapter" data-level="13.2.2" data-path="plotting.html"><a href="plotting.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>13.2.2</b> Histograms and Density Plots</a></li>
<li class="chapter" data-level="13.2.3" data-path="plotting.html"><a href="plotting.html#labels"><i class="fa fa-check"></i><b>13.2.3</b> Labels</a></li>
<li class="chapter" data-level="13.2.4" data-path="plotting.html"><a href="plotting.html#axis-and-size-scaling"><i class="fa fa-check"></i><b>13.2.4</b> Axis and Size Scaling</a></li>
<li class="chapter" data-level="13.2.5" data-path="plotting.html"><a href="plotting.html#graphical-parameters"><i class="fa fa-check"></i><b>13.2.5</b> Graphical Parameters</a></li>
<li class="chapter" data-level="13.2.6" data-path="plotting.html"><a href="plotting.html#annotations-reference-lines-and-legends"><i class="fa fa-check"></i><b>13.2.6</b> Annotations, Reference Lines, and Legends</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="plotting.html"><a href="plotting.html#ggplot2"><i class="fa fa-check"></i><b>13.3</b> ggplot2</a><ul>
<li class="chapter" data-level="13.3.1" data-path="plotting.html"><a href="plotting.html#grammar"><i class="fa fa-check"></i><b>13.3.1</b> Grammar</a></li>
<li class="chapter" data-level="13.3.2" data-path="plotting.html"><a href="plotting.html#anatomy-of-aes"><i class="fa fa-check"></i><b>13.3.2</b> Anatomy of <code>aes</code></a></li>
<li class="chapter" data-level="13.3.3" data-path="plotting.html"><a href="plotting.html#layers"><i class="fa fa-check"></i><b>13.3.3</b> Layers</a></li>
<li class="chapter" data-level="13.3.4" data-path="plotting.html"><a href="plotting.html#labels-1"><i class="fa fa-check"></i><b>13.3.4</b> Labels</a></li>
<li class="chapter" data-level="13.3.5" data-path="plotting.html"><a href="plotting.html#transformations-and-stats"><i class="fa fa-check"></i><b>13.3.5</b> Transformations and Stats</a></li>
<li class="chapter" data-level="13.3.6" data-path="plotting.html"><a href="plotting.html#facets"><i class="fa fa-check"></i><b>13.3.6</b> Facets</a></li>
<li class="chapter" data-level="13.3.7" data-path="plotting.html"><a href="plotting.html#putting-everything-together"><i class="fa fa-check"></i><b>13.3.7</b> Putting Everything Together</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="plotting.html"><a href="plotting.html#saving-plots"><i class="fa fa-check"></i><b>13.4</b> Saving plots</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-inferences.html"><a href="statistical-inferences.html"><i class="fa fa-check"></i><b>14</b> Statistical Inferences</a><ul>
<li class="chapter" data-level="14.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-distributions"><i class="fa fa-check"></i><b>14.1</b> Statistical Distributions</a><ul>
<li class="chapter" data-level="14.1.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#sampling-and-simulation"><i class="fa fa-check"></i><b>14.1.1</b> Sampling and Simulation</a></li>
<li class="chapter" data-level="14.1.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#random-seeds"><i class="fa fa-check"></i><b>14.1.2</b> Random Seeds</a></li>
<li class="chapter" data-level="14.1.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-13"><i class="fa fa-check"></i><b>14.1.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#inferences-and-regressions"><i class="fa fa-check"></i><b>14.2</b> Inferences and Regressions</a><ul>
<li class="chapter" data-level="14.2.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-tests"><i class="fa fa-check"></i><b>14.2.1</b> Statistical Tests</a></li>
<li class="chapter" data-level="14.2.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regressions-and-linear-models"><i class="fa fa-check"></i><b>14.2.2</b> Regressions and Linear Models</a></li>
<li class="chapter" data-level="14.2.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regression-output"><i class="fa fa-check"></i><b>14.2.3</b> Regression Output</a></li>
<li class="chapter" data-level="14.2.4" data-path="statistical-inferences.html"><a href="statistical-inferences.html#interactions"><i class="fa fa-check"></i><b>14.2.4</b> Interactions</a></li>
<li class="chapter" data-level="14.2.5" data-path="statistical-inferences.html"><a href="statistical-inferences.html#formatting-regression-tables"><i class="fa fa-check"></i><b>14.2.5</b> Formatting Regression Tables</a></li>
<li class="chapter" data-level="14.2.6" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-14"><i class="fa fa-check"></i><b>14.2.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>15</b> Strings and Regular Expressions</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-basics"><i class="fa fa-check"></i><b>15.1</b> String Basics</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#creating-strings"><i class="fa fa-check"></i><b>15.1.1</b> Creating Strings</a></li>
<li class="chapter" data-level="15.1.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-and-special-characters"><i class="fa fa-check"></i><b>15.1.2</b> Escape and Special Characters</a></li>
<li class="chapter" data-level="15.1.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-length"><i class="fa fa-check"></i><b>15.1.3</b> String length</a></li>
<li class="chapter" data-level="15.1.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#combining-strings"><i class="fa fa-check"></i><b>15.1.4</b> Combining strings</a></li>
<li class="chapter" data-level="15.1.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#subsetting-strings"><i class="fa fa-check"></i><b>15.1.5</b> Subsetting strings</a></li>
<li class="chapter" data-level="15.1.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#locales"><i class="fa fa-check"></i><b>15.1.6</b> Locales</a></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-15"><i class="fa fa-check"></i>Challenges</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>15.2</b> Regular expressions</a><ul>
<li class="chapter" data-level="15.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#basic-matches"><i class="fa fa-check"></i><b>15.2.1</b> Basic matches</a></li>
<li class="chapter" data-level="15.2.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-characters"><i class="fa fa-check"></i><b>15.2.2</b> Escape Characters</a></li>
<li class="chapter" data-level="15.2.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>15.2.3</b> Anchors</a></li>
<li class="chapter" data-level="15.2.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>15.2.4</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="15.2.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#repetition"><i class="fa fa-check"></i><b>15.2.5</b> Repetition</a></li>
<li class="chapter" data-level="15.2.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regex-resources"><i class="fa fa-check"></i><b>15.2.6</b> Regex Resources</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#common-tools"><i class="fa fa-check"></i><b>15.3</b> Common Tools</a><ul>
<li class="chapter" data-level="15.3.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#detect-matches"><i class="fa fa-check"></i><b>15.3.1</b> Detect matches</a></li>
<li class="chapter" data-level="15.3.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extract-matches"><i class="fa fa-check"></i><b>15.3.2</b> Extract matches</a></li>
<li class="chapter" data-level="15.3.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-matches"><i class="fa fa-check"></i><b>15.3.3</b> Replacing matches</a></li>
<li class="chapter" data-level="15.3.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting"><i class="fa fa-check"></i><b>15.3.4</b> Splitting</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#other-types-of-patterns"><i class="fa fa-check"></i><b>15.4</b> Other types of patterns</a><ul>
<li class="chapter" data-level="15.4.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#stringi"><i class="fa fa-check"></i><b>15.4.1</b> stringi</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#acknowledgments-5"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>16</b> Programming in R</a><ul>
<li class="chapter" data-level="16.1" data-path="programming-in-r.html"><a href="programming-in-r.html#conditional-flow"><i class="fa fa-check"></i><b>16.1</b> Conditional Flow</a><ul>
<li class="chapter" data-level="16.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#multiple-conditions"><i class="fa fa-check"></i><b>16.1.1</b> Multiple Conditions</a></li>
<li class="chapter" data-level="16.1.2" data-path="programming-in-r.html"><a href="programming-in-r.html#complex-statements"><i class="fa fa-check"></i><b>16.1.2</b> Complex Statements</a></li>
<li class="chapter" data-level="16.1.3" data-path="programming-in-r.html"><a href="programming-in-r.html#code-style"><i class="fa fa-check"></i><b>16.1.3</b> Code Style</a></li>
<li class="chapter" data-level="16.1.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-vs.-if_else"><i class="fa fa-check"></i><b>16.1.4</b> <code>if</code> vs. <code>if_else</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="programming-in-r.html"><a href="programming-in-r.html#functions-1"><i class="fa fa-check"></i><b>16.2</b> Functions</a><ul>
<li class="chapter" data-level="16.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#why-write-functions"><i class="fa fa-check"></i><b>16.2.1</b> Why Write Functions?</a></li>
<li class="chapter" data-level="16.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>16.2.2</b> Anatomy of a Function</a></li>
<li class="chapter" data-level="16.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-a-function"><i class="fa fa-check"></i><b>16.2.3</b> Writing a Function</a></li>
<li class="chapter" data-level="16.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#using-a-function"><i class="fa fa-check"></i><b>16.2.4</b> Using a Function</a></li>
<li class="chapter" data-level="16.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#variable-scope"><i class="fa fa-check"></i><b>16.2.5</b> Variable Scope</a></li>
<li class="chapter" data-level="16.2.6" data-path="programming-in-r.html"><a href="programming-in-r.html#arguments-1"><i class="fa fa-check"></i><b>16.2.6</b> Arguments</a></li>
<li class="chapter" data-level="16.2.7" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-21"><i class="fa fa-check"></i><b>16.2.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="programming-in-r.html"><a href="programming-in-r.html#iteration"><i class="fa fa-check"></i><b>16.3</b> Iteration</a><ul>
<li class="chapter" data-level="16.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#vectorized-functions"><i class="fa fa-check"></i><b>16.3.1</b> Vectorized Functions</a></li>
<li class="chapter" data-level="16.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loops"><i class="fa fa-check"></i><b>16.3.2</b> For-loops</a></li>
<li class="chapter" data-level="16.3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-22"><i class="fa fa-check"></i><b>16.3.3</b> Challenges</a></li>
<li class="chapter" data-level="16.3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#functional-programming-and-map"><i class="fa fa-check"></i><b>16.3.4</b> Functional Programming and <code>map</code></a></li>
<li class="chapter" data-level="16.3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-23"><i class="fa fa-check"></i><b>16.3.5</b> Challenges</a></li>
<li class="chapter" data-level="16.3.6" data-path="programming-in-r.html"><a href="programming-in-r.html#scoped-verbs"><i class="fa fa-check"></i><b>16.3.6</b> Scoped Verbs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html"><i class="fa fa-check"></i><b>17</b> Collecting Data from the Web</a><ul>
<li class="chapter" data-level="17.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#introduction-2"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#web-apis"><i class="fa fa-check"></i><b>17.2</b> Web APIs</a><ul>
<li class="chapter" data-level="17.2.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#some-basic-terminology"><i class="fa fa-check"></i><b>17.2.1</b> Some Basic Terminology</a></li>
<li class="chapter" data-level="17.2.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#how-do-get-requests-work"><i class="fa fa-check"></i><b>17.2.2</b> How Do GET Requests Work?</a></li>
<li class="chapter" data-level="17.2.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-apis"><i class="fa fa-check"></i><b>17.2.3</b> Finding APIs</a></li>
<li class="chapter" data-level="17.2.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#getting-api-access"><i class="fa fa-check"></i><b>17.2.4</b> Getting API Access</a></li>
<li class="chapter" data-level="17.2.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-apis-in-r"><i class="fa fa-check"></i><b>17.2.5</b> Using APIs in R</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#collecting-twitter-data-with-rtweet"><i class="fa fa-check"></i><b>17.3</b> Collecting Twitter Data with RTweet</a><ul>
<li class="chapter" data-level="17.3.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#setting-up-rtweet"><i class="fa fa-check"></i><b>17.3.1</b> Setting up <code>RTweet</code></a></li>
<li class="chapter" data-level="17.3.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#uchicago-political-science-prof-tweets"><i class="fa fa-check"></i><b>17.3.2</b> UChicago Political Science Prof Tweets</a></li>
<li class="chapter" data-level="17.3.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#hashtags-and-text-strings"><i class="fa fa-check"></i><b>17.3.3</b> Hashtags and Text Strings</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#writing-api-queries"><i class="fa fa-check"></i><b>17.4</b> Writing API Queries</a><ul>
<li class="chapter" data-level="17.4.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#constructing-the-api-get-request"><i class="fa fa-check"></i><b>17.4.1</b> Constructing the API GET Request</a></li>
<li class="chapter" data-level="17.4.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#parsing-the-response"><i class="fa fa-check"></i><b>17.4.2</b> Parsing the response</a></li>
<li class="chapter" data-level="17.4.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#iteration-through-results-pager"><i class="fa fa-check"></i><b>17.4.3</b> Iteration through results pager</a></li>
<li class="chapter" data-level="17.4.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#visualizing-results"><i class="fa fa-check"></i><b>17.4.4</b> Visualizing Results</a></li>
<li class="chapter" data-level="17.4.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#more-resources-1"><i class="fa fa-check"></i><b>17.4.5</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#webscraping"><i class="fa fa-check"></i><b>17.5</b> Webscraping</a><ul>
<li class="chapter" data-level="17.5.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#whats-a-website"><i class="fa fa-check"></i><b>17.5.1</b> What’s a website?</a></li>
<li class="chapter" data-level="17.5.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#html"><i class="fa fa-check"></i><b>17.5.2</b> HTML</a></li>
<li class="chapter" data-level="17.5.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#css"><i class="fa fa-check"></i><b>17.5.3</b> CSS</a></li>
<li class="chapter" data-level="17.5.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-elements-with-selector-gadget"><i class="fa fa-check"></i><b>17.5.4</b> Finding Elements with Selector Gadget</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#scraping-presidential-statements"><i class="fa fa-check"></i><b>17.6</b> Scraping Presidential Statements</a><ul>
<li class="chapter" data-level="17.6.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-rvest-to-read-html"><i class="fa fa-check"></i><b>17.6.1</b> Using <code>RVest</code> to Read HTML</a></li>
<li class="chapter" data-level="17.6.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#find-page-elements"><i class="fa fa-check"></i><b>17.6.2</b> Find Page Elements</a></li>
<li class="chapter" data-level="17.6.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#get-attributes-and-text-of-elements"><i class="fa fa-check"></i><b>17.6.3</b> Get Attributes and Text of Elements</a></li>
<li class="chapter" data-level="17.6.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#lets-do-this."><i class="fa fa-check"></i><b>17.6.4</b> Let’s DO this.</a></li>
<li class="chapter" data-level="17.6.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#challenge-1-make-a-function"><i class="fa fa-check"></i><b>17.6.5</b> Challenge 1: Make a function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>18</b> Text Analysis</a><ul>
<li class="chapter" data-level="18.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing"><i class="fa fa-check"></i><b>18.1</b> Preprocessing</a><ul>
<li class="chapter" data-level="18.1.1" data-path="text-analysis.html"><a href="text-analysis.html#from-words-to-numbers"><i class="fa fa-check"></i><b>18.1.1</b> From Words to Numbers</a></li>
<li class="chapter" data-level="18.1.2" data-path="text-analysis.html"><a href="text-analysis.html#exploring-the-dtm"><i class="fa fa-check"></i><b>18.1.2</b> Exploring the DTM</a></li>
<li class="chapter" data-level="18.1.3" data-path="text-analysis.html"><a href="text-analysis.html#exporting-the-dtm"><i class="fa fa-check"></i><b>18.1.3</b> Exporting the DTM</a></li>
<li class="chapter" data-level="18.1.4" data-path="text-analysis.html"><a href="text-analysis.html#challenges-24"><i class="fa fa-check"></i><b>18.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="text-analysis.html"><a href="text-analysis.html#sentiment-analysis-and-dictionary-methods"><i class="fa fa-check"></i><b>18.2</b> Sentiment Analysis and Dictionary Methods</a><ul>
<li class="chapter" data-level="18.2.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-and-setup"><i class="fa fa-check"></i><b>18.2.1</b> Preprocessing and Setup</a></li>
<li class="chapter" data-level="18.2.2" data-path="text-analysis.html"><a href="text-analysis.html#scoring-the-songs"><i class="fa fa-check"></i><b>18.2.2</b> Scoring the songs</a></li>
<li class="chapter" data-level="18.2.3" data-path="text-analysis.html"><a href="text-analysis.html#challenges-25"><i class="fa fa-check"></i><b>18.2.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="text-analysis.html"><a href="text-analysis.html#distinctive-words"><i class="fa fa-check"></i><b>18.3</b> Distinctive Words</a><ul>
<li class="chapter" data-level="18.3.1" data-path="text-analysis.html"><a href="text-analysis.html#unique-usage"><i class="fa fa-check"></i><b>18.3.1</b> Unique usage</a></li>
<li class="chapter" data-level="18.3.2" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-frequences"><i class="fa fa-check"></i><b>18.3.2</b> Differences in frequences</a></li>
<li class="chapter" data-level="18.3.3" data-path="text-analysis.html"><a href="text-analysis.html#differences-in-averages"><i class="fa fa-check"></i><b>18.3.3</b> Differences in averages</a></li>
<li class="chapter" data-level="18.3.4" data-path="text-analysis.html"><a href="text-analysis.html#difference-in-averages-adjustment"><i class="fa fa-check"></i><b>18.3.4</b> Difference in averages, adjustment</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="text-analysis.html"><a href="text-analysis.html#structural-topic-models"><i class="fa fa-check"></i><b>18.4</b> Structural Topic Models</a><ul>
<li class="chapter" data-level="18.4.1" data-path="text-analysis.html"><a href="text-analysis.html#preprocessing-1"><i class="fa fa-check"></i><b>18.4.1</b> Preprocessing</a></li>
<li class="chapter" data-level="18.4.2" data-path="text-analysis.html"><a href="text-analysis.html#estimate-model"><i class="fa fa-check"></i><b>18.4.2</b> Estimate Model</a></li>
<li class="chapter" data-level="18.4.3" data-path="text-analysis.html"><a href="text-analysis.html#interprete-model"><i class="fa fa-check"></i><b>18.4.3</b> Interprete Model</a></li>
<li class="chapter" data-level="18.4.4" data-path="text-analysis.html"><a href="text-analysis.html#analyze-topics"><i class="fa fa-check"></i><b>18.4.4</b> Analyze topics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>19</b> Git and Github</a><ul>
<li class="chapter" data-level="19.1" data-path="git-and-github.html"><a href="git-and-github.html#starting-with-git"><i class="fa fa-check"></i><b>19.1</b> Starting with Git</a><ul>
<li class="chapter" data-level="19.1.1" data-path="git-and-github.html"><a href="git-and-github.html#creating-a-repository"><i class="fa fa-check"></i><b>19.1.1</b> Creating a repository</a></li>
<li class="chapter" data-level="19.1.2" data-path="git-and-github.html"><a href="git-and-github.html#git-add-tracks-files"><i class="fa fa-check"></i><b>19.1.2</b> <code>git add</code>: tracks files</a></li>
<li class="chapter" data-level="19.1.3" data-path="git-and-github.html"><a href="git-and-github.html#git-commit-saves-files"><i class="fa fa-check"></i><b>19.1.3</b> <code>git commit</code>: saves files</a></li>
<li class="chapter" data-level="19.1.4" data-path="git-and-github.html"><a href="git-and-github.html#git-push-moves-changes-from-one-branch-to-another."><i class="fa fa-check"></i><b>19.1.4</b> <code>git push</code>: moves changes from one branch to another.</a></li>
<li class="chapter" data-level="19.1.5" data-path="git-and-github.html"><a href="git-and-github.html#challenge-1-5"><i class="fa fa-check"></i><b>19.1.5</b> Challenge 1</a></li>
<li class="chapter" data-level="19.1.6" data-path="git-and-github.html"><a href="git-and-github.html#ignoring-things"><i class="fa fa-check"></i><b>19.1.6</b> Ignoring Things</a></li>
<li class="chapter" data-level="19.1.7" data-path="git-and-github.html"><a href="git-and-github.html#challenge-2-5"><i class="fa fa-check"></i><b>19.1.7</b> Challenge 2</a></li>
<li class="chapter" data-level="19.1.8" data-path="git-and-github.html"><a href="git-and-github.html#pulling-syncing"><i class="fa fa-check"></i><b>19.1.8</b> Pulling / Syncing</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="git-and-github.html"><a href="git-and-github.html#collaborating"><i class="fa fa-check"></i><b>19.2</b> Collaborating</a><ul>
<li class="chapter" data-level="19.2.1" data-path="git-and-github.html"><a href="git-and-github.html#fork-pull-model"><i class="fa fa-check"></i><b>19.2.1</b> Fork &amp; Pull Model</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Assignments and Projects</b></span></li>
<li class="chapter" data-level="20" data-path="assignments-1.html"><a href="assignments-1.html"><i class="fa fa-check"></i><b>20</b> Assignments</a><ul>
<li class="chapter" data-level="20.1" data-path="assignments-1.html"><a href="assignments-1.html#assignment-1-solutions"><i class="fa fa-check"></i><b>20.1</b> Assignment 1 Solutions</a></li>
<li class="chapter" data-level="20.2" data-path="assignments-1.html"><a href="assignments-1.html#assignment-2-solutions"><i class="fa fa-check"></i><b>20.2</b> Assignment 2 Solutions</a></li>
<li class="chapter" data-level="20.3" data-path="assignments-1.html"><a href="assignments-1.html#assignment-3-solutions"><i class="fa fa-check"></i><b>20.3</b> Assignment 3 Solutions</a></li>
<li class="chapter" data-level="20.4" data-path="assignments-1.html"><a href="assignments-1.html#assignment-4-solutions"><i class="fa fa-check"></i><b>20.4</b> Assignment 4 Solutions</a></li>
<li class="chapter" data-level="20.5" data-path="assignments-1.html"><a href="assignments-1.html#assignment-5-solutions"><i class="fa fa-check"></i><b>20.5</b> Assignment 5 Solutions</a></li>
<li class="chapter" data-level="20.6" data-path="assignments-1.html"><a href="assignments-1.html#assignment-6-solutions"><i class="fa fa-check"></i><b>20.6</b> Assignment 6 Solutions</a></li>
<li class="chapter" data-level="20.7" data-path="assignments-1.html"><a href="assignments-1.html#assignment-7-solutions"><i class="fa fa-check"></i><b>20.7</b> Assignment 7 Solutions</a><ul>
<li class="chapter" data-level="" data-path="assignments-1.html"><a href="assignments-1.html#solution"><i class="fa fa-check"></i>Solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="final-projects.html"><a href="final-projects.html"><i class="fa fa-check"></i><b>21</b> Final Projects</a></li>
<li class="part"><span><b>IV Resources</b></span></li>
<li class="chapter" data-level="22" data-path="cheat-sheets-and-guides.html"><a href="cheat-sheets-and-guides.html"><i class="fa fa-check"></i><b>22</b> Cheat Sheets and Guides</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PLSC 31101: Computational Tools for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="assignments-1" class="section level1">
<h1><span class="header-section-number">Chapter 20</span> Assignments</h1>

<div id="assignment-1-solutions" class="section level2">
<h2><span class="header-section-number">20.1</span> Assignment 1 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Oct 3, 2019.</li>
<li><strong>Due</strong>: Oct 10, 2019 at 12:29pm.</li>
</ul>
<p>For this assignment, you will confirm that everything is installed and setup correctly, and you understand how to interact with R Studio and R Markdown.</p>
<p>Your answers (to this assignment only) will be posted on our <a href="https://github.com/rochelleterman/plsc-31101">course website</a>.</p>
<div id="using-r-markdown" class="section level4 unnumbered">
<h4>1. Using R Markdown</h4>
<p>In the space below, insert a picture of yourself, and complete the following information:</p>
<div class="figure">
<img src="img/dany.jpg" />

</div>
<ol style="list-style-type: decimal">
<li><strong>Name</strong>: Daenerys Targaryen</li>
<li><strong>Department and degree program</strong>: Queen of the Andals and the First Men, Protector of the Seven Kingdoms, the Mother of Dragons, the Khaleesi of the Great Grass Sea, the Unburnt, the Breaker of Chains.</li>
<li><strong>Year in the program</strong>: First.</li>
<li><strong>One-sentence description of academic interests</strong>: I am interested in slavery, intercontinental conflict, and pyrology.</li>
<li><strong>Some non-academic interests</strong>: Dragons, Jon Snow, eating raw hearts.</li>
<li><strong>R version installed on your computer</strong> (Open a command line window (‘terminal’ or, on windows, ‘git bash’), and enter the following command <code>R --version</code>): 3.6.1</li>
<li><strong>R Studio version installed on your computer</strong> (Open RStudio and, in the navigation menu, click on RStudio –&gt; About RStudio): 1.1.456</li>
<li><strong>Primary computer operating system</strong> (Mac OS, Windows, Linux, etc): Mac OS 10.13.6.</li>
<li><strong>Programming experience</strong> (How would you describe your previous programming experience?): None.</li>
</ol>
</div>
<div id="checking-packages" class="section level4 unnumbered">
<h4>2. Checking packages</h4>
<p>Create an R chunk below, where you load the <code>tidyverse</code> library.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="knit-and-submit." class="section level4 unnumbered">
<h4>3. Knit and submit.</h4>
<p>Knit the R Markdown file to PDF. Submit <strong>BOTH</strong> the .Rmd file and the PDF file to Canvas.</p>
<p>If you get an error trying to knit, read the error and make sure that your R code is correct. If that doesn’t work, confirm you’ve correctly installed the requisite packages (<code>knit</code>, <code>rmarkdown</code>). If you still can’t get it to work, paste the error on Canvas.</p>

</div>
</div>
<div id="assignment-2-solutions" class="section level2">
<h2><span class="header-section-number">20.2</span> Assignment 2 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Oct 10, 2019.</li>
<li><strong>Due</strong>: Oct 17, 2019 at 12:29pm.</li>
</ul>
<p>For this assignment, you’ll use what you know about R syntax and data structures to perform some common data operations.</p>
<div id="basics" class="section level4 unnumbered">
<h4>1. Basics</h4>
<p><strong>1.1 Fix the following syntax errors. Enter your corrected code in the second chunk.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 1</span>
states &lt;-<span class="st"> </span>(<span class="st">&quot;California&quot;</span>, <span class="st">&quot;Illinois&quot;</span>, <span class="st">&quot;Ohio&quot;</span>)

<span class="co"># 2</span>
countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Iran&quot;</span>, <span class="st">&quot;Indonesia,&quot;</span> <span class="st">&quot;India&quot;</span>, <span class="st">&quot;Italy&quot;</span>)

<span class="co"># 3</span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">21</span>, <span class="dv">66</span>, <span class="dv">35</span>)
                 <span class="dt">party =</span> <span class="kw">c</span>(<span class="st">&#39;rep&#39;</span>, <span class="st">&#39;dem&#39;</span>, <span class="st">&#39;rep&#39;</span>))

<span class="co"># 4</span>
my<span class="op">-</span>vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apples&quot;</span>, <span class="st">&quot;oranges&quot;</span>, <span class="st">&quot;kiwis&quot;</span>)

<span class="co"># 5</span>
artists &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">names =</span> <span class="kw">c</span>(<span class="st">&quot;Picasso&quot;</span>, <span class="st">&quot;Kahlo&quot;</span>,
                <span class="dt">genre =</span> <span class="kw">c</span>(<span class="st">&quot;cubist&quot;</span>, <span class="st">&quot;surrealist&quot;</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># PUT YOUR CORRECTED CODE HERE</span>

<span class="co"># 1</span>
states &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;California&quot;</span>, <span class="st">&quot;Illinois&quot;</span>, <span class="st">&quot;Ohio&quot;</span>)

<span class="co"># 2</span>
countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Iran&quot;</span>, <span class="st">&quot;Indonesia&quot;</span>, <span class="st">&quot;India&quot;</span>, <span class="st">&quot;Italy&quot;</span>)

<span class="co"># 3</span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">21</span>, <span class="dv">66</span>, <span class="dv">35</span>),
                 <span class="dt">party =</span> <span class="kw">c</span>(<span class="st">&#39;rep&#39;</span>, <span class="st">&#39;dem&#39;</span>, <span class="st">&#39;rep&#39;</span>))

<span class="co"># 4</span>
my_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;apples&quot;</span>, <span class="st">&quot;oranges&quot;</span>, <span class="st">&quot;kiwis&quot;</span>)

<span class="co"># 5</span>
artists &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">names =</span> <span class="kw">c</span>(<span class="st">&quot;Picasso&quot;</span>, <span class="st">&quot;Kahlo&quot;</span>),
                <span class="dt">genre =</span> <span class="kw">c</span>(<span class="st">&quot;cubist&quot;</span>, <span class="st">&quot;surrealist&quot;</span>))</code></pre></div>
<p><strong>1.2 How many arguments does the <code>order()</code> function pass? What are they?</strong></p>
</div>
<div id="vectors-and-lists" class="section level4 unnumbered">
<h4>2. Vectors and Lists</h4>
<p><strong>2.1 Create three vectors:</strong></p>
<ul>
<li><p>a character vector, <code>titles</code>, that contain the names of 3 of your favorite movies</p></li>
<li><p>a numeric vector, <code>year</code>, that contains the years in which those movies were produced</p></li>
<li><p>a boolean vector <code>bechdel</code> that TRUE/FALSE according to whether those movies pass the <a href="http://bechdeltest.com/">bechdel test</a></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">titles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dog Day Afternoon&quot;</span>, <span class="st">&quot;The Graduate&quot;</span>, <span class="st">&quot;Breakfast Club&quot;</span>)
year &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1975</span>, <span class="dv">1967</span>, <span class="dv">1985</span>)
bechdel &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</code></pre></div>
<p><strong>2.2 Put those three vectors in a list, called <code>movies</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span><span class="kw">list</span>(titles, year, bechdel)</code></pre></div>
<p><strong>2.3 Print the structure of the list <code>movies</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(movies)
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : chr [1:3] &quot;Dog Day Afternoon&quot; &quot;The Graduate&quot; &quot;Breakfast Club&quot;</span>
<span class="co">#&gt;  $ : num [1:3] 1975 1967 1985</span>
<span class="co">#&gt;  $ : logi [1:3] TRUE FALSE TRUE</span></code></pre></div>
</div>
<div id="factors-1" class="section level4 unnumbered">
<h4>3. Factors</h4>
<p><strong>3.1 Here’s some code that prints a simple barplot:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;low&quot;</span>,<span class="st">&quot;medium&quot;</span>,<span class="st">&quot;high&quot;</span>,<span class="st">&quot;medium&quot;</span>,<span class="st">&quot;high&quot;</span>,<span class="st">&quot;medium&quot;</span>))
<span class="kw">table</span>(f)
<span class="co">#&gt; f</span>
<span class="co">#&gt;   high    low medium </span>
<span class="co">#&gt;      2      1      3</span>
<span class="kw">barplot</span>(<span class="kw">table</span>(f))</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-584-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>How would you relevel <code>f</code> to be in the correct order?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="kw">factor</span>(f, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>))

<span class="co"># Test your code</span>
<span class="kw">barplot</span>(<span class="kw">table</span>(f))</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-585-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="dataframes-1" class="section level4 unnumbered">
<h4>4. Dataframes</h4>
<p><strong>4.1 Coerce the <code>movies</code> object you made above from a list to a dataframe. Call it <code>movies_df</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(movies)</code></pre></div>
<p><strong>4.2 Add appropriate column names to <code>movies_df</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(movies) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;film&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;bechtel&quot;</span>)</code></pre></div>

</div>
</div>
<div id="assignment-3-solutions" class="section level2">
<h2><span class="header-section-number">20.3</span> Assignment 3 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Oct 17, 2019.</li>
<li><strong>Due</strong>: Oct 24, 2019 at 12:29pm.</li>
</ul>
<p>For this assignment, you’ll be working on some real life data! I’ve prepared for your a basic country-year dataset, with the following variables:</p>
<ul>
<li>Country name</li>
<li>Country numerical code</li>
<li>Year</li>
<li>UN Ideal point</li>
<li>Polity2 score of regime type (from Polity VI)</li>
<li>Physical Integrity Rights score (from CIRI dataset)</li>
<li>Speech Rights score (from CIRI)</li>
<li>GDP per capita (from World Bank)</li>
<li>Population (from World Bank)</li>
<li>Political Terror Scale using Amnesty International reports (from Political Terror Scale project)</li>
<li>Composite Index of Military Capabilities (Correlates of War)</li>
<li>Region</li>
</ul>
<div id="r-projects-and-importing" class="section level4 unnumbered">
<h4>1. R Projects and Importing</h4>
<p><strong>1.1 Using <code>getwd()</code>, print your working directory below.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()
<span class="co">#&gt; [1] &quot;/Users/rochelleterman/Desktop/course-site&quot;</span></code></pre></div>
<p><strong>1.2 Read <code>country-year.csv</code> into R, using a relative path. Store it in an object called <code>dat</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/country-year.csv&quot;</span>)</code></pre></div>
</div>
<div id="dimensions-and-names" class="section level4 unnumbered">
<h4>2. Dimensions and Names</h4>
<p><strong>2.1 How many rows and columns are in the dataset?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(dat)
<span class="co">#&gt; [1] 6416   13</span></code></pre></div>
<p><strong>2.2 Print the column names.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat)
<span class="co">#&gt;  [1] &quot;X&quot;          &quot;year&quot;       &quot;ccode&quot;      &quot;country&quot;    &quot;idealpoint&quot;</span>
<span class="co">#&gt;  [6] &quot;polity2&quot;    &quot;physint&quot;    &quot;speech&quot;     &quot;gdp.pc.wdi&quot; &quot;pop.wdi&quot;   </span>
<span class="co">#&gt; [11] &quot;amnesty&quot;    &quot;cinc&quot;       &quot;region&quot;</span></code></pre></div>
<p><strong>2.3 Remove the <code>X</code> column from the dataset.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>X &lt;-<span class="st"> </span><span class="ot">NULL</span></code></pre></div>
<p><strong>2.4 One of the variables is called “gdp.pc.wdi”. This stands for “Gross Domestic Product Per Capita, from the World Bank Development Indicators”. Change this variable name in the dataset from &quot; “gdp.pc.wdi” to “GDP”</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat)[<span class="dv">8</span>] &lt;-<span class="st"> &quot;GDP&quot;</span></code></pre></div>
</div>
<div id="summarizing" class="section level4 unnumbered">
<h4>3. Summarizing</h4>
<p><strong>3.1 How many years are covered in the dataset?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">unique</span>(dat<span class="op">$</span>year))
<span class="co">#&gt; [1] 36</span></code></pre></div>
<p><strong>3.2 How many unique countries are covered in the dataset?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">unique</span>(dat<span class="op">$</span>country))
<span class="co">#&gt; [1] 196</span></code></pre></div>
<p><strong>3.3 What is the range of <code>polity2</code>? How many NAs are in this column?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(dat<span class="op">$</span>polity2)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span>
<span class="co">#&gt;     -10      -6       5       2       9      10    1214</span></code></pre></div>
</div>
<div id="subsetting-1" class="section level4 unnumbered">
<h4>4. Subsetting</h4>
<p><strong>4.1 Subset dat so that it returns the third column AS A VECTOR</strong> (Do not print the object; store it in a variable.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sub &lt;-<span class="st"> </span>dat[[<span class="dv">3</span>]]
<span class="co">#OR</span>
sub &lt;-<span class="st"> </span>dat[,<span class="dv">3</span>]
<span class="co">#OR</span>
<span class="kw">names</span>(dat)[<span class="dv">3</span>]
<span class="co">#&gt; [1] &quot;country&quot;</span>
sub &lt;-<span class="st"> </span>dat<span class="op">$</span>country</code></pre></div>
<p><strong>4.2 Fix each of the following common data frame subsetting errors</strong>:</p>
<ol style="list-style-type: decimal">
<li>Extract observations collected for the year 1980</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[dat<span class="op">$</span>year =<span class="st"> </span><span class="dv">1980</span>,]

<span class="co"># Corrected</span>
dat[dat<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">1980</span>,]</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Extract all columns except 1 through to 4</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[,<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]

<span class="co"># Corrected</span>
dat[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)]</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Extract the rows where the polity2 score is greater than 5</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[dat<span class="op">$</span>polity2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>]

<span class="co"># corrected</span>
dat[dat<span class="op">$</span>polity2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>, ]</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Extract the first row, and the third and fourth columns (<code>country</code> and <code>idealpoint</code>).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>]

<span class="co"># Corrected</span>
dat[<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)]</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Extract rows that contain information for the years 2002 and 2007</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat[dat<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">2002</span> <span class="op">|</span><span class="st"> </span><span class="dv">2007</span>,]

<span class="co"># Corrected</span>
dat[dat<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">2002</span> <span class="op">|</span><span class="st"> </span>dat<span class="op">$</span>year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>,]</code></pre></div>
<p><strong>4.3 What does <code>summary(dat$polity2[dat$region ==&quot;Africa&quot;])</code> do? Explain below in your own words.</strong></p>
<p>It calculates some summary statistics for <code>polity2</code> scores from observations in Africa.</p>
<p><strong>4.4 Subset the data to include only observations from years 1990-2000 (inclusive). Put the subsetted data in a new variable called <code>dat.1990.2000</code></strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat.<span class="fl">1990.2000</span> &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1990</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>year<span class="op">&lt;=</span><span class="dv">2000</span>,]</code></pre></div>
<p><strong>4.5 Using <code>mean()</code> function, tell me the average GDP of observations from 1990 to 2000.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dat.<span class="fl">1990.2000</span><span class="op">$</span>GDP, <span class="dt">na.rm =</span> T)
<span class="co">#&gt; [1] 6611</span></code></pre></div>
<p><strong>4.6 You just calculated the average GDP for years 1990-2000. Now calculate the average GDP from 2001 onwards. Tell me how much larger it is (in percentage).</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat.<span class="fl">2001.</span>plus &lt;-<span class="st"> </span>dat[dat<span class="op">$</span>year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span>,]
mean1 &lt;-<span class="st"> </span><span class="kw">mean</span>(dat.<span class="fl">1990.2000</span><span class="op">$</span>GDP, <span class="dt">na.rm =</span> T)
mean2 &lt;-<span class="st"> </span><span class="kw">mean</span>(dat.<span class="fl">2001.</span>plus<span class="op">$</span>GDP, <span class="dt">na.rm =</span> T)
(mean2 <span class="op">-</span><span class="st"> </span>mean1) <span class="op">/</span><span class="st"> </span>mean1
<span class="co">#&gt; [1] 0.825</span></code></pre></div>
<p><strong>4.7 Look up the helpfile for the function <code>is.na()</code>. Using this function, replace all the NA values in the <code>polity2</code> column of <code>dat</code> with 0.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?is.na
dat<span class="op">$</span>polity2[<span class="kw">is.na</span>(dat<span class="op">$</span>polity2)] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="kw">summary</span>(dat<span class="op">$</span>polity2)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;  -10.00   -5.00    0.00    1.46    8.00   10.00</span></code></pre></div>

</div>
</div>
<div id="assignment-4-solutions" class="section level2">
<h2><span class="header-section-number">20.4</span> Assignment 4 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Oct 24, 2019</li>
<li><strong>Due</strong>: Nov 5, 2019 at 12:29pm.</li>
</ul>
<p>For this problem set, we’ll be working with the country-year data introduced in the last assignment. As a reminder, the dataset contains the following variable:</p>
<ul>
<li><code>year</code>: Year.</li>
<li><code>ccode</code>: Country numerical code.</li>
<li><code>country</code>: Country name.</li>
<li><code>idealpoint</code> UN Ideal point.</li>
<li><code>polity2</code>: Polity2 score of regime type (from Polity VI).</li>
<li><code>physint</code>: Physical Integrity Rights score (from CIRI dataset).</li>
<li><code>speech</code>: Speech Rights score (from CIRI).</li>
<li><code>gdp.pc.wdi</code>: GDP per capita (from World Bank).</li>
<li><code>pop.wdi</code>: Population (from World Bank).</li>
<li><code>amnesty</code>: Political Terror Scale using Amnesty International reports (from Political Terror Scale project).</li>
<li><code>cinc</code>: Composite Index of Military Capabilities (Correlates of War).</li>
<li><code>region</code>: Geographic region.</li>
</ul>
<p>We’ll be merging this country_year data with new data about U.S. news coverage of women around the world (excluding the United States). In this new dataset, the unit of observation is <em>article</em>. That is, each row represents an individual article, with columns for:</p>
<ul>
<li><code>publication</code>: NYT or Washington Post.</li>
<li><code>year</code>: Year article was published.</li>
<li><code>title</code>: Title of the article.</li>
<li><code>country</code>: Country the article is mainly about.</li>
<li><code>region</code>: Region where <code>country</code> is located.</li>
<li><code>ccode</code>: Numerical code for <code>country</code>.</li>
</ul>
<div id="loading-subsetting-summarizing" class="section level4 unnumbered">
<h4>1. Loading, subsetting, summarizing</h4>
<p><strong>1.1 Load the csv found in <code>data/articles.csv</code> into R. Be sure to set <code>stringsAsFactors</code> to <code>FALSE</code>. Store the data-frame to an object called <code>articles</code> and tell me the variable names.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
articles &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/articles.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)
<span class="kw">names</span>(articles)
<span class="co">#&gt; [1] &quot;publication&quot; &quot;year&quot;        &quot;title&quot;       &quot;country&quot;     &quot;region&quot;     </span>
<span class="co">#&gt; [6] &quot;ccode&quot;</span></code></pre></div>
<p><strong>1.2 How many countries are covered in the dataset?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">unique</span>(articles<span class="op">$</span>country))
<span class="co">#&gt; [1] 147</span></code></pre></div>
<p><strong>1.3 The variable <code>ccode</code> reports a numerical ID corresponding to a given country. Print the names of the country or countries without a <code>ccode</code> (i.e. those countries where the <code>ccode</code> is <code>NA</code>.)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(articles<span class="op">$</span>country[<span class="kw">is.na</span>(articles<span class="op">$</span>ccode)])
<span class="co">#&gt; [1] &quot;Palestine&quot;</span></code></pre></div>
<p><strong>1.4 Remove all articles where the <code>ccode</code> variable is <code>NA</code>. How many observations are left with?</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">articles_no_na &lt;-<span class="st"> </span>articles[<span class="op">!</span><span class="kw">is.na</span>(articles<span class="op">$</span>ccode), ]
<span class="kw">nrow</span>(articles_no_na)
<span class="co">#&gt; [1] 4494</span></code></pre></div>
</div>
<div id="counting-frequencies-and-merging" class="section level4 unnumbered">
<h4>2. Counting Frequencies and Merging</h4>
<p><strong>2.1 Create a new data frame called <code>articles_country_year</code> that tells us the number of articles per <code>ccode</code> (i.e. country code), per <code>year</code>.</strong></p>
<p><strong>The final data frame <code>articles_country_year</code> should contain three columns: <code>ccode</code>, <code>year</code>, and <code>number_articles</code>.</strong></p>
<p><strong>Print the first 6 rows of the <code>articles_country_year</code>.</strong></p>
<p><strong>Hint</strong>: The <code>count</code> function – part of the <code>plyr</code> package – might be helpful.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">articles_country_year &lt;-<span class="st"> </span>articles_no_na <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">count</span>(ccode, year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(ccode, year, <span class="dt">number_articles =</span> n)

<span class="kw">kable</span>(<span class="kw">head</span>(articles_country_year))</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
ccode
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
number_articles
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1981
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1982
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1983
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1984
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1985
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p><strong>2.2. Load <code>data/country-year.csv</code> (this is the country-year data we worked with during the last assignment.)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">country_year &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/country-year.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</code></pre></div>
<p><strong>2.3 Subset <code>country_year</code> such that it has the same year range as <code>articles_country_year</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(articles_country_year<span class="op">$</span>year)
<span class="co">#&gt; [1] 1980 2014</span>
<span class="kw">range</span>(country_year<span class="op">$</span>year)
<span class="co">#&gt; [1] 1979 2014</span>

country_year &lt;-country_year <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1979</span>)</code></pre></div>
<p><strong>2.4 Merge (i.e. join) <code>articles_country_year</code> and <code>country_year</code> into a new dataframe called <code>merged</code>.</strong></p>
<p><strong>When you’re done, <code>merged</code> should have all the rows and columns of the country_year dataset, along with a new column called <code>number_articles</code>.</strong></p>
<p><strong>Print the first 6 rows of this new dataframe <code>merged</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">merged &lt;-<span class="st"> </span>country_year <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(articles_country_year)
<span class="co">#&gt; Joining, by = c(&quot;year&quot;, &quot;ccode&quot;)</span>

<span class="kw">kable</span>(<span class="kw">head</span>(merged))</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
X
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
ccode
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
idealpoint
</th>
<th style="text-align:right;">
polity2
</th>
<th style="text-align:right;">
physint
</th>
<th style="text-align:right;">
speech
</th>
<th style="text-align:right;">
gdp.pc.wdi
</th>
<th style="text-align:right;">
pop.wdi
</th>
<th style="text-align:right;">
amnesty
</th>
<th style="text-align:right;">
cinc
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
number_articles
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
700
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
-1.560
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
276
</td>
<td style="text-align:right;">
13180431
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:left;">
MENA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
157
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
540
</td>
<td style="text-align:left;">
Angola
</td>
<td style="text-align:right;">
-1.176
</td>
<td style="text-align:right;">
-7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
7637141
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
158
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
339
</td>
<td style="text-align:left;">
Albania
</td>
<td style="text-align:right;">
-1.564
</td>
<td style="text-align:right;">
-9
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2671997
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:left;">
EECA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
696
</td>
<td style="text-align:left;">
United Arab Emirates
</td>
<td style="text-align:right;">
-0.315
</td>
<td style="text-align:right;">
-8
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
42962
</td>
<td style="text-align:right;">
1014825
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:left;">
MENA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
160
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
0.128
</td>
<td style="text-align:right;">
-9
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2737
</td>
<td style="text-align:right;">
28120135
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.007
</td>
<td style="text-align:left;">
LA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
161
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
900
</td>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1.423
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
10188
</td>
<td style="text-align:right;">
14692000
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.007
</td>
<td style="text-align:left;">
West
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p><strong>2.5 In <code>merged</code>, replace all instances of <code>NA</code> in the <code>number_articles</code> column to 0.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># solution 1 - base R</span>
merged<span class="op">$</span>number_articles[<span class="kw">is.na</span>(merged<span class="op">$</span>number_articles)] &lt;-<span class="st"> </span><span class="dv">0</span>

<span class="co"># solution 2 - tidyr</span>
merged<span class="op">$</span>number_articles &lt;-<span class="st"> </span><span class="kw">replace_na</span>(merged<span class="op">$</span>number_articles, <span class="dv">0</span>)

<span class="co"># solution 3 - dplyr</span>
merged &lt;-<span class="st"> </span>merged <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">number_articles =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(number_articles), <span class="dv">0</span>, number_articles))

<span class="co"># test</span>
<span class="kw">summary</span>(merged<span class="op">$</span>number_articles)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;     0.0     0.0     0.0     0.7     0.0    99.0</span></code></pre></div>
<p><strong>2.6 Which country-year observation has the most number of articles? Write code that prints the year, country name, and number of articles for this observation.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># solution #1 -- base R</span>
merged[<span class="kw">which.max</span>(merged<span class="op">$</span>number_articles),<span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;country&quot;</span>, <span class="st">&quot;number_articles&quot;</span>)]
<span class="co">#&gt;      year country number_articles</span>
<span class="co">#&gt; 5950 2013   India              99</span>

<span class="co"># solution #2 -- tidyverse</span>
merged <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">1</span>, number_articles) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(year, country, number_articles)
<span class="co">#&gt;   year country number_articles</span>
<span class="co">#&gt; 1 2013   India              99</span></code></pre></div>
</div>
<div id="group-wise-operations" class="section level4 unnumbered">
<h4>3. Group-wise Operations</h4>
<p><strong>3.1 Using the <code>merged</code> data and our <strong>split-apply-combine</strong> strategies, print the total number of articles about women per region.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n_region &lt;-<span class="st"> </span>merged <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(region) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">sum</span>(number_articles, <span class="dt">na.rm =</span> T))

n_region
<span class="co">#&gt; # A tibble: 7 x 2</span>
<span class="co">#&gt;   region count</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Africa   464</span>
<span class="co">#&gt; 2 Asia    1288</span>
<span class="co">#&gt; 3 EECA     251</span>
<span class="co">#&gt; 4 LA       328</span>
<span class="co">#&gt; 5 MENA     940</span>
<span class="co">#&gt; 6 West    1159</span>
<span class="co">#&gt; # … with 1 more row</span></code></pre></div>
</div>
<div id="long-v.-wide-formats" class="section level4 unnumbered">
<h4>4. Long v. wide formats</h4>
<p><strong>4.1 Create a piped operation on <code>merged</code> that does the following:</strong></p>
<p><strong>1. Subsets the dataframe to select <code>year</code>, <code>country</code>, and <code>number_articles</code> columns.</strong> <strong>2. Filters the dataframe to select only observations in the MENA region.</strong> <strong>3. Spreads the dataframe so that each <code>country</code> is a column, and the cells represent `number_articles.</strong></p>
<p><strong>Print the first 6 rows of this transformed data frame.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wide &lt;-<span class="st"> </span>merged <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(region <span class="op">==</span><span class="st"> &quot;MENA&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(year, country, number_articles) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">spread</span>(country, number_articles, <span class="dt">fill =</span> <span class="dv">0</span>)

<span class="kw">kable</span>(<span class="kw">head</span>(wide))</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
Afghanistan
</th>
<th style="text-align:right;">
Algeria
</th>
<th style="text-align:right;">
Bahrain
</th>
<th style="text-align:right;">
Egypt
</th>
<th style="text-align:right;">
Iran
</th>
<th style="text-align:right;">
Iraq
</th>
<th style="text-align:right;">
Israel
</th>
<th style="text-align:right;">
Jordan
</th>
<th style="text-align:right;">
Kuwait
</th>
<th style="text-align:right;">
Lebanon
</th>
<th style="text-align:right;">
Libya
</th>
<th style="text-align:right;">
Morocco
</th>
<th style="text-align:right;">
Oman
</th>
<th style="text-align:right;">
Palestine
</th>
<th style="text-align:right;">
Qatar
</th>
<th style="text-align:right;">
Saudi Arabia
</th>
<th style="text-align:right;">
South Sudan
</th>
<th style="text-align:right;">
Sudan
</th>
<th style="text-align:right;">
Syria
</th>
<th style="text-align:right;">
Tunisia
</th>
<th style="text-align:right;">
Turkey
</th>
<th style="text-align:right;">
United Arab Emirates
</th>
<th style="text-align:right;">
Yemen Arab Republic
</th>
<th style="text-align:right;">
Yemen People’s Republic
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1981
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1982
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1983
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1984
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1985
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>4.2 Transform the dataset you created above back into <code>long</code> format, with three variables: <code>year</code>, <code>country</code>, and <code>number_articles</code></strong></p>
<p><strong>Print the first 6 rows of this transformed data frame.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">long &lt;-<span class="st"> </span>wide <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(country, number_articles, <span class="op">-</span>year)

<span class="kw">kable</span>(<span class="kw">head</span>(long))</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
number_articles
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1980
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1981
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1982
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1983
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1984
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
1985
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div id="extra-credit" class="section level4">
<h4><span class="header-section-number">20.4.0.1</span> Extra Credit</h4>
<p><strong>This question is not required. But it you want an extra challenge….</strong></p>
<p><strong>Transform the <code>country_year</code> data into an undirected dyadic dataset. Here, the unit of observation should be the dyad-year, with five columns:</strong></p>
<ol style="list-style-type: decimal">
<li><code>ccode_1</code>: Country 1 <code>ccode</code></li>
<li><code>country_1</code>: Country 1 name</li>
<li><code>ccode_2</code>: Country 2 <code>ccode</code></li>
<li><code>country_2</code>: Country 2 name</li>
<li><code>year</code>: Year of observation</li>
<li><code>gdp_diff</code>: Absolute difference of gdp between dyad.</li>
</ol>
<p><strong>This should be <em>undirected</em> dyadic dataset, meaning <code>USA-Canada-1980</code> is the same as <code>Canada-USA-1980</code>, and we shouldn’t have duplicate rows for the same dyad.</strong></p>
<p><strong>Try to do it all in 1 piped sequence. Then tell me the dyad-year with the greatest wealth disparity.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dyad &lt;-<span class="st"> </span>country_year <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">expand</span>(<span class="dt">ccode_1=</span>ccode, <span class="dt">ccode_2=</span>ccode) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># make two columns of states</span>
<span class="st">  </span><span class="kw">filter</span>(ccode_<span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span>ccode_<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># from directed to undirected dyads</span>
<span class="st">  </span><span class="kw">left_join</span>(., country_year, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;ccode_1&quot;</span>=<span class="st">&quot;ccode&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># get state1 info</span>
<span class="st">  </span><span class="kw">left_join</span>(., country_year, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;ccode_2&quot;</span>=<span class="st">&quot;ccode&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># get state2 info </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp_diff =</span> <span class="kw">abs</span>(gdp.pc.wdi.x <span class="op">-</span><span class="st"> </span>gdp.pc.wdi.y)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># take absolute difference in gdp</span>
<span class="st">  </span><span class="kw">select</span>(ccode_<span class="dv">1</span>, <span class="dt">country_1 =</span> country.x, ccode_<span class="dv">2</span>, <span class="dt">country_2 =</span> country.y, year, gdp_diff) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(gdp_diff))

<span class="kw">kable</span>(<span class="kw">head</span>(dyad))</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
ccode_1
</th>
<th style="text-align:left;">
country_1
</th>
<th style="text-align:right;">
ccode_2
</th>
<th style="text-align:left;">
country_2
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
gdp_diff
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
516
</td>
<td style="text-align:left;">
Burundi
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193705
</td>
</tr>
<tr>
<td style="text-align:right;">
450
</td>
<td style="text-align:left;">
Liberia
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193661
</td>
</tr>
<tr>
<td style="text-align:right;">
531
</td>
<td style="text-align:left;">
Eritrea
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193636
</td>
</tr>
<tr>
<td style="text-align:right;">
553
</td>
<td style="text-align:left;">
Malawi
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193590
</td>
</tr>
<tr>
<td style="text-align:right;">
490
</td>
<td style="text-align:left;">
Democratic Republic of the Congo
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193566
</td>
</tr>
<tr>
<td style="text-align:right;">
530
</td>
<td style="text-align:left;">
Ethiopia
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:right;">
193565
</td>
</tr>
</tbody>
</table>

</div>
</div>
<div id="assignment-5-solutions" class="section level2">
<h2><span class="header-section-number">20.5</span> Assignment 5 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Nov 5, 2019</li>
<li><strong>Due</strong>: Nov 12, 2019 at 12:29pm.</li>
</ul>
<p>For this problem set, we’ll be working with the country-year data introduced in the last assignment. As a reminder, the dataset contains the following variables:</p>
<ul>
<li><code>year</code>: Year.</li>
<li><code>ccode</code>: Country numerical code.</li>
<li><code>country</code>: Country name.</li>
<li><code>idealpoint</code> UN Ideal point.</li>
<li><code>polity2</code>: Polity2 score of regime type (from Polity IV).</li>
<li><code>physint</code>: Physical Integrity Rights score (from CIRI dataset).</li>
<li><code>speech</code>: Speech Rights score (from CIRI).</li>
<li><code>gdp.pc.wdi</code>: GDP per capita (from World Bank).</li>
<li><code>pop.wdi</code>: Population (from World Bank).</li>
<li><code>amnesty</code>: Political Terror Scale using Amnesty International reports (from Political Terror Scale project).</li>
<li><code>cinc</code>: Composite Index of Military Capabilities (Correlates of War).</li>
<li><code>region</code>: Geographic region.</li>
</ul>
<div id="getting-started" class="section level4 unnumbered">
<h4>1. Getting Started</h4>
<p><strong>1.1 Read <code>data/country-year.csv</code> into R, using a relative path. Store it in an object called <code>dat</code>.</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(stargazer)
dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/country-year.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)</code></pre></div>
</div>
<div id="plotting-1" class="section level4 unnumbered">
<h4>2. Plotting</h4>
<p><strong>2.1 Write code that reproduces “plots/Plot_1.jpeg”. (No need to write the file.)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Density of population</span>
d &lt;-<span class="st"> </span><span class="kw">density</span>(<span class="kw">log</span>(dat<span class="op">$</span>pop.wdi), <span class="dt">na.rm =</span> T, <span class="dt">bw =</span> .<span class="dv">2</span>)
<span class="kw">plot</span>(d, <span class="dt">main =</span> <span class="st">&quot;Summary of Population (Logged)&quot;</span>) 
<span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">max</span>(d<span class="op">$</span>y), <span class="dt">v =</span> <span class="fl">16.09</span>, <span class="dt">lty =</span> <span class="dv">2</span>) </code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-625-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>2.2 Write code that reproduces “plots/Plot_2.jpeg”. (No need to write the file.)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get summary data</span>
country_means &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(region)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">gdp =</span> <span class="kw">mean</span>(gdp.pc.wdi, <span class="dt">na.rm =</span> T),
            <span class="dt">polity =</span> <span class="kw">mean</span>(polity2, <span class="dt">na.rm =</span> T),
            <span class="dt">cinc =</span> <span class="kw">mean</span>(cinc, <span class="dt">na.rm =</span> T),
            <span class="dt">region =</span> region[<span class="dv">1</span>])

<span class="co"># plot</span>
<span class="kw">ggplot</span>(country_means, <span class="kw">aes</span>(<span class="dt">x =</span> polity, <span class="dt">y =</span> <span class="kw">log10</span>(gdp))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> region)) <span class="op">+</span>
<span class="st">  </span><span class="co">#scale_y_log10() +</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">color=</span><span class="st">&quot;red&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Mean GDP (Logged) &quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Mean Polity Score&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Average Polity Score by GDP, 1979-2014&quot;</span>) 
<span class="co">#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</span>
<span class="co">#&gt; Warning: Removed 33 rows containing non-finite values (stat_smooth).</span>
<span class="co">#&gt; Warning: Removed 33 rows containing missing values (geom_point).</span></code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-626-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>2.3 Write code that reproduces “plots/Plot_3.jpeg”. (No need to write the file.)</strong></p>
<p><strong>Hint: The fall-inspired colors are #771C19, #E25033, #F27314, #F8A31B</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># military capabilities</span>
top_cinc &lt;-<span class="st"> </span>country_means <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>, cinc)

<span class="co"># Fall theme</span>
rhg_cols =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#771C19&quot;</span>,<span class="st">&quot;#E25033&quot;</span>,<span class="st">&quot;#F27314&quot;</span>, <span class="st">&quot;#F8A31B&quot;</span>)

<span class="co"># plot</span>
<span class="kw">ggplot</span>(top_cinc, <span class="kw">aes</span>(<span class="kw">reorder</span>(country, cinc), cinc, <span class="dt">fill =</span> region)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">7</span>, <span class="dt">angle=</span><span class="dv">45</span>, <span class="dt">hjust=</span><span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Composite Index of Military Capabilities&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Country&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Top 10 Military Capabilities, in Fall Colors&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> rhg_cols)</code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-627-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><strong>2.4 Write code that reproduces “plots/Plot_4.jpeg”. (No need to write the file.)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># prepare data</span>
year_means &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(region)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, region) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">gdp =</span> <span class="kw">mean</span>(gdp.pc.wdi, <span class="dt">na.rm =</span> T),
            <span class="dt">polity =</span> <span class="kw">mean</span>(polity2, <span class="dt">na.rm =</span> T),
            <span class="dt">physint =</span> <span class="kw">mean</span>(physint, <span class="dt">na.rm =</span> T)) 

<span class="co"># plot</span>
<span class="kw">ggplot</span>(year_means, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> polity, <span class="dt">color =</span> region)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Average Polity Score&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Average Polity Score Over Time&quot;</span>)
<span class="co">#&gt; Warning: Removed 6 rows containing missing values (geom_path).</span></code></pre></div>
<p><img src="site1_files/figure-html/unnamed-chunk-628-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="models" class="section level4 unnumbered">
<h4>3. Models</h4>
<p><strong>3.1 Write code that reproduces the model summary table “reg_table.txt” (and writes the file).</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">lm</span>(physint <span class="op">~</span><span class="st"> </span>polity2, <span class="dt">data =</span> dat)
mod.<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">lm</span>(physint <span class="op">~</span><span class="st"> </span>polity2 <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(gdp.pc.wdi), <span class="dt">data =</span> dat)
mod.<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">lm</span>(physint <span class="op">~</span><span class="st"> </span>polity2 <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(gdp.pc.wdi) <span class="op">+</span><span class="st"> </span>region, <span class="dt">data =</span> dat)

<span class="kw">stargazer</span>(mod.<span class="dv">1</span>, mod.<span class="dv">2</span>, mod.<span class="dv">3</span>, <span class="dt">title =</span> <span class="st">&quot;Regression Results&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;text&quot;</span>, 
          <span class="dt">covariate.labels  =</span> <span class="kw">c</span>(<span class="st">&quot;Polity2&quot;</span>, <span class="st">&quot;GDP per capita, logged&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Eastern Europe&quot;</span>, <span class="st">&quot;Latin America&quot;</span>, <span class="st">&quot;MENA&quot;</span>, <span class="st">&quot;West&quot;</span>, <span class="st">&quot;Constant&quot;</span>), 
          <span class="dt">dep.var.labels =</span> <span class="st">&quot;DV: Physical Integrity&quot;</span>,
          <span class="dt">omit =</span> <span class="st">&quot;Constant&quot;</span>, 
          <span class="dt">keep.stat=</span><span class="st">&quot;n&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;ajps&quot;</span>,
          <span class="dt">out =</span> <span class="st">&quot;reg_table.txt&quot;</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Regression Results</span>
<span class="co">#&gt; --------------------------------------------------</span>
<span class="co">#&gt;                          DV: Physical Integrity   </span>
<span class="co">#&gt;                        Model 1  Model 2   Model 3 </span>
<span class="co">#&gt; --------------------------------------------------</span>
<span class="co">#&gt; Polity2                0.124*** 0.064*** 0.033*** </span>
<span class="co">#&gt;                        (0.004)  (0.005)   (0.005) </span>
<span class="co">#&gt; GDP per capita, logged          0.503*** 0.493*** </span>
<span class="co">#&gt;                                 (0.021)   (0.028) </span>
<span class="co">#&gt; Asia                                     -1.170***</span>
<span class="co">#&gt;                                           (0.101) </span>
<span class="co">#&gt; Eastern Europe                            -0.033  </span>
<span class="co">#&gt;                                           (0.109) </span>
<span class="co">#&gt; Latin America                            -0.769***</span>
<span class="co">#&gt;                                           (0.097) </span>
<span class="co">#&gt; MENA                                     -1.460***</span>
<span class="co">#&gt;                                           (0.116) </span>
<span class="co">#&gt; West                                     0.604*** </span>
<span class="co">#&gt;                                           (0.138) </span>
<span class="co">#&gt; N                        4336     4141     4141   </span>
<span class="co">#&gt; --------------------------------------------------</span>
<span class="co">#&gt; ***p &lt; .01; **p &lt; .05; *p &lt; .1</span></code></pre></div>

</div>
</div>
<div id="assignment-6-solutions" class="section level2">
<h2><span class="header-section-number">20.6</span> Assignment 6 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Nov 12, 2019</li>
<li><strong>Due</strong>: Nov 21, 2019 at 12:29pm.</li>
</ul>
<p>In this unit, we’ll use R to turn a bunch of loose text documents into a real-life database. (Note: This database was created for a project by R. Terman and E. Voeten, and was processed using much the same process as you’ll be learning here.)</p>
<p>The problem set will leverage your new R skills, especially working with strings; writing functions; using iteration; and thinking like a programmer.</p>
<p><strong>Important</strong>: The code has been scaffolded for you, meaning that you have to fill in the blanks. Once you’re ready to submit the assignment, you have to remove the <code>eval = F</code> from the R chunk header. If you don’t, the chunk won’t execute when you knit the Rmarkdown file.</p>
<div id="about-the-data" class="section level4 unnumbered">
<h4>About the Data</h4>
<p>We’ll be creating a database from <a href="http://www.ohchr.org/EN/HRBodies/UPR/Pages/BasicFacts.aspx">Universal Period Review outcome reports</a>.</p>
<p>The Universal Periodic Review (UPR) is a process run by the United Nations Human Rights Council, which involves a periodic review of the human rights records of all 193 UN Member States.</p>
<p>Reviews take place through an interactive discussion between the State under review and other UN Member States. During this discussion any UN Member State can pose questions, comments and/or make recommendations to the States under review. States under review can then respond, stating which recommendations they reject, accept, will consider, etc. Reports are then drawn up detailing this discussion.</p>
<p>We will be analyzing outcome reports from the 2014 Universal Period Reviews of 42 countries, which we retrieved <a href="http://www.ohchr.org/EN/HRBodies/UPR/Pages/Documentation.aspx">here</a> and formatted as text documents.</p>
<p>The goal is to convert these semi-structured texts to a tabular dataset of <strong>recommendations</strong> with the following variables:</p>
<ol style="list-style-type: decimal">
<li>Text of recommendation (<em>text</em>)</li>
<li>Country to which the recommendation is directed (<em>to</em>)</li>
<li>Country that is making the recommendation (<em>from</em>)</li>
<li>The year when the review took place (<em>year</em>)</li>
<li>The response to the recommendation, i.e. whether the reviewed country rejects, accepts, etc (<em>decision</em>)</li>
</ol>
<p>In other words, we want to turn this:</p>
<p><img src="img/text.png" width="600"></p>
<p>into this:</p>
<p><img src="img/tabular.png" width="400"></p>
<p>Take a few minutes to look at the files, which are located in <code>data/txts</code>, and get a sense for how they’re structured.</p>
<p>Then run the following code to get started.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readtext)
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(tidyverse)

<span class="co"># read all texts</span>
all_texts &lt;-<span class="st"> </span><span class="kw">readtext</span>(<span class="st">&quot;data/txts/&quot;</span>)</code></pre></div>
</div>
<div id="extract-one-document" class="section level4 unnumbered">
<h4>1. Extract One Document</h4>
<p>We’re going to start off working with just one document. We’ll then use that code to iterate over all the documents.</p>
<p><strong>task</strong>:</p>
<ul>
<li>Extract one document.</li>
<li>Collect information on the country and year.</li>
<li>Extract the section we’re interested in.</li>
<li>Turn each line (i.e. recommendation) into an item in a vector.</li>
</ul>
<p>Let’s start off working with <code>cotedivoire2014.txt</code> (the third file).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text &lt;-<span class="st"> </span>all_texts<span class="op">$</span>text[<span class="dv">3</span>]
file_name &lt;-<span class="st"> </span>all_texts<span class="op">$</span>doc_id[<span class="dv">3</span>]</code></pre></div>
<p><strong>1.1 Assign country and year variables.</strong></p>
<p>You’ll notice that the <code>file_name</code> consists of the name of the reviewed country and the year. Slice <code>file_name</code> to create 2 new variables, <code>country</code>, and <code>year</code>.</p>
<p>Be careful! Remember that we are going to apply this to the other file names later. However you slice “cotedivoire2014.txt”, it needs to work for the other files in the <code>data/txts</code> directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">country &lt;-<span class="st"> </span><span class="kw">str_sub</span>(file_name, <span class="dv">1</span>, <span class="op">-</span><span class="dv">9</span>)
year &lt;-<span class="kw">str_sub</span>(file_name, <span class="op">-</span><span class="dv">8</span>, <span class="op">-</span><span class="dv">5</span>)</code></pre></div>
<p><strong>1.2 Get the Recommendations Section</strong></p>
<p>Note that the section we want starts with <code>&quot;II. Conclusions and/or recommendations\n&quot;</code>. What function would you use to get everything <em>after</em> this substring? Fill in the blank below and assign the value to a new variable called <code>rec_text</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sections =<span class="st"> </span><span class="kw">str_split</span>(text, <span class="st">&quot;II. Conclusions and/or recommendations</span><span class="ch">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]
rec_text =<span class="st"> </span>sections[<span class="dv">2</span>] <span class="co"># get second item -- everything after.</span></code></pre></div>
<p><strong>1.3 Turn it into a vector</strong></p>
<p>Using a <code>stringr</code> function, turn the string above into a vector of lines, and store it in a variable called <code>recs</code>. Remember that a new line is represented by <code>\n</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recs &lt;-<span class="st"> </span><span class="kw">str_split</span>(rec_text, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]
recs[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt; [1] &quot;127. The recommendations listed below enjoy the support of C™te dÕIvoire: &quot;                                                                                                  </span>
<span class="co">#&gt; [2] &quot;127.1 Consider the accession to core human rights instruments (Lesotho); and to other main international human rights treaties that it is not yet a party to (Philippines); &quot;</span>
<span class="co">#&gt; [3] &quot;127.2 Make efforts towards the ratification of the OP-CAT (Chile); &quot;                                                                                                         </span>
<span class="co">#&gt; [4] &quot;127.3 Ratify the OP-CAT (Ghana, Tunisia), as recommended previously in 2009 (Czech Republic) and take policy measures to prevent torture and ill-treatment (Estonia); &quot;      </span>
<span class="co">#&gt; [5] &quot;127.4 Accede to the OP-CAT as soon as possible (Uruguay); &quot;</span></code></pre></div>
</div>
<div id="chunk-recomendations" class="section level4 unnumbered">
<h4>2. Chunk Recomendations</h4>
<p>These texts have 3 sections each. 1. The first section contains those recommendations the country supports. 2. The second section contains recs the country will examine. 3. The third contains recommendations the country explicitely rejects.</p>
<p><strong>task</strong>:</p>
<ul>
<li>parse recommendations into three piles, corresponding to accepted recs, examined recs, and rejected recs.</li>
<li>combine these piles back into a dataframe, containing the text of the recommendation and its corresponding decision.</li>
<li>add additional columns for <code>to</code> country and <code>year</code>.</li>
</ul>
<p><strong>2.1: Find the paragraph numbers</strong></p>
<p>Each section starts with a main paragraph number (e.g. <strong>127</strong>). The individual recommendations are then noted as subparagraphs (e.g. <strong>127.1, 127.2</strong> etc.).</p>
<p>All the accepted recommendations have the same main paragraph number (<strong>127</strong>). Next come the recommendations which will be examined, whose main paragraph number is just the next integer (<strong>128</strong>). After that are the rejected recommendations, with the next integer as their main paragraph number (<strong>129</strong>).</p>
<p>We can’t know the paragraph numbers beforehand, because each file is different. But we <em>can</em> leverage our knowledge of the structure of the documents to get them.</p>
<p>Fill in the blanks below to create 3 variables containing the 3 paragraph numbers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">para1 =<span class="st"> </span><span class="kw">str_extract</span>(recs[<span class="dv">1</span>], <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+&quot;</span>)
para1 =<span class="st"> </span><span class="kw">as.numeric</span>(para1)
para2 =<span class="st"> </span>para1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
para3 =<span class="st"> </span>para2 <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<p><strong>2.2 Parse the text</strong></p>
<p>Now create 3 new vectors: <code>accept_recs</code>, <code>examine_recs</code>, <code>reject_recs.</code> Each vector should contain the recommendations assigned to its corresponding section.</p>
<p><strong>hint</strong>: How do you know if a line belongs to a section? It starts with the main paragraph number for that section. So use the <strong>str_starts</strong> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># subset recommendations</span>
accept_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para1))]
<span class="co"># accept_recs = str_subset(recs, str_c(&quot;^&quot;, as.character(para1)))</span>
examine_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para2))]
reject_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para3))]

<span class="co"># remove the first item from each list, which just demarcates the sections</span>
accept_recs =<span class="st"> </span>accept_recs[<span class="op">-</span><span class="dv">1</span>]
examine_recs =<span class="st"> </span>examine_recs[<span class="op">-</span><span class="dv">1</span>]
reject_recs =<span class="st"> </span>reject_recs[<span class="op">-</span><span class="dv">1</span>]</code></pre></div>
<p><strong>2.3 Tranform to Dataframe</strong></p>
<p>The following code combines the three vectors back into a dataframe with two column: <code>text</code> (of the recommendation), and <code>decicion</code> (whether the recommendation was accepted, examined, or rejected)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recs_df &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">accept =</span> accept_recs,
                    <span class="dt">examine =</span> examine_recs,
                    <span class="dt">reject =</span> reject_recs)

recs_df &lt;-<span class="st"> </span><span class="kw">stack</span>(recs_df) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="st">&quot;text&quot;</span> =<span class="st"> </span>values, <span class="st">&quot;decision&quot;</span> =<span class="st"> </span>ind)</code></pre></div>
<p>Your job is to add 2 new columns to this dataframe: <code>to</code> should contain the country under review, and <code>year</code> should contain the year under review. Note that we already created these variables above, in question 1.1</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recs_df &lt;-<span class="st"> </span>recs_df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">to =</span> country,
         <span class="dt">year =</span> year)

<span class="kw">head</span>(recs_df)
<span class="co">#&gt;                                                                                                                                                                           text</span>
<span class="co">#&gt; 1 127.1 Consider the accession to core human rights instruments (Lesotho); and to other main international human rights treaties that it is not yet a party to (Philippines); </span>
<span class="co">#&gt; 2                                                                                                          127.2 Make efforts towards the ratification of the OP-CAT (Chile); </span>
<span class="co">#&gt; 3       127.3 Ratify the OP-CAT (Ghana, Tunisia), as recommended previously in 2009 (Czech Republic) and take policy measures to prevent torture and ill-treatment (Estonia); </span>
<span class="co">#&gt; 4                                                                                                                   127.4 Accede to the OP-CAT as soon as possible (Uruguay); </span>
<span class="co">#&gt; 5                                                                                                                             127.5 Consider ratifying OP-CAT (Burkina Faso); </span>
<span class="co">#&gt; 6                             127.6 Ratify the International Convention on the Protection of the Rights of All Migrant Workers and Members of Their Families (ICRMW) (Ghana); </span>
<span class="co">#&gt;   decision          to year</span>
<span class="co">#&gt; 1   accept cotedivoire 2014</span>
<span class="co">#&gt; 2   accept cotedivoire 2014</span>
<span class="co">#&gt; 3   accept cotedivoire 2014</span>
<span class="co">#&gt; 4   accept cotedivoire 2014</span>
<span class="co">#&gt; 5   accept cotedivoire 2014</span>
<span class="co">#&gt; 6   accept cotedivoire 2014</span></code></pre></div>
</div>
<div id="get-recommending-country" class="section level4 unnumbered">
<h4>3. Get Recommending Country</h4>
<p><strong>task</strong> - extract the substring representing the recommending country. - add this information to our dataframe.</p>
<p><strong>3.1 Extract recommending country</strong></p>
<p>Take a look at several recommendation texts to get an idea of their format.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(recs_df<span class="op">$</span>text)
<span class="co">#&gt; [1] &quot;127.1 Consider the accession to core human rights instruments (Lesotho); and to other main international human rights treaties that it is not yet a party to (Philippines); &quot;</span>
<span class="co">#&gt; [2] &quot;127.2 Make efforts towards the ratification of the OP-CAT (Chile); &quot;                                                                                                         </span>
<span class="co">#&gt; [3] &quot;127.3 Ratify the OP-CAT (Ghana, Tunisia), as recommended previously in 2009 (Czech Republic) and take policy measures to prevent torture and ill-treatment (Estonia); &quot;      </span>
<span class="co">#&gt; [4] &quot;127.4 Accede to the OP-CAT as soon as possible (Uruguay); &quot;                                                                                                                  </span>
<span class="co">#&gt; [5] &quot;127.5 Consider ratifying OP-CAT (Burkina Faso); &quot;                                                                                                                            </span>
<span class="co">#&gt; [6] &quot;127.6 Ratify the International Convention on the Protection of the Rights of All Migrant Workers and Members of Their Families (ICRMW) (Ghana); &quot;</span></code></pre></div>
<p>Notice that they’re all formatted the same way, with the recommending country in parenthesis at the end, in between parentheses.</p>
<p>Using your string skills, find a way to pull out the recommending country from the first recommendation (stored in <code>first_rec</code> below).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">first_rec =<span class="st"> </span>recs_df<span class="op">$</span>text[<span class="dv">1</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rec_after_paran &lt;-<span class="st"> </span><span class="kw">str_split</span>(first_rec, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">(&quot;</span>)[[<span class="dv">1</span>]]
rec_after_paran &lt;-<span class="st"> </span><span class="kw">tail</span>(rec_after_paran, <span class="dv">1</span>)
first_rec_country =<span class="st"> </span><span class="kw">str_split</span>(rec_after_paran, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">)&quot;</span>)[[<span class="dv">1</span>]]
first_rec_country &lt;-<span class="st"> </span>first_rec_country[<span class="dv">1</span>]

<span class="co"># this should be &#39;Philipines&#39;.</span>
first_rec_country
<span class="co">#&gt; [1] &quot;Philippines&quot;</span></code></pre></div>
<p><strong>3.2 Create a Function</strong></p>
<p>Create a function called <code>get_country</code> that passes an individual recommendation text and returns the recommending country.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">get_country &lt;-<span class="st"> </span><span class="cf">function</span>(rec){
  rec_after_paran &lt;-<span class="st"> </span><span class="kw">str_split</span>(rec, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">(&quot;</span>)[[<span class="dv">1</span>]]
  rec_after_paran &lt;-<span class="st"> </span><span class="kw">tail</span>(rec_after_paran, <span class="dv">1</span>) <span class="co"># get last item</span>
  first_rec_country =<span class="st"> </span><span class="kw">str_split</span>(rec_after_paran, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">)&quot;</span>)[[<span class="dv">1</span>]]
  first_rec_country &lt;-<span class="st"> </span>first_rec_country[<span class="dv">1</span>] <span class="co"># get first item</span>
  
  <span class="kw">return</span>(first_rec_country)
}

<span class="co"># test your code</span>
<span class="kw">get_country</span>(first_rec)
<span class="co">#&gt; [1] &quot;Philippines&quot;</span></code></pre></div>
<p><strong>3.3 Add <code>from</code> column</strong></p>
<p>Using your <code>map</code> and <code>dplyr</code> skills, add a column to <code>recs_df</code> that contains the country issuing each recommendation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recs_df &lt;-<span class="st"> </span>recs_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(
  <span class="dt">from =</span> <span class="kw">map_chr</span>(text, get_country)
)</code></pre></div>
</div>
<div id="repeat-for-all-documents" class="section level4 unnumbered">
<h4>4. Repeat for all documents</h4>
<p>We just wrote code that takes one document and turns it into a dataset!</p>
<p>The problem is we have 11 documents!</p>
<p><strong>task</strong></p>
<ul>
<li>combine the code we’ve written so far to create a function</li>
<li>apply that function to all files to create a single dataset.</li>
</ul>
<p><strong>4.1 Make a function</strong></p>
<p>Combine the functions that you wrote above to create a single function that passes a row number of <code>all_texts</code> (i.e. an integer), and returns a dataframe of fully parsed recommendations in that file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">parse_file &lt;-<span class="st"> </span><span class="cf">function</span>(i){
    <span class="co"># get filename and text</span>
    text &lt;-<span class="st"> </span>all_texts<span class="op">$</span>text[i]
    file_name &lt;-<span class="st"> </span>all_texts<span class="op">$</span>doc_id[i]
    
    <span class="co"># get to country and year</span>
    country &lt;-<span class="st"> </span><span class="kw">str_sub</span>(file_name, <span class="dv">1</span>, <span class="op">-</span><span class="dv">9</span>)
    year &lt;-<span class="kw">str_sub</span>(file_name, <span class="op">-</span><span class="dv">8</span>, <span class="op">-</span><span class="dv">5</span>)
    
    <span class="co"># get vector of recs</span>
    sections =<span class="st"> </span><span class="kw">str_split</span>(text, <span class="st">&quot;II. Conclusions and/or recommendations</span><span class="ch">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]
    rec_text =<span class="st"> </span>sections[<span class="dv">2</span>] <span class="co"># get second item -- everything after.</span>
    recs =<span class="st"> </span><span class="kw">str_split</span>(rec_text, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)[[<span class="dv">1</span>]]
    
    <span class="co"># get paragraph numbers</span>
    para1 =<span class="st"> </span><span class="kw">str_extract</span>(recs[<span class="dv">1</span>], <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+&quot;</span>)
    para1 =<span class="st"> </span><span class="kw">as.numeric</span>(para1)
    para2 =<span class="st"> </span>para1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
    para3 =<span class="st"> </span>para2 <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
    
    <span class="co"># chunk recommendations</span>
    accept_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para1))]
    examine_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para2))]
    reject_recs =<span class="st"> </span>recs[<span class="kw">str_starts</span>(recs, <span class="kw">as.character</span>(para3))]
    
    <span class="co"># remove the first item from each list, which just demarcates the sections</span>
    accept_recs =<span class="st"> </span>accept_recs[<span class="op">-</span><span class="dv">1</span>]
    examine_recs =<span class="st"> </span>examine_recs[<span class="op">-</span><span class="dv">1</span>]
    reject_recs =<span class="st"> </span>reject_recs[<span class="op">-</span><span class="dv">1</span>]
    
    <span class="co"># transform to dataframe</span>
    recs_df &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">accept =</span> accept_recs,
                        <span class="dt">examine =</span> examine_recs,
                        <span class="dt">reject =</span> reject_recs)
    
    recs_df &lt;-<span class="st"> </span><span class="kw">stack</span>(recs_df) <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">select</span>(<span class="st">&quot;text&quot;</span> =<span class="st"> </span>values, <span class="st">&quot;decision&quot;</span> =<span class="st"> </span>ind)
    
    recs_df &lt;-<span class="st"> </span>recs_df <span class="op">%&gt;%</span>
<span class="st">      </span><span class="kw">mutate</span>(<span class="dt">to =</span> country,
             <span class="dt">year =</span> year)
    
    <span class="co"># add from column</span>
    recs_df &lt;-<span class="st"> </span>recs_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(
      <span class="dt">from =</span> <span class="kw">map_chr</span>(text, get_country)
    )
}</code></pre></div>
<p><strong>4.2 Map the function</strong></p>
<p>Apply the function you created above to all rows in <code>all_texts</code> using your <code>map_</code> skills. The final output should contain a dataframe of all the recommendations from all the files.__</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_recs &lt;-<span class="st"> </span><span class="kw">map_dfr</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(all_texts), parse_file)</code></pre></div>
<p><strong>4.3 Print Dimensions and Write a csv</strong></p>
<p>Print the dimensions and export the full dataframe into a csv. You’re done!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(all_recs) <span class="co"># should be 1709 x 5</span>
<span class="co"># write.csv(all_recs, &quot;upr-recs.csv&quot;)</span></code></pre></div>

</div>
</div>
<div id="assignment-7-solutions" class="section level2">
<h2><span class="header-section-number">20.7</span> Assignment 7 Solutions</h2>
<ul>
<li><strong>Assigned</strong>: Nov 21, 2019</li>
<li><strong>Due</strong>: Dec 5, 2019 at 12:29pm.</li>
</ul>
<p>In this week’s lecture, we introduced some tools to collect pieces of data from individual presidential documents. For this assignment, we will be looking at <strong>all</strong> documents in the database that contain the string “space exploration.” Our goals in this problem set are:</p>
<ol style="list-style-type: decimal">
<li>To scrape all documents returned from <a href="https://www.presidency.ucsb.edu/advanced-search?field-keywords=%22space+exploration%22&amp;field-keywords2=&amp;field-keywords3=&amp;from%5Bdate%5D=&amp;to%5Bdate%5D=&amp;person2=&amp;items_per_page=100">this search query</a></li>
<li>To organize this data into a dataframe and ultimately output a CSV file.</li>
</ol>
<p>Below, I’ve given you the code for a function that passes the URL of an individual document, scrapes the information from that document, and returns that information in a list.</p>
<p>But this is all I will be providing for you. You must complete the rest of the task yourself. Specifically, you should:</p>
<ol style="list-style-type: decimal">
<li>Write code that scrapes all documents, organizes the information in a dataframe, and writes a csv file.</li>
<li>The end goal should be a dataset identical to the one I’ve provided for you in <code>data/space.csv</code>.</li>
<li>Split the code up into discrete steps, each with their own corresponding Rmarkdown chunk.</li>
<li>Document (i.e. describe) each step in clear but concise Rmarkdown prose.</li>
<li>The final chunk should:</li>
</ol>
<ul>
<li>print the structure (<code>str</code>) of the final data frame.</li>
<li>write the dataframe to a csv file.</li>
</ul>
<p>Good luck!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(rvest)
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(purrr)
<span class="kw">library</span>(lubridate)

scrape_docs &lt;-<span class="st"> </span><span class="cf">function</span>(URL){
  doc &lt;-<span class="st"> </span><span class="kw">read_html</span>(URL)

  speaker &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(doc, <span class="st">&quot;.diet-title a&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">html_text</span>()
  
  date &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(doc, <span class="st">&quot;.date-display-single&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">mdy</span>()
  
  title &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(doc, <span class="st">&quot;h1&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">html_text</span>()
  
  text &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(doc, <span class="st">&quot;div.field-docs-content&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">html_text</span>()
  
  all_info &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">speaker =</span> speaker, <span class="dt">date =</span> date, <span class="dt">title =</span> title, <span class="dt">text =</span> text)
  
  <span class="kw">return</span>(all_info)
}</code></pre></div>
<div id="solution" class="section level3 unnumbered">
<h3>Solution</h3>
<p>There are likely many ways to achieve this task. Here’s one solution:</p>
<div id="write-function-scrape_urls-to-scrape-urls-of-individual-search-results." class="section level4 unnumbered">
<h4>1. Write function <code>scrape_urls</code> to scrape URLs of individual search results.</h4>
<p>The following function passes a page of search results, and returns a vector of URLs, each URL corresponding to an individual document.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scrape_urls &lt;-<span class="st"> </span><span class="cf">function</span>(path) {
  
  html &lt;-<span class="st"> </span><span class="kw">read_html</span>(path) <span class="co">#Download HTML of webpage</span>
  
  links &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(html, <span class="st">&quot;.views-field-title a&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#select element with document URLs</span>
<span class="st">                </span><span class="kw">html_attr</span>(<span class="st">&quot;href&quot;</span>)
  
  <span class="kw">return</span>(links) <span class="co">#output results</span>
}

scrape_test &lt;-<span class="st"> </span><span class="kw">scrape_urls</span>(<span class="st">&quot;https://www.presidency.ucsb.edu/advanced-search?field-keywords=%22space+exploration%22&amp;field-keywords2=&amp;field-keywords3=&amp;from%5Bdate%5D=&amp;to%5Bdate%5D=&amp;person2=&amp;items_per_page=100&quot;</span>)

scrape_test[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]
<span class="co">#&gt;  [1] &quot;/documents/special-message-the-congress-relative-space-science-and-exploration&quot;                    </span>
<span class="co">#&gt;  [2] &quot;/documents/statement-the-president-support-the-administration-bill-relative-space-science-and&quot;     </span>
<span class="co">#&gt;  [3] &quot;/documents/statement-the-president-upon-signing-the-national-aeronautics-and-space-act-1958&quot;       </span>
<span class="co">#&gt;  [4] &quot;/documents/annual-budget-message-the-congress-fiscal-year-1960&quot;                                    </span>
<span class="co">#&gt;  [5] &quot;/documents/letter-t-keith-glennan-administrator-national-aeronautics-and-space-administration&quot;     </span>
<span class="co">#&gt;  [6] &quot;/documents/the-presidents-news-conference-225&quot;                                                     </span>
<span class="co">#&gt;  [7] &quot;/documents/the-presidents-news-conference-augusta-georgia-0&quot;                                       </span>
<span class="co">#&gt;  [8] &quot;/documents/annual-message-the-congress-the-state-the-union-6&quot;                                      </span>
<span class="co">#&gt;  [9] &quot;/documents/special-message-the-congress-recommending-amendments-the-national-aeronautics-and-space&quot;</span>
<span class="co">#&gt; [10] &quot;/documents/special-message-the-congress-transfers-from-the-department-defense-the-national&quot;</span></code></pre></div>
</div>
<div id="iterate-over-results-pager-to-collect-all-urls" class="section level4 unnumbered">
<h4>2. Iterate over results pager to collect all URLs</h4>
<p><code>scrape_urls</code> collects all of the relative URLs from the first page of our search results (100 documents). While this is a good start, we have 4 pages of search results (310 results total) and need to collect the URLs of ALL results, from ALL result pages.</p>
<p>First, let’s grab the path of all 4 result pages, and store that result in an object called <code>all_pages</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_pages &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;https://www.presidency.ucsb.edu/advanced-search?field-keywords=%22space%20exploration%22&amp;field-keywords2=&amp;field-keywords3=&amp;from%5Bdate%5D=&amp;to%5Bdate%5D=&amp;person2=&amp;items_per_page=100&amp;page=&quot;</span>, <span class="dv">0</span><span class="op">:</span><span class="dv">3</span>)</code></pre></div>
<p>Now, we can use <code>scrape_urls</code> to collect the URLs from all the pages of search results. We store the results as a character vector called <code>all_urls</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_urls &lt;-<span class="st"> </span><span class="kw">map</span>(all_pages, scrape_urls) <span class="op">%&gt;%</span>
<span class="st">  </span>unlist

<span class="co"># uncomment to test -- should be 310</span>
<span class="kw">length</span>(all_urls)
<span class="co">#&gt; [1] 310</span></code></pre></div>
</div>
<div id="modify-to-full-path" class="section level4 unnumbered">
<h4>3. Modify to Full Path</h4>
<p>The <code>HREF</code> we got above is what’s called a <em>relative</em> URL: i.e., it looks like this:</p>
<p><code>/documents/special-message-the-congress-relative-space-science-and-exploration</code></p>
<p>as opposed to having a full path, like:</p>
<p><code>http://www.presidency.ucsb.edu/documents/special-message-the-congress-relative-space-science-and-exploration</code></p>
<p>The following code converts the relative paths to full paths, and saves them in an object called <code>all_full_urls</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_full_urls &lt;-<span class="st"> </span><span class="kw">str_c</span>(<span class="st">&quot;https://www.presidency.ucsb.edu&quot;</span>, all_urls)
all_full_urls[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]
<span class="co">#&gt;  [1] &quot;https://www.presidency.ucsb.edu/documents/special-message-the-congress-relative-space-science-and-exploration&quot;                    </span>
<span class="co">#&gt;  [2] &quot;https://www.presidency.ucsb.edu/documents/statement-the-president-support-the-administration-bill-relative-space-science-and&quot;     </span>
<span class="co">#&gt;  [3] &quot;https://www.presidency.ucsb.edu/documents/statement-the-president-upon-signing-the-national-aeronautics-and-space-act-1958&quot;       </span>
<span class="co">#&gt;  [4] &quot;https://www.presidency.ucsb.edu/documents/annual-budget-message-the-congress-fiscal-year-1960&quot;                                    </span>
<span class="co">#&gt;  [5] &quot;https://www.presidency.ucsb.edu/documents/letter-t-keith-glennan-administrator-national-aeronautics-and-space-administration&quot;     </span>
<span class="co">#&gt;  [6] &quot;https://www.presidency.ucsb.edu/documents/the-presidents-news-conference-225&quot;                                                     </span>
<span class="co">#&gt;  [7] &quot;https://www.presidency.ucsb.edu/documents/the-presidents-news-conference-augusta-georgia-0&quot;                                       </span>
<span class="co">#&gt;  [8] &quot;https://www.presidency.ucsb.edu/documents/annual-message-the-congress-the-state-the-union-6&quot;                                      </span>
<span class="co">#&gt;  [9] &quot;https://www.presidency.ucsb.edu/documents/special-message-the-congress-recommending-amendments-the-national-aeronautics-and-space&quot;</span>
<span class="co">#&gt; [10] &quot;https://www.presidency.ucsb.edu/documents/special-message-the-congress-transfers-from-the-department-defense-the-national&quot;</span></code></pre></div>
</div>
<div id="scrape-documents" class="section level4 unnumbered">
<h4>4. Scrape Documents</h4>
<p>Now that we have the full paths to each document, we’re ready to scrape each document.</p>
<p>We’ll use the <code>scrape_docs</code> function (given above), which accepts a URL of an individual record, scrapes the page, and returns a list containing the document’s date, speaker, title, and full text.</p>
<p>Using this function, we’ll iterate over <code>all_full_urls</code> to collect information on all the documents. We save the result as a dataframe, with each row representing a document.</p>
<p>Note: This might take a few minutes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">final_df &lt;-<span class="st"> </span><span class="kw">map</span>(all_full_urls, scrape_docs) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">bind_rows</span>() </code></pre></div>
</div>
<div id="print-and-write" class="section level4 unnumbered">
<h4>5. Print and write</h4>
<p>We’ll print the dataframe’s structure, write the csv, and we’re done!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(final_df)
<span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    310 obs. of  4 variables:</span>
<span class="co">#&gt;  $ speaker: chr  &quot;Dwight D. Eisenhower&quot; &quot;Dwight D. Eisenhower&quot; &quot;Dwight D. Eisenhower&quot; &quot;Dwight D. Eisenhower&quot; ...</span>
<span class="co">#&gt;  $ date   : Date, format: &quot;1958-04-02&quot; &quot;1958-05-14&quot; ...</span>
<span class="co">#&gt;  $ title  : chr  &quot;Special Message to the Congress Relative to Space Science and Exploration.&quot; &quot;Statement by the President in Support of the Administration Bill Relative to Space Science and Exploration.&quot; &quot;Statement by the President Upon Signing the National Aeronautics and Space Act of 1958.&quot; &quot;Annual Budget Message to the Congress: Fiscal Year 1960.&quot; ...</span>
<span class="co">#&gt;  $ text   : chr  &quot;\n    To the Congress of the United States:\nRecent developments in long-range rockets for military purposes ha&quot;| __truncated__ &quot;\n    IN MY MESSAGE to Congress on space science and exploration I recommended that space science activities sp&quot;| __truncated__ &quot;\n    I HAVE TODAY signed H. R. 12575, the National Aeronautics and Space Act of 1958.\nThe enactment of this l&quot;| __truncated__ &quot;\n    To the Congress of the United States:\nThe situation we face today as a Nation differs significantly from&quot;| __truncated__ ...</span>
<span class="co">#write.csv(final_df, &quot;data/space.csv&quot;, row.names = F)</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="git-and-github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="final-projects.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rochelleterman/plsc-31101/edit/master/97_Assignments/97_0-Preamble.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["https://github.com/rochelleterman/plsc-31101/raw/master/97_Assignments/97_0-Preamble.Rmd"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
